{"version":3,"sources":["components/constructor-ingredient/constructor-ingredient.module.css","components/modal-overlay/modal-overlay.module.css","components/profile-orders/profile-orders.module.css","pages/ingredient-page/ingredient-page.module.css","components/burger-constructor/burger-constructor.module.css","services/types/hooks.ts","components/menu-button/menu-button.tsx","components/app-header/app-header.tsx","components/constructor-ingredient/constructor-ingredient.tsx","utils/cookie_handlers.ts","utils/fetch_api.ts","services/actions/order.ts","services/actions/constructor.ts","components/burger-constructor/burger-constructor.tsx","images/done.svg","services/actions/ingredients.ts","components/ingredient-card/ingredient-card.tsx","components/ingredients-tab/ingredients-tab.tsx","components/burger-ingredients/burger-ingredients.tsx","components/ingredient-details/ingredient-details.tsx","components/order-details/order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","services/actions/user.ts","pages/login-page/login-page.tsx","pages/register-page/register-page.tsx","pages/forgot-password-page/forgot-password-page.tsx","pages/reset-password-page/reset-password-page.tsx","components/nav-profile/nav-profile.tsx","components/profile-info/profile-info.tsx","components/ingredient-icon/ingredient-icon.tsx","utils/format-data.ts","components/order-feed-item/order-feed-item.tsx","services/actions/feed.ts","components/profile-orders/profile-orders.tsx","pages/profile-page/profile-page.tsx","pages/not-found-page/not-found-page.tsx","pages/ingredient-page/ingredient-page.tsx","components/order-board/order-board.tsx","pages/order-feed-page/order-feed-page.tsx","components/order/order.tsx","pages/order-page/order-page.tsx","components/protected-route/protected-route.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/ingredients-reducer.ts","services/reducers/order-reducer.ts","services/reducers/constructor-reducer.ts","services/reducers/user-reducer.ts","services/reducers/feed-reducer.ts","services/reducers/index.ts","services/middlewares/wsSocketMiddleware.ts","services/store.ts","index.tsx","components/ingredient-details/ingredient-details.module.css","components/order-board/order-board.module.css","components/ingredient-card/ingredient-card.module.css","components/order-feed-item/order-feed-item.module.css","components/order/order.module.css","components/app-header/app-header.module.css","pages/order-feed-page/order-feed-page.module.css","components/order-details/order-details.module.css","components/nav-profile/nav-profile.module.css","components/burger-ingredients/burger-ingredients.module.css","components/menu-button/menu-button.module.css","pages/index.module.css","components/app/app.module.css","components/modal/modal.module.css","components/ingredient-icon/ingredient-icon.module.css","components/ingredients-tab/ingredients-tab.module.css","pages/profile-page/profile-page.module.css","components/profile-info/profile-info.module.css","pages/order-page/order-page.module.css"],"names":["module","exports","useSelector","useSelectorOrigin","useDispatch","useDispatchOrigin","MenuButton","className","children","active","text","style","btn","logo","AppHeader","isMainPage","useRouteMatch","isExact","isFeedPage","isProfilePage","userName","store","user","name","profile","header_container","header","container","to","link","type","ConstructorIngredient","item","onDelete","onMove","index","ref","React","useRef","useDrag","dragRef","useDrop","accept","hover","sourceIndex","targetIndex","dropTarget","item_container","draggable","isLocked","price","thumbnail","image","handleClose","uid","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","options","path","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","checkResponse","response","ok","json","Promise","reject","status","POST_ORDER_REQUEST","POST_ORDER_SUCCESS","POST_ORDER_FAILED","RESET_ORDER_NUMBER","CLOSE_ORDER","postOrder","ingredients","dispatch","fetch","URL_API","method","headers","Authorization","body","JSON","stringify","then","postOrderRequest","orderNumber","order","number","catch","e","console","error","SET_TOTAL_PRICE","RESET_TOTAL_PRICE","ADD_INGREDIENT","DELETE_INGREDIENT","MOVE_INGREDIENT","RESET_INGREDIENTS","deleteIngredient","resetIngredients","_path","_path2","_path3","_path4","_defs","BurgerConstructor","history","useHistory","isLogged","constructor","ingredientsConstructor","orderRequest","orderFailed","totalPrice","useMemo","reduce","sum","bunIngredient","filter","otherIngredients","useEffect","makeOrder","useCallback","map","_id","push","pathname","handleMoveIngredient","moveIngredient","handleDrop","ingredient","uuid","drop","containerStyle","length","emptyContainer","mainContainerStyle","main","mainEmpty","itemContainerStyle","itemContainerEmpty","wrapper","scrolled","total_container","price_value","currency_container","size","onClick","disabled","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","OPEN_INGREDIENT","CLOSE_INGREDIENT","getIngredients","data","IngredientCard","location","useLocation","openIngredientsDetail","ingredientID","currentIngredient","count","state","background","image_container","src","alt","counter","price_container","icon","name_container","name_text","IngredientsTab","forwardRef","title","tab_name","two_column","BurgerIngredients","useState","current","setCurrent","refBun","refMain","refSauces","bunIngredients","sauceIngredients","mainIngredients","scrollToTab","scrollIntoView","behavior","title_container","title_text","tab","onScroll","offsetHeight","currentTarget","scrollTop","IngredientDetails","params","useParams","find","id","image_large","property_container","property_item","property_value","calories","proteins","fat","carbohydrates","_excluded","_extends","Object","assign","bind","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgDone","_ref","svgRef","titleId","props","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","fillOpacity","cx","cy","r","gradientUnits","gradientTransform","stopColor","stopOpacity","offset","ForwardRef","OrderDetails","order_id_container","order_id","popup_text","done_icon","ModalOverlay","onClose","modalOverlay","Modal","allOrders","feed","orders","userOrders","feedOrderNumber","profileOrderNumber","closeModal","keyCode","addEventListener","removeEventListener","ReactDOM","createPortal","popup_container","icon_container","getElementById","REGISTRATION_REQUEST","REGISTRATION_SUCCESS","REGISTRATION_FAILED","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILED","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","UPDATE_USER_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","REFRESH_TOKEN_REQUEST","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILED","registrationUser","email","password","registrationUserRequest","resp","success","accessToken","localStorage","setItem","refreshToken","forgotPassword","forgotPasswordRequest","resetPassword","newPassword","code","resetPasswordRequest","login","loginRequest","logout","getItem","removeItem","updateToken","getUser","String","updateUser","updateUserRequest","LoginPage","setEmail","setPassword","from","loginFailed","form_container","onSubmit","preventDefault","inputs_container","placeholder","onChange","errorText","RegisterPage","setName","ForgotPasswordPage","ResetPasswordPage","setCode","prevPage","NavProfile","url","nav_container","exact","nav_link","activeClassName","active_nav_link","button","ProfileInfo","isChange","setIsChange","IngredientIcon","imageURL","last","iconStyle","boxSizing","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","weekDays","days","formatData","date","currentDate","orderDate","daysFromOrder","Math","floor","getTime","time","getHours","getMinutes","remains","getDay","ordersStatus","created","pending","done","OrderFeedItem","isUserOrder","orderIngredients","allIngredientItem","showIngredients","slice","lastIngredient","hiddenIngredientCount","info_container","date_container","createdAt","order_status","ingredients_container","icons_container","image_mobile","total_price","WS_CONNECTION_START_ORDERS","WS_CONNECTION_SUCCESS_ORDERS","WS_CONNECTION_ERROR_ORDERS","WS_CONNECTION_CLOSED_ORDERS","WS_GET_ORDERS","WS_CONNECTION_START_ORDERS_USER","WS_CONNECTION_SUCCESS_ORDERS_USER","WS_CONNECTION_ERROR_ORDERS_USER","WS_CONNECTION_CLOSED_ORDERS_USER","WS_GET_ORDERS_USER","wsConnectionStartOrdersAction","wsConnectionClosedOrdersAction","wsConnectionStartOrdersUserAction","wsConnectionClosedOrdersUserAction","wsOrdersActions","wsInit","onOpen","onError","onOrders","wsOrdersUserActions","ProfileOrders","log","ProfilePage","profile_wrapper","profile_container","NotFoundPage","IngredientPage","OrderBoard","total","totalToday","doneOrders","executeOrders","status_container","ready","execute","OrderFeedPage","board","Order","allIngredients","userOrder","currentOrder","orderIngredientsAll","includes","total_count","orderIngredient","total_price_container","OrderPage","isUserOrders","setOrderNumber","isProfileOrders","ProtectedRoute","render","App","closeIngredient","goBack","app","DndProvider","backend","HTML5Backend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredientsInitialState","ingredientsRequest","ingredientsFailed","orderInitialState","constructorInitialState","userInitialState","registrationRequest","registrationFailed","forgotPasswordFailed","resetPasswordFailed","refreshTokenFailed","refreshTokenRequest","logoutRequest","logoutFailed","getUserRequest","getUserFailed","updateUserFailed","feedOrdersInitialState","wsConnected","rootReducer","combineReducers","action","movedElement","splice","socketMiddleware","wsUrl","wsActions","socket","next","token","getState","WebSocket","onopen","event","onerror","onmessage","message","parse","onclose","WS_URL","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"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","file":"static/js/main.02eada69.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item_container\":\"constructor-ingredient_item_container__1dCjq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modal-overlay_modalOverlay__McLno\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrolled\":\"profile-orders_scrolled__2Q0-V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ingredient-page_wrapper__1Lqru\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"burger-constructor_wrapper__1QBYZ\",\"container\":\"burger-constructor_container__2dPB8\",\"emptyContainer\":\"burger-constructor_emptyContainer__RPs0o burger-constructor_container__2dPB8\",\"item_container\":\"burger-constructor_item_container__2w3Sa\",\"itemContainerEmpty\":\"burger-constructor_itemContainerEmpty__20e2p burger-constructor_item_container__2w3Sa\",\"main\":\"burger-constructor_main__2MLW2\",\"mainEmpty\":\"burger-constructor_mainEmpty__33WMO burger-constructor_main__2MLW2\",\"total_container\":\"burger-constructor_total_container__3coV4\",\"scrolled\":\"burger-constructor_scrolled__Z2mKA\",\"price_value\":\"burger-constructor_price_value__2Dn_q\",\"currency_container\":\"burger-constructor_currency_container__16O7i\"};","import { RootState, AppDispatch, AppThunk } from './index';\r\nimport { \r\n  useSelector as useSelectorOrigin,\r\n  useDispatch as useDispatchOrigin,\r\n  TypedUseSelectorHook\r\n} from 'react-redux';\r\n\r\n// typed useSelector hook\r\nexport const useSelector: TypedUseSelectorHook<RootState> = useSelectorOrigin;\r\n\r\n// typed useDispatch hook \r\nexport const useDispatch = () => useDispatchOrigin<AppDispatch | AppThunk>();","import React, { FunctionComponent, ReactElement } from 'react';\r\nimport style from'./menu-button.module.css'\r\n\r\ntype TMenuButtonProps = { \r\n  className?: string;\r\n  children: ReactElement;\r\n  active: boolean | undefined;\r\n  text: string;\r\n};\r\n\r\nconst MenuButton: FunctionComponent<TMenuButtonProps> = ({className, children, active, text}) => {\r\n  return (\r\n    <div className={`${style.btn} ${className}`} >\r\n        <div className={style.logo}>\r\n          {children}\r\n        </div>\r\n        <p className={`text text_type_main-small ${style.text} ${active ? style.active : ''}`}>{text}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuButton;\r\n","import React from 'react';\r\nimport style from './app-header.module.css'\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport MenuButton from '../menu-button/menu-button';\r\nimport { useSelector } from '../../services/types/hooks';\r\n\r\nconst AppHeader = () => {\r\n\r\n\r\n  //TODO: Hooks typing\r\n  const isMainPage = useRouteMatch(\"/\")?.isExact;\r\n  const isFeedPage = useRouteMatch(\"/order-feed\")?.isExact;\r\n  const isProfilePage = useRouteMatch(\"/profile\")?.isExact;\r\n\r\n  // TODO: store typing\r\n  const userName = useSelector(store => store.user?.user?.name)\r\n  const profile = userName ? userName : \" \";\r\n\r\n  return (\r\n    <header className={style.header_container}>\r\n      <nav className={style.header}>\r\n        <div className={style.container}>\r\n          <Link to='/' className={style.link}>\r\n            <MenuButton className='mr-2' text='' active={isMainPage}>\r\n              <BurgerIcon type={isMainPage ? 'primary' : \"secondary\" }/>\r\n            </MenuButton>\r\n          </Link>\r\n          <Link to='/order-feed' className={style.link}>\r\n            <MenuButton text=' ' active={isFeedPage}>\r\n              <ListIcon type={isFeedPage ? 'primary' : \"secondary\" }/>\r\n            </MenuButton>\r\n          </Link>\r\n        </div>\r\n        <Link to='/profile' className={style.link}>\r\n          <MenuButton text={profile} active={isProfilePage}>\r\n            <ProfileIcon type={isProfilePage ? 'primary' : \"secondary\" }/>\r\n          </MenuButton>\r\n        </Link>\r\n      </nav>\r\n      <Link to='/' className={style.logo}>\r\n        <Logo />\r\n      </Link>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;","import React, {FC} from \"react\";\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport style from './constructor-ingredient.module.css';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ntype TConstructorIngredient = {\r\n  item: TIngredient;\r\n  onDelete: (uid: string | undefined) => void;\r\n  onMove: (targetIndex: number, sourceIndex: number) => void;\r\n  index: number;\r\n};\r\n\r\nexport const ConstructorIngredient: FC<TConstructorIngredient> = ({item, onDelete, onMove, index}) => {\r\n  \r\n  // ref\r\n  const ref = React.useRef(null);\r\n  \r\n  // TODO: useDrag typing???? \r\n  // on drag current element\r\n  const [, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: {index}\r\n  });\r\n\r\n  // TODO: useDrop typing???\r\n  // on drop\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    hover: (item: {index: number}) => {\r\n      // index - is target index (current hover) of element in source array\r\n      // item.index - is source index (current draggable) of element in source array\r\n      const sourceIndex = item.index;\r\n      const targetIndex = index;\r\n      \r\n      if (targetIndex === sourceIndex) return;\r\n      \r\n      onMove(targetIndex, sourceIndex);\r\n      \r\n      // after moving reassign target index for current element\r\n      item.index = targetIndex;\r\n    }\r\n  });\r\n\r\n  dragRef(dropTarget(ref));\r\n\r\n  return (\r\n    <div \r\n      className={style.item_container}\r\n      draggable\r\n      ref={ref}\r\n    >\r\n      <DragIcon type=\"primary\"/>\r\n      <ConstructorElement\r\n        key={item.uid}\r\n        text={item.name}\r\n        isLocked={false}\r\n        price={item.price}\r\n        thumbnail={item.image}\r\n        handleClose={() => {\r\n          onDelete(item.uid)}}\r\n      />\r\n    </div>\r\n  )\r\n};","export function getCookie(name: string) {\r\n  let matches = document.cookie.match(new RegExp(\r\n    \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n  ));\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\n                      // (name: string, value: string, options: {[optionsKey: string]: string} = {}) \r\n                      // TODO: typing args\r\nexport function setCookie(name: string, value: string, options: any = {}) {\r\n\r\n  options = {\r\n    path: '/',\r\n    ...options\r\n  };\r\n\r\n  if (options.expires instanceof Date) {\r\n    options.expires = options.expires.toUTCString();\r\n  }\r\n\r\n  let updatedCookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\r\n\r\n  for (let optionKey in options) {\r\n    updatedCookie += \"; \" + optionKey;\r\n    let optionValue = options[optionKey];\r\n    if (optionValue !== true) {\r\n      updatedCookie += \"=\" + optionValue;\r\n    }\r\n  }\r\n\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, \"\", {\r\n    'max-age': -1\r\n  })\r\n}","import {getCookie} from './cookie_handlers'\r\n\r\nconst URL_API = 'https://norma.nomoreparties.space/api/'\r\nconst INGREDIENT_API = URL_API + 'ingredients';\r\nconst ORDER_API = URL_API + 'orders'\r\nconst REGISTRATION_USER_API = URL_API + 'auth/register'\r\nconst FORGOT_PASSWORD_API = URL_API + 'password-reset'\r\nconst RESET_PASSWORD_API = URL_API + 'password-reset/reset'\r\nconst LOGIN_API = URL_API + 'auth/login'\r\nconst LOGOUT_API = URL_API + 'auth/logout'\r\nconst GET_USER_API = URL_API + 'auth/user'\r\nconst REFRESH_TOKEN_API = URL_API + 'auth/token'\r\nconst UPDATE_USER_API = URL_API + 'auth/user'\r\n\r\nexport const getIngredientsRequest = () => {\r\n  return fetch(INGREDIENT_API).then(checkResponse)\r\n};\r\n\r\nexport const postOrderRequest = (ingredients: {ingredients: string[]}) => {\r\n  return fetch(ORDER_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `${getCookie('token')}`\r\n    },\r\n    body: JSON.stringify({ ingredients: ingredients }),\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const registrationUserRequest = (email: string, password: string, name: string) => {\r\n  return fetch(REGISTRATION_USER_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({\r\n      \"email\": email,\r\n      \"password\": password,\r\n      \"name\": name\r\n    }),\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const forgotPasswordRequest = (email: string) => {\r\n  return fetch(FORGOT_PASSWORD_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({\r\n      \"email\": email\r\n    }),\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const resetPasswordRequest = (password: string, code: string) => {\r\n  return fetch(RESET_PASSWORD_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({\r\n      \"password\": password,\r\n      \"token\": code\r\n    }),\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const loginRequest = (email: string, password: string) => {\r\n  return fetch(LOGIN_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({\r\n      \"email\": email,\r\n      \"password\": password\r\n    }),\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const logoutRequest = () => {\r\n  return fetch(LOGOUT_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body:\r\n      JSON.stringify({\"token\": localStorage.getItem('refreshToken')\r\n    })\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const refreshTokenRequest = () => {\r\n  return fetch(REFRESH_TOKEN_API, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body:\r\n      JSON.stringify({\"token\": localStorage.getItem('refreshToken')\r\n    })\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const getUserRequest = () => {\r\n  return fetch(GET_USER_API, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": String(getCookie('token'))\r\n    }\r\n  }).then(checkResponse)\r\n}\r\n\r\nexport const updateUserRequest = (email: string, name: string) => {\r\n  return fetch(UPDATE_USER_API, {\r\n    method: \"PATCH\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": String(getCookie('token'))\r\n    },\r\n    body: JSON.stringify({ email, name }),\r\n})\r\n.then(checkResponse)\r\n}\r\n\r\nconst checkResponse = (response: Response) => {\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n  return Promise.reject(response.status)\r\n}\r\n","import { postOrderRequest } from '../../utils/fetch_api';\r\nimport { AppDispatch, AppThunk} from \"../types\";\r\n\r\nexport const POST_ORDER_REQUEST: 'POST_ORDER_REQUEST' = 'POST_ORDER_REQUEST';\r\nexport const POST_ORDER_SUCCESS: 'POST_ORDER_SUCCESS' = 'POST_ORDER_SUCCESS';\r\nexport const POST_ORDER_FAILED: 'POST_ORDER_FAILED' = 'POST_ORDER_FAILED';\r\nexport const RESET_ORDER_NUMBER: 'RESET_ORDER_NUMBER' = 'RESET_ORDER_NUMBER';\r\nexport const CLOSE_ORDER: 'CLOSE_ORDER' = 'CLOSE_ORDER';\r\n\r\nexport interface IPostOrderRequest {\r\n  readonly type: typeof POST_ORDER_REQUEST;\r\n};\r\n\r\nexport interface IPostOrderSuccess {\r\n  readonly type: typeof POST_ORDER_SUCCESS;\r\n  readonly orderNumber: number | null;\r\n};\r\n\r\nexport interface IPostOrderFailed {\r\n  readonly type: typeof POST_ORDER_FAILED;\r\n};\r\n\r\nexport interface IResetOrderNumber {\r\n  readonly type: typeof RESET_ORDER_NUMBER;\r\n};\r\n\r\nexport interface ICloseOrder {\r\n  readonly type: typeof CLOSE_ORDER;\r\n};\r\n\r\nexport type TOrderActions = IPostOrderRequest | IPostOrderSuccess | IPostOrderFailed | IResetOrderNumber | ICloseOrder;\r\n\r\nexport const postOrder: AppThunk = (ingredients: {ingredients: string[]}) => {\r\n  return (\r\n    function(dispatch: AppDispatch) {\r\n      dispatch({\r\n        type: POST_ORDER_REQUEST\r\n      })\r\n      \r\n      postOrderRequest(ingredients)\r\n      .then(response => {\r\n        dispatch({\r\n          type: POST_ORDER_SUCCESS,\r\n          orderNumber: response.order.number\r\n        })\r\n      })\r\n      .catch(e => {\r\n        console.error(e);\r\n        dispatch({\r\n          type: POST_ORDER_FAILED\r\n        })\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const closeModalOrder = (): ICloseOrder => {\r\n  return {\r\n    type: CLOSE_ORDER\r\n  }\r\n}","import { TIngredient } from \"../../utils/types\";\r\n\r\nexport const SET_TOTAL_PRICE: 'SET_TOTAL_PRICE' = 'SET_TOTAL_PRICE';\r\nexport const RESET_TOTAL_PRICE: 'RESET_TOTAL_PRICE' = 'RESET_TOTAL_PRICE';\r\nexport const ADD_INGREDIENT: 'ADD_INGREDIENT' = 'ADD_INGREDIENT';\r\nexport const DELETE_INGREDIENT: 'DELETE_INGREDIENT' = 'DELETE_INGREDIENT';\r\nexport const MOVE_INGREDIENT: 'MOVE_INGREDIENT' = 'MOVE_INGREDIENT';\r\nexport const RESET_INGREDIENTS: 'RESET_INGREDIENTS' = 'RESET_INGREDIENTS';\r\n\r\nexport interface ISetTotalPrice {\r\n  readonly type: typeof SET_TOTAL_PRICE;\r\n  readonly totalPrice: number;\r\n};\r\n\r\nexport interface IResetTotalPrice {\r\n  readonly type: typeof RESET_TOTAL_PRICE;\r\n};\r\n\r\nexport interface IAddIngredient {\r\n  readonly type: typeof ADD_INGREDIENT;\r\n  readonly item: TIngredient;\r\n};\r\n\r\nexport interface IDeleteIngredient {\r\n  readonly type: typeof DELETE_INGREDIENT;\r\n  readonly uid: string | undefined;\r\n};\r\n\r\nexport interface IMoveIngredient {\r\n  readonly type: typeof MOVE_INGREDIENT;\r\n  readonly sourceIndex: number;\r\n  readonly targetIndex: number;\r\n};\r\n\r\nexport interface IResetIngredients {\r\n  readonly type: typeof RESET_INGREDIENTS;\r\n};\r\n\r\nexport type TConstructorActions = \r\n  ISetTotalPrice |\r\n  IResetTotalPrice |\r\n  IAddIngredient |\r\n  IDeleteIngredient |\r\n  IMoveIngredient |\r\n  IResetIngredients;\r\n\r\nexport const resetTotalPrice = (): IResetTotalPrice => {\r\n  return {\r\n    type: RESET_TOTAL_PRICE\r\n  }\r\n};\r\n\r\nexport const setTotalPrice = (totalPrice: number): ISetTotalPrice => {\r\n  return {\r\n    type: SET_TOTAL_PRICE,\r\n    totalPrice: totalPrice\r\n  }\r\n};\r\n\r\nexport const addIngredient = (item: TIngredient, uid: string | undefined): IAddIngredient => {\r\n  return ({\r\n    type: ADD_INGREDIENT,\r\n    item: {...item, uid: uid}\r\n  })\r\n};\r\n\r\nexport const deleteIngredient = (uid: string | undefined): IDeleteIngredient => {\r\n  return ({\r\n    type: DELETE_INGREDIENT,\r\n    uid: uid\r\n  })\r\n};\r\n\r\nexport const moveIngredient = (sourceIndex: number, targetIndex: number): IMoveIngredient => {\r\n  return ({\r\n    type: MOVE_INGREDIENT,\r\n    sourceIndex,\r\n    targetIndex,\r\n  })\r\n};\r\n\r\nexport const resetIngredients = (): IResetIngredients => {\r\n  return {\r\n    type: RESET_INGREDIENTS\r\n  }\r\n}","import React, { FC } from 'react'\r\nimport { useDrop } from \"react-dnd\"\r\nimport { v4 as uuid } from 'uuid'\r\nimport style from'./burger-constructor.module.css'\r\nimport {\r\n  CurrencyIcon,\r\n  Button,\r\n  ConstructorElement\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ConstructorIngredient } from '../constructor-ingredient/constructor-ingredient'\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { postOrder } from '../../services/actions/order';\r\nimport {\r\n  setTotalPrice,\r\n  addIngredient,\r\n  deleteIngredient,\r\n  resetIngredients,\r\n  moveIngredient\r\n} from '../../services/actions/constructor';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { History } from 'history'\r\nimport { TIngredient } from '../../utils/types';\r\n\r\nfunction calculateTotalPrice(order: TIngredient[] | undefined) {\r\n  if (!order) {\r\n    return 0;\r\n  }\r\n  return order.reduce((sum: number, item: TIngredient) => sum + item.price, 0)\r\n}\r\n\r\nexport const BurgerConstructor: FC = () => {\r\n  const history: History = useHistory()\r\n\r\n  const isLogged = useSelector(store => store.user.isLogged);\r\n  const ingredients = useSelector(store => store.constructor.ingredientsConstructor);\r\n  const {orderRequest, orderFailed} = useSelector(store => store.order);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const totalPrice = React.useMemo(() => calculateTotalPrice(ingredients), [ingredients])\r\n  \r\n  const bunIngredient = ingredients?.filter((item: TIngredient) => item.type === 'bun')[0]\r\n  const otherIngredients = ingredients?.filter((item: TIngredient) => item.type !== 'bun')\r\n  \r\n\r\n  React.useEffect(() => {\r\n    if (ingredients) {\r\n      setTotalPrice(totalPrice)\r\n    } \r\n    if (orderFailed) {\r\n      dispatch(resetIngredients())\r\n    }\r\n  }, [dispatch, ingredients, orderFailed, totalPrice])\r\n\r\n  const handleDeleteIngredient = (uid: string | undefined) => {\r\n    dispatch(deleteIngredient(uid));\r\n}\r\n  const makeOrder = React.useCallback(() => {\r\n\r\n    if (ingredients && isLogged) {\r\n      const order: string[] = ingredients?.map(((item: TIngredient) => item._id)) \r\n      dispatch(postOrder(order))\r\n      dispatch(resetIngredients())\r\n    } else {\r\n      history.push({pathname: '/login'})\r\n    }\r\n  }, [dispatch, ingredients, isLogged, history])\r\n\r\n  const handleMoveIngredient = React.useCallback((sourceIndex, targetIndex) => {\r\n    dispatch(moveIngredient(sourceIndex, targetIndex))\r\n  }, [dispatch])\r\n\r\n  const handleDrop = (ingredient: TIngredient) => {\r\n    if (ingredient.type === \"bun\" && bunIngredient) {\r\n      dispatch(deleteIngredient(bunIngredient.uid));\r\n    } \r\n    dispatch(addIngredient(ingredient, uuid()));\r\n  };\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredients\",\r\n    drop: (ingredient: TIngredient) => {\r\n      handleDrop(ingredient);\r\n    }\r\n  });\r\n\r\n  const containerStyle = `${ingredients && style.container}\r\n                          ${(!ingredients || ingredients?.length < 1) && style.emptyContainer}`\r\n  const mainContainerStyle = `${otherIngredients && style.main}\r\n                              ${!otherIngredients && style.main}\r\n                              ${(bunIngredient && otherIngredients?.length < 1) && style.mainEmpty}`\r\n  const itemContainerStyle = `${!ingredients && style.item_container}\r\n                              ${(otherIngredients?.length > 0 && !bunIngredient) && style.itemContainerEmpty}`                           \r\n  return (\r\n    <section className={style.wrapper}>\r\n      <div className={containerStyle} ref={dropTarget} data-test=\"constructor\">\r\n        <div className={`${itemContainerStyle} pl-8`}>\r\n        {(otherIngredients?.length > 0 && !bunIngredient) && <div>\r\n           <p className=\"text text_type_main-medium\">\r\n             \r\n          </p>\r\n        </div>}         \r\n          {bunIngredient && \r\n          <ConstructorElement\r\n            key={bunIngredient.uid}\r\n            text={bunIngredient.name + \"\\n()\"}\r\n            type='top'\r\n            isLocked={true}\r\n            price={bunIngredient.price}\r\n            thumbnail={bunIngredient.image}\r\n          />}\r\n        </div>\r\n      <div className={mainContainerStyle}>\r\n        {(!otherIngredients || otherIngredients?.length < 1) && <div>\r\n           <p className=\"text text_type_main-medium\">\r\n              \r\n          </p>\r\n        </div>}\r\n        {(otherIngredients && otherIngredients?.length > 0) && <div className={style.scrolled}>\r\n          {otherIngredients?.map((item, index) => (\r\n            <ConstructorIngredient\r\n              index={index}\r\n              item={item}\r\n              key={item.uid}\r\n              onMove={handleMoveIngredient}\r\n              onDelete={() => {handleDeleteIngredient(item.uid)}}\r\n          />))}\r\n        </div>}\r\n      </div>\r\n      <div className={`${itemContainerStyle} pl-8`}>\r\n      {(otherIngredients?.length > 0 && !bunIngredient) && <div>\r\n           <p className=\"text text_type_main-medium\">\r\n             \r\n          </p>\r\n        </div>}     \r\n        {bunIngredient && \r\n          <ConstructorElement\r\n            key={bunIngredient.uid}\r\n            text={bunIngredient.name + \"\\n()\"}\r\n            type='bottom'\r\n            isLocked={true}\r\n            price={bunIngredient.price}\r\n            thumbnail={bunIngredient.image}\r\n          />}\r\n        </div>\r\n\r\n     </div>\r\n     <div className={style.total_container}>\r\n        <div className={style.price_value}>\r\n          <p className=\"text text_type_digits-medium\" data-test=\"total-price\">{totalPrice}</p>\r\n        </div>\r\n        <div className={style.currency_container}>\r\n          <CurrencyIcon type=\"primary\"/>\r\n        </div>\r\n        <Button \r\n          type=\"primary\"\r\n          size=\"large\" \r\n          onClick={makeOrder}\r\n          disabled={orderRequest || !bunIngredient || !otherIngredients || otherIngredients?.length < 1}\r\n        >\r\n          {orderRequest ? \" \" : \" \"}\r\n        </Button>\r\n     </div>\r\n     \r\n    </section>\r\n  );\r\n}","var _path, _path2, _path3, _path4, _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDone(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 107,\n    height: 102,\n    viewBox: \"0 0 107 102\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M8.36637 37.3873C2.54454 45.5044 2.54455 56.4957 8.36637 64.6127L28.3336 92.4518C34.1554 100.569 44.4748 103.965 53.8947 100.865L86.2023 90.2313C95.6223 87.1309 102 78.2387 102 68.2055V33.7945C102 23.7612 95.6222 14.8691 86.2023 11.7687L53.8947 1.13508C44.4748 -1.96536 34.1554 1.43114 28.3336 9.54819L8.36637 37.3873Z\",\n    fill: \"url(#paint0_radial_311_23)\",\n    fillOpacity: 0.25\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M103.944 39.453C108.019 46.5983 108.019 55.4017 103.944 62.547L88.5996 89.453C84.5247 96.5983 76.994 101 68.8442 101H38.1558C30.006 101 22.4753 96.5983 18.4004 89.453L3.05617 62.547C-1.01872 55.4017 -1.01872 46.5983 3.05617 39.453L18.4004 12.547C22.4753 5.40169 30.006 1 38.1558 1L68.8442 1C76.994 1 84.5247 5.40169 88.5996 12.547L103.944 39.453Z\",\n    fill: \"url(#paint1_radial_311_23)\",\n    fillOpacity: 0.25\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M43.9249 20.9109C49.3362 17.0297 56.6638 17.0297 62.0751 20.9109L80.6345 34.2224C86.0459 38.1036 88.3102 44.9832 86.2433 51.2632L79.1542 72.8016C77.0873 79.0815 71.1592 83.3333 64.4703 83.3333H41.5296C34.8408 83.3333 28.9127 79.0815 26.8458 72.8016L19.7567 51.2632C17.6898 44.9832 19.9541 38.1036 25.3655 34.2224L43.9249 20.9109Z\",\n    fill: \"url(#paint2_radial_311_23)\",\n    fillOpacity: 0.25\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M73.3122 37.5959C74.1999 38.4172 74.2327 39.7806 73.3852 40.641L50.0519 64.3333C49.6272 64.7646 49.0371 65.0059 48.422 64.9999C47.8069 64.9939 47.222 64.741 46.8063 64.3016L34.5841 51.3785C33.7548 50.5016 33.8159 49.1392 34.7206 48.3354C35.6253 47.5316 37.031 47.5908 37.8604 48.4677L48.4773 59.6934L70.1703 37.6667C71.0177 36.8062 72.4244 36.7745 73.3122 37.5959Z\",\n    fill: \"#F2F2F3\"\n  })), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint0_radial_311_23\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53 51) rotate(-46.1458) scale(70.7248 53.2019)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\"\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint1_radial_311_23\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53.5 51) rotate(-43.0632) scale(73.2274 55.0025)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\"\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint2_radial_311_23\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53 50.6667) rotate(136.146) scale(47.1499 35.4679)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\",\n    stopOpacity: 0.5\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDone);\nexport default __webpack_public_path__ + \"static/media/done.2022ce2b.svg\";\nexport { ForwardRef as ReactComponent };","import { getIngredientsRequest } from '../../utils/fetch_api'\r\nimport { TIngredient } from '../../utils/types';\r\nimport { AppDispatch, AppThunk} from \"../types\";\r\n\r\nexport const GET_INGREDIENTS_REQUEST: 'GET_INGREDIENTS_REQUEST' = \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" = \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED: \"GET_INGREDIENTS_FAILED\" = \"GET_INGREDIENTS_FAILED\";\r\nexport const OPEN_INGREDIENT: \"OPEN_INGREDIENT\" = \"OPEN_INGREDIENT\";\r\nexport const CLOSE_INGREDIENT: \"CLOSE_INGREDIENT\" = \"CLOSE_INGREDIENT\";\r\n\r\nexport interface TGetIngredientsRequest {\r\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\r\n};\r\n\r\nexport interface TGetIngredientsSuccess {\r\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\r\n  readonly ingredients: TIngredient[];\r\n};\r\n\r\nexport interface TGetIngredientsFailed {\r\n  readonly type: typeof GET_INGREDIENTS_FAILED;\r\n};\r\n\r\nexport interface TOpenIngredient {\r\n  readonly type: typeof OPEN_INGREDIENT;\r\n  readonly currentIngredient: TIngredient;\r\n};\r\n\r\nexport interface TCloseIngredient {\r\n  readonly type: typeof CLOSE_INGREDIENT;\r\n}\r\nexport type TIngredientsActions = TGetIngredientsRequest | TGetIngredientsSuccess | TGetIngredientsFailed | TOpenIngredient | TCloseIngredient;\r\n\r\nexport const getIngredients: AppThunk = () => (dispatch: AppDispatch) => {\r\n  dispatch({\r\n    type: GET_INGREDIENTS_REQUEST\r\n  });\r\n  getIngredientsRequest()\r\n  .then(response => {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_SUCCESS,\r\n      ingredients: response.data\r\n    })\r\n  })\r\n  .catch(e => {\r\n    console.error(e);\r\n    dispatch({\r\n      type: GET_INGREDIENTS_FAILED\r\n    })\r\n  })\r\n}\r\n\r\nexport const openModalIngredient = (currentIngredientID: string) => {\r\n  return ({\r\n  type: OPEN_INGREDIENT,\r\n  currentIngredient: currentIngredientID,\r\n})\r\n}\r\n\r\nexport const closeModalIngredient = (): TCloseIngredient => {\r\n  return ({\r\n  type: CLOSE_INGREDIENT,\r\n  })\r\n}","import React, {FC} from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport { TIngredient } from '../../utils/types'\r\nimport style from'./ingredient-card.module.css'\r\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { openModalIngredient } from '../../services/actions/ingredients'\r\nimport { useLocation, Link } from 'react-router-dom'\r\n\r\nexport const IngredientCard: FC<{ingredient: TIngredient}> = ({ingredient}) => {\r\n\r\n  const order: TIngredient[] | null = useSelector(store => store.constructor.ingredientsConstructor)\r\n  \r\n  const dispatch = useDispatch()\r\n\r\n  const location = useLocation<Location>()\r\n  \r\n  const [, dragRef] = useDrag({\r\n      type: 'ingredients',\r\n      item: ingredient\r\n  })\r\n\r\n  const openIngredientsDetail = (ingredientID: string) => {\r\n    dispatch(openModalIngredient(ingredientID))\r\n  }\r\n  const count = order?.filter((item: TIngredient) => item._id === ingredient._id).length\r\n\r\n  return (\r\n    <Link \r\n      to={{ pathname: `/ingredients/${ingredient._id}`, state: {background: location} }}\r\n      onClick={() => {openIngredientsDetail(ingredient._id)}} \r\n      className={style.link}\r\n    >\r\n      <div className={style.container} ref={dragRef} data-test={ingredient._id}>\r\n        <div className={style.image_container}>\r\n          <img src={ingredient.image} alt={ingredient.name} />\r\n          <div className={style.counter}>\r\n            {count > 0 && <Counter count={count} size=\"default\" />}\r\n          </div>\r\n        </div>\r\n        <div className={style.price_container}>\r\n          <div className={style.price_value}>\r\n            <p className=\"text text_type_digits-default\">\r\n              {ingredient.price}\r\n            </p>\r\n          </div>\r\n          <div className={style.icon}>\r\n            <CurrencyIcon type='primary'/>\r\n          </div>\r\n        </div>\r\n        <div className={style.name_container}>\r\n          <p className={`text text_type_main-small ${style.name_text}`}>{ingredient.name}</p>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}","import React from 'react';\r\nimport { IngredientCard } from '../ingredient-card/ingredient-card';\r\nimport style from './ingredients-tab.module.css';\r\nimport { TIngredient } from '../../utils/types';\r\n\r\ntype TIngredientTab = {\r\n  ingredients: Array<TIngredient>,\r\n  title: string,\r\n  ref: HTMLDivElement\r\n};\r\n\r\nexport const IngredientsTab = React.forwardRef<HTMLDivElement, TIngredientTab>(({ingredients, title}, ref) => {\r\n\r\n  return (  \r\n    <div ref={ref}>\r\n      <div className={style.tab_name}>\r\n        <p className=\"text text_type_main-medium\">{title}</p>\r\n      </div>\r\n      <div className={style.two_column}>\r\n        {ingredients.map((item: TIngredient) => (<IngredientCard key={item._id} ingredient={item}/>))}\r\n      </div>\r\n    </div>\r\n  )\r\n});","import React, { SyntheticEvent } from 'react';\r\nimport style from'./burger-ingredients.module.css';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { IngredientsTab } from '../ingredients-tab/ingredients-tab';\r\nimport { useSelector } from '../../services/types/hooks';\r\nimport { TIngredient } from '../../utils/types';\r\n\r\nexport const BurgerIngredients: React.FunctionComponent = () => {\r\n\r\n  // TODO: store typing\r\n  const ingredients: TIngredient[] = useSelector(store => store?.ingredients.ingredients)\r\n\r\n  // current tab\r\n  const [current, setCurrent] = React.useState<string>('bun')\r\n  \r\n  // ref's\r\n  const refBun = React.useRef<HTMLDivElement | null>(null);\r\n  const refMain = React.useRef<HTMLDivElement | null>(null);\r\n  const refSauces = React.useRef<HTMLDivElement | null>(null); \r\n  \r\n  // array's of ingredient filtered by type\r\n  const bunIngredients: TIngredient[] = ingredients.filter((item: TIngredient) => item.type === 'bun');\r\n  const sauceIngredients: TIngredient[] = ingredients.filter((item: TIngredient) => item.type === 'sauce');\r\n  const mainIngredients: TIngredient[] = ingredients.filter((item: TIngredient) => item.type === 'main');\r\n\r\n  const scrollToTab = (value: string): void => {\r\n    setCurrent(value)\r\n    switch (value) {\r\n      case 'bun': {\r\n        refBun?.current?.scrollIntoView({ behavior: 'smooth' })\r\n        break\r\n      }\r\n      case 'main': {\r\n        refMain?.current?.scrollIntoView({ behavior: 'smooth' })\r\n        break\r\n      }\r\n      case 'sauce': {\r\n        refSauces?.current?.scrollIntoView({ behavior: 'smooth' })\r\n        break\r\n      }\r\n      default: {\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO: check event typing\r\n  const focusCurrentTab = (e: SyntheticEvent) => {\r\n    if ((refBun && refBun?.current?.offsetHeight) && (e?.currentTarget?.scrollTop - refBun.current.offsetHeight <  0)) {\r\n      setCurrent('bun')\r\n    } else if (((refSauces?.current?.offsetHeight) && (refBun?.current?.offsetHeight)) && (e?.currentTarget?.scrollTop - refSauces.current.offsetHeight - refBun.current.offsetHeight < 0)) {\r\n      setCurrent('sauce')\r\n    } else {\r\n      setCurrent('main')\r\n    }\r\n  }\r\n\r\n  return (\r\n  <section className={style.container}>\r\n    <div className={style.title_container}>\r\n      <p className={`text text_type_main-large ${style.title_text}`}> </p>\r\n    </div>\r\n    <div className={style.tab}>\r\n      <Tab value=\"bun\" active={current === 'bun'} onClick={scrollToTab}>\r\n        \r\n      </Tab>\r\n      <Tab value=\"sauce\" active={current === 'sauce'} onClick={scrollToTab}>\r\n        \r\n      </Tab>\r\n      <Tab value=\"main\" active={current === 'main'} onClick={scrollToTab}>\r\n        \r\n      </Tab>\r\n    </div>\r\n    <div className={style.scrolled} onScroll={focusCurrentTab}>\r\n      <IngredientsTab title=\"\" ingredients={bunIngredients} ref={refBun}/>\r\n      <IngredientsTab title=\"\" ingredients={sauceIngredients} ref={refSauces}/>\r\n      <IngredientsTab title=\"\" ingredients={mainIngredients} ref={refMain}/>\r\n    </div>\r\n  </section>\r\n  );\r\n};","import React from \"react\";\r\nimport style from './ingredient-details.module.css';\r\nimport { useSelector } from '../../services/types/hooks';\r\nimport { useParams } from 'react-router-dom';\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\nexport const IngredientDetails = () => {\r\n  // TODO: check hook typing\r\n  const params = useParams<{id: string}>()\r\n\r\n  // TODO: store typing\r\n  const ingredients: TIngredient[] = useSelector(store => store.ingredients.ingredients)\r\n\r\n  const currentIngredient: TIngredient | undefined = ingredients?.find((item: TIngredient) => (item._id === params.id))\r\n\r\n  React.useEffect(() => {\r\n  }, [ingredients]);\r\n\r\n  if (ingredients.length === 0) {\r\n    return null\r\n  }\r\n  return (\r\n    <>\r\n      <div className={style.image_container}>\r\n        <img src={currentIngredient?.image_large} alt={currentIngredient?.name}></img>\r\n      </div>\r\n      <div className={style.name_container}>\r\n        <p className=\"text text_type_main-medium\">\r\n          {currentIngredient?.name}\r\n        </p>\r\n      </div>\r\n      <div className={style.property_container}>\r\n        <div className={style.property_item}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            , \r\n          </p>\r\n          <p className={`text text_type_digits-default ${style.property_value}`}>\r\n            {currentIngredient?.calories}\r\n          </p>\r\n        </div>\r\n        <div className={style.property_item}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            , \r\n          </p>\r\n          <p className={`text text_type_digits-default ${style.property_value}`}>\r\n            {currentIngredient?.proteins}\r\n          </p>\r\n        </div>\r\n        <div className={style.property_item}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            , \r\n          </p>\r\n          <p className={`text text_type_digits-default ${style.property_value}`}>\r\n            {currentIngredient?.fat}\r\n          </p>\r\n        </div>\r\n        <div className={style.property_item}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            , \r\n          </p>\r\n          <p className={`text text_type_digits-default ${style.property_value}`}>\r\n            {currentIngredient?.carbohydrates}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}","import React, {FC} from \"react\";\r\nimport style from './order-details.module.css'\r\nimport { ReactComponent as DoneIcon } from '../../images/done.svg'\r\n\r\nexport const OrderDetails: FC<{orderNumber: number}>= ({orderNumber}) => {\r\n  return (\r\n    <>\r\n      <div className={style.order_id_container}>\r\n        <p className={`text text_type_digits-large ${style.order_id}`}>\r\n          {orderNumber}\r\n        </p>\r\n      </div>\r\n      <div className={style.popup_text}>\r\n        <p className=\"text text_type_main-medium\">\r\n           \r\n        </p>\r\n      </div>\r\n      <div className={style.done_icon}>\r\n        <DoneIcon />\r\n      </div>\r\n      <div className={style.popup_text}>\r\n        <p className=\"text text_type_main-default\">\r\n             \r\n        </p>\r\n      </div>\r\n      <div className={`mb-30 ${style.popup_text}`}>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n              \r\n        </p>\r\n      </div>\r\n    </>\r\n    )\r\n}","import React, {FC} from 'react';\r\nimport style from './modal-overlay.module.css';\r\n\r\nexport const ModalOverlay: FC<{onClose: () => void}>= ({onClose}) => {\r\n  return (\r\n    <div className={style.modalOverlay} onClick={onClose}></div>\r\n  )\r\n}","import React, {FC, ReactNode} from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport style from './modal.module.css'\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { ModalOverlay } from '../modal-overlay/modal-overlay'\r\nimport { useParams, useRouteMatch } from 'react-router'\r\nimport { useSelector } from '../../services/types/hooks'\r\n\r\ntype TModalTypes = {\r\n  onClose: () => void;\r\n  title: string | undefined;\r\n};\r\n\r\nexport const Modal: FC<TModalTypes> = ({onClose, title, children}) => {\r\n\r\n  const { id } = useParams<{id: string}>()\r\n\r\n  const allOrders = useSelector(store => store.feed.orders)\r\n  const userOrders = useSelector(store => store.feed.userOrders)\r\n\r\n  const isFeedOrder = useRouteMatch({path: '/order-feed'})\r\n  const feedOrderNumber = isFeedOrder && allOrders.find(item => item._id === id)?.number\r\n\r\n  const isProfileOrders = useRouteMatch({path: '/profile/orders'})\r\n  const profileOrderNumber = isProfileOrders && userOrders.find(item => item._id === id)?.number\r\n  \r\n  const orderNumber = feedOrderNumber || profileOrderNumber\r\n\r\n  React.useEffect(() => {\r\n    const closeModal = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' || e.keyCode === 27) {\r\n        onClose()\r\n      }\r\n    };\r\n  \r\n    document.addEventListener('keydown', closeModal);\r\n    return () => {\r\n      document.removeEventListener('keydown', closeModal);\r\n    };\r\n  }, [onClose])\r\n  \r\n  return ReactDOM.createPortal(\r\n    (\r\n    <>\r\n      <div className={style.popup_container} data-test=\"modal\">\r\n        <div className={style.title_container}>\r\n          {title && <p className='text text_type_main-large'>\r\n            {title}\r\n          </p>}\r\n          {orderNumber && <p className='text text_type_digits-default'>\r\n            #{orderNumber}\r\n          </p>}\r\n          <div className={style.icon_container} data-test=\"close-modal\">\r\n            <CloseIcon type=\"primary\" onClick={onClose}/>\r\n          </div>\r\n        </div>\r\n        {children}\r\n      </div>\r\n      <ModalOverlay onClose={onClose} />\r\n    </>\r\n    ), document.getElementById('modal') as HTMLElement\r\n  )\r\n};","import {\r\n  registrationUserRequest,\r\n  forgotPasswordRequest,\r\n  resetPasswordRequest,\r\n  loginRequest,\r\n  logoutRequest,\r\n  getUserRequest,\r\n  refreshTokenRequest,\r\n  updateUserRequest\r\n} from '../../utils/fetch_api'\r\n\r\nimport { AppDispatch, AppThunk } from '../types';\r\nimport {setCookie, deleteCookie} from '../../utils/cookie_handlers';\r\nimport { TUser } from '../../utils/types';\r\n\r\n//   \r\nexport const REGISTRATION_REQUEST: 'REGISTRATION_REQUEST' = 'REGISTRATION_REQUEST';\r\nexport const REGISTRATION_SUCCESS: 'REGISTRATION_SUCCESS' = 'REGISTRATION_SUCCESS';\r\nexport const REGISTRATION_FAILED: 'REGISTRATION_FAILED' = 'REGISTRATION_FAILED';\r\n\r\n// \r\nexport const LOGIN_REQUEST: 'LOGIN_REQUEST' = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS: 'LOGIN_SUCCESS' = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILED: 'LOGIN_FAILED' = 'LOGIN_FAILED';\r\n\r\n// \r\nexport const LOGOUT_REQUEST: 'LOGOUT_REQUEST' = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS: 'LOGOUT_SUCCESS' = 'LOGOUT_SUCCESS';\r\nexport const LOGOUT_FAILED: 'LOGOUT_FAILED' = 'LOGOUT_FAILED';\r\n\r\n//     \r\nexport const FORGOT_PASSWORD_REQUEST: 'FORGOT_PASSWORD_REQUEST' = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_SUCCESS: 'FORGOT_PASSWORD_SUCCESS' = 'FORGOT_PASSWORD_SUCCESS';\r\nexport const FORGOT_PASSWORD_FAILED: 'FORGOT_PASSWORD_FAILED' = 'FORGOT_PASSWORD_FAILED';\r\n\r\n//    \r\nexport const RESET_PASSWORD_REQUEST: 'RESET_PASSWORD_REQUEST' = 'RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS: 'RESET_PASSWORD_SUCCESS' = 'RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_FAILED: 'RESET_PASSWORD_FAILED' = 'RESET_PASSWORD_FAILED';\r\n\r\n//    \r\nexport const UPDATE_USER_REQUEST: 'UPDATE_USER_REQUEST' = 'UPDATE_USER_REQUEST';\r\nexport const UPDATE_USER_SUCCESS: 'UPDATE_USER_SUCCESS' = 'UPDATE_USER_SUCCESS';\r\nexport const UPDATE_USER_FAILED: 'UPDATE_USER_FAILED' = 'UPDATE_USER_FAILED';\r\n\r\n//    \r\nexport const GET_USER_REQUEST: 'GET_USER_REQUEST' = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED: 'GET_USER_FAILED' = 'GET_USER_FAILED';\r\n\r\n//  \r\nexport const REFRESH_TOKEN_REQUEST: 'REFRESH_TOKEN_REQUEST' = 'REFRESH_TOKEN_REQUEST';\r\nexport const REFRESH_TOKEN_SUCCESS: 'REFRESH_TOKEN_SUCCESS' = 'REFRESH_TOKEN_SUCCESS';\r\nexport const REFRESH_TOKEN_FAILED: 'REFRESH_TOKEN_FAILED' = 'REFRESH_TOKEN_FAILED';\r\n\r\nexport interface IRegistrationRequest {\r\n  readonly type: typeof REGISTRATION_REQUEST;\r\n};\r\n\r\nexport interface IRegistrationSuccess {\r\n  readonly type: typeof REGISTRATION_SUCCESS;\r\n  readonly user: TUser;\r\n};\r\n\r\nexport interface IRegistrationFailed {\r\n  readonly type: typeof REGISTRATION_FAILED;\r\n};\r\n\r\nexport interface ILoginRequest {\r\n  readonly type: typeof LOGIN_REQUEST;\r\n};\r\n\r\nexport interface ILoginSuccess {\r\n  readonly type: typeof LOGIN_SUCCESS;\r\n  readonly user: TUser;\r\n};\r\n\r\nexport interface ILoginFailed {\r\n  readonly type: typeof LOGIN_FAILED;\r\n};\r\n\r\nexport interface IForgotPasswordRequest {\r\n  readonly type: typeof FORGOT_PASSWORD_REQUEST;\r\n};\r\n\r\nexport interface IForgotPasswordSuccess {\r\n  readonly type: typeof FORGOT_PASSWORD_SUCCESS;\r\n};\r\n\r\nexport interface IForgotPasswordFailed {\r\n  readonly type: typeof FORGOT_PASSWORD_FAILED;\r\n};\r\n\r\nexport interface IResetPasswordRequest {\r\n  readonly type: typeof RESET_PASSWORD_REQUEST;\r\n};\r\n\r\nexport interface IResetPasswordSuccess {\r\n  readonly type: typeof RESET_PASSWORD_SUCCESS;\r\n};\r\n\r\nexport interface IResetPasswordFailed {\r\n  readonly type: typeof RESET_PASSWORD_FAILED;\r\n};\r\n\r\nexport interface ILogoutRequest {\r\n  readonly type: typeof LOGOUT_REQUEST;\r\n};\r\n\r\nexport interface ILogoutSuccess {\r\n  readonly type: typeof LOGOUT_SUCCESS;\r\n};\r\n\r\nexport interface ILogoutFailed {\r\n  readonly type: typeof LOGOUT_FAILED;\r\n};\r\n\r\nexport interface IRefreshTokenRequest {\r\n  readonly type: typeof REFRESH_TOKEN_REQUEST;\r\n};\r\n\r\nexport interface IRefreshTokenSuccess {\r\n  readonly type: typeof REFRESH_TOKEN_SUCCESS;\r\n};\r\n\r\nexport interface IRefreshTokenFailed {\r\n  readonly type: typeof REFRESH_TOKEN_FAILED;\r\n};\r\n\r\nexport interface IUpdateUserRequest {\r\n  readonly type: typeof UPDATE_USER_REQUEST;\r\n};\r\n\r\nexport interface IUpdateUserSuccess {\r\n  readonly type: typeof UPDATE_USER_SUCCESS;\r\n  readonly user: TUser;\r\n};\r\n\r\nexport interface IUpdateUserFailed {\r\n  readonly type: typeof UPDATE_USER_FAILED;\r\n};\r\n\r\nexport interface IGetUserRequest {\r\n  readonly type: typeof GET_USER_REQUEST;\r\n};\r\n\r\nexport interface IGetUserSuccess {\r\n  readonly type: typeof GET_USER_SUCCESS;\r\n  readonly user: TUser;\r\n};\r\n\r\nexport interface IGetUserFailed {\r\n  readonly type: typeof GET_USER_FAILED;\r\n};\r\n\r\nexport type TUserActions =\r\n  IRegistrationRequest | IRegistrationSuccess | IRegistrationFailed |\r\n  ILoginRequest | ILoginSuccess | ILoginFailed |\r\n  IForgotPasswordRequest | IForgotPasswordSuccess | IForgotPasswordFailed |\r\n  IResetPasswordRequest | IResetPasswordSuccess | IResetPasswordFailed |\r\n  ILogoutRequest | ILogoutSuccess | ILogoutFailed |\r\n  IRefreshTokenRequest | IRefreshTokenSuccess | IRefreshTokenFailed |\r\n  IUpdateUserRequest | IUpdateUserSuccess | IUpdateUserFailed |\r\n  IGetUserRequest | IGetUserSuccess | IGetUserFailed;\r\n\r\nexport const registrationUser: AppThunk = (email: string, password: string, name: string) => {\r\n  return function(dispatch: AppDispatch) {\r\n    dispatch({type: REGISTRATION_REQUEST})\r\n    \r\n    registrationUserRequest(email, password, name).then(resp => {\r\n      if (resp.success) {\r\n        setCookie('token', resp.accessToken)\r\n        localStorage.setItem('refreshToken', resp.refreshToken)\r\n        dispatch(\r\n          {\r\n            type: REGISTRATION_SUCCESS,\r\n            user: resp.user\r\n          }\r\n        )\r\n      }\r\n    }).catch(error => {\r\n      console.error(error);\r\n      dispatch({\r\n          type: REGISTRATION_FAILED\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport const forgotPassword: AppThunk = (email: string) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch({\r\n      type: FORGOT_PASSWORD_REQUEST\r\n    })\r\n\r\n    forgotPasswordRequest(email).then(resp => {\r\n      if (resp.success) {\r\n        dispatch({\r\n          type: FORGOT_PASSWORD_SUCCESS\r\n        })\r\n      }\r\n    }).catch(error => {\r\n      console.error(error)\r\n      dispatch({\r\n        type: FORGOT_PASSWORD_FAILED\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport const resetPassword: AppThunk = (newPassword: string, code: string) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch({\r\n      type: RESET_PASSWORD_REQUEST\r\n    })\r\n\r\n    resetPasswordRequest(newPassword, code).then(resp => {\r\n      if (resp.success) {\r\n        dispatch({\r\n          type: RESET_PASSWORD_SUCCESS\r\n        })\r\n      }\r\n    }).catch(error => {\r\n      console.error(error)\r\n      dispatch({\r\n        type: RESET_PASSWORD_FAILED\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport const login: AppThunk = (email: string, password: string) => {\r\n  return function(dispatch: AppDispatch) {\r\n\r\n    dispatch({\r\n      type: LOGIN_REQUEST\r\n    })\r\n\r\n    loginRequest(email, password).then(resp => {\r\n      if (resp.success) {\r\n        setCookie('token', resp.accessToken)\r\n        localStorage.setItem('refreshToken', resp.refreshToken)\r\n\r\n        dispatch({\r\n          type: LOGIN_SUCCESS,\r\n          user: resp.user\r\n        })\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error(error)\r\n\r\n      dispatch({\r\n        type: LOGIN_FAILED\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport const logout: AppThunk = () => {\r\n  return function(dispatch: AppDispatch) {\r\n    dispatch({\r\n      type: LOGOUT_REQUEST\r\n    })\r\n\r\n    logoutRequest()\r\n    .then(resp => {\r\n      if (resp.success) {\r\n        localStorage.removeItem('refreshToken')\r\n        deleteCookie('token')\r\n        dispatch({\r\n          type: LOGOUT_SUCCESS\r\n        })\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error(error)\r\n\r\n      dispatch({\r\n        type: LOGOUT_FAILED\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport const updateToken: AppThunk = () => {\r\n  return function(dispatch: AppThunk) {\r\n    dispatch({\r\n      type: REFRESH_TOKEN_REQUEST\r\n    })\r\n    refreshTokenRequest().then((resp) => {\r\n      if (resp.success) {\r\n        setCookie('token', resp.accessToken)\r\n        localStorage.setItem('refreshToken', resp.refreshToken)\r\n        dispatch({\r\n          type: REFRESH_TOKEN_SUCCESS,\r\n        })\r\n      }\r\n    }).catch(error => {\r\n      console.error(error)\r\n      dispatch({\r\n        type: REFRESH_TOKEN_FAILED\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport const getUser: AppThunk = () => {\r\n  return function(dispatch: AppDispatch) {\r\n    dispatch({\r\n      type: GET_USER_REQUEST\r\n    })\r\n\r\n    getUserRequest().then(resp => {\r\n      if (resp.success) {\r\n        dispatch({\r\n          type: GET_USER_SUCCESS,\r\n          user: resp.user\r\n        })\r\n        dispatch({\r\n          type: LOGIN_SUCCESS,\r\n          user: resp.user\r\n        })\r\n      }\r\n    }).catch((error) => {\r\n      if (localStorage.getItem('refreshToken')) {\r\n        updateToken()\r\n      } \r\n      else {\r\n        dispatch({\r\n          type: GET_USER_FAILED\r\n        })\r\n      }\r\n    })\r\n  }\r\n};\r\n\r\nexport const updateUser: AppThunk = (email: string, name: string) => {\r\n  return function(dispatch: AppDispatch): void {\r\n    dispatch({\r\n      type: UPDATE_USER_REQUEST\r\n    });\r\n    updateUserRequest(email, name).then(resp => {\r\n      if (resp.success) {\r\n        dispatch({\r\n          type: UPDATE_USER_SUCCESS,\r\n          user: resp.user\r\n        });\r\n      }\r\n    }).catch(error => {\r\n      console.error(error);\r\n      if (localStorage.getItem('refreshToken')) {\r\n        updateToken();\r\n        updateUser(email, name);\r\n      } else {\r\n        dispatch({\r\n          type: UPDATE_USER_FAILED\r\n        })\r\n      }\r\n    })\r\n  }\r\n};","import React from 'react'\r\nimport { Link, useHistory, useLocation } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport style from '../index.module.css'\r\nimport {PasswordInput, Input, Button} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { login} from '../../services/actions/user'\r\n\r\nexport function LoginPage() {\r\n  const [email, setEmail] = React.useState<string>('')\r\n  const [password, setPassword] = React.useState<string>('')\r\n\r\n  const history = useHistory()\r\n  const from = useLocation<{from: {pathname: string}}>().state?.from?.pathname\r\n\r\n  // TODO: hooks typing\r\n  const dispatch = useDispatch()\r\n  const isLogged = useSelector(store => store.user.isLogged)\r\n  const loginFailed = useSelector(store => store.user.loginFailed)\r\n\r\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(e.target.value)\r\n  }\r\n  const onChangeEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(e.target.value)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n\r\n    if (isLogged) {\r\n      history.push({pathname: from ? from : '/'})\r\n    }\r\n  }, [history, isLogged, from])\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n\r\n    dispatch(login(email, password))\r\n  }\r\n\r\n  return (\r\n    <main className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <div className={style.title}>\r\n          <p className='text text_type_main-medium'></p>\r\n        </div>\r\n        <form className={style.form_container} onSubmit={handleSubmit}>\r\n          <div className={style.inputs_container}>\r\n            <Input\r\n              type={'email'}\r\n              placeholder={'E-mail'}\r\n              onChange={onChangeEmail}\r\n              value={email}\r\n              error={loginFailed}\r\n              errorText={''}\r\n            />\r\n            <PasswordInput value={password} onChange={onChangePassword} name=''/>\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            \r\n          </Button>\r\n        </form>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n           -  ? {' '}\r\n          <Link to=\"/register\" className={style.link}>\r\n            \r\n          </Link>\r\n        </p>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n           ?  {' '}\r\n          <Link to=\"/forgot-password\" className={style.link}>\r\n             \r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </main>\r\n  )\r\n}","import React from 'react'\r\nimport { useDispatch } from '../../services/types/hooks';\r\nimport { Link } from 'react-router-dom'\r\nimport style from '../index.module.css'\r\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { registrationUser } from '../../services/actions/user'\r\n\r\nexport function RegisterPage() {\r\n  const [name, setName] = React.useState<string>('')\r\n  const [email, setEmail] = React.useState<string>('')\r\n  const [password, setPassword] = React.useState<string>('')\r\n\r\n  const dispatch = useDispatch()\r\n  \r\n  const onChangeName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(e.target.value)\r\n  }\r\n  const onChangeEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(e.target.value)\r\n  }\r\n\r\n  const handleSubmit= (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n\r\n    dispatch(registrationUser(\r\n      email, \r\n      password, \r\n      name)\r\n    )\r\n  }\r\n\r\n  return (\r\n    <main className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <div className={style.title}>\r\n          <p className='text text_type_main-medium'></p>\r\n        </div>\r\n        <form className={style.form_container} onSubmit={handleSubmit}>\r\n          <div className={style.inputs_container}>\r\n            <Input\r\n              placeholder={''}\r\n              onChange={onChangeName}\r\n              value={name}\r\n            />\r\n            <Input\r\n              type={'email'}\r\n              placeholder={'E-mail'}\r\n              onChange={onChangeEmail}\r\n              value={email}\r\n              error={false}\r\n              errorText={''}\r\n            />\r\n            <PasswordInput value={password} onChange={onChangePassword} name=''/>\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            \r\n          </Button>\r\n        </form>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n           ? {' '}\r\n          <Link to=\"/login\" className={style.link}>\r\n            \r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </main>\r\n  )\r\n}","import React, { ChangeEvent } from 'react'\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport style from '../index.module.css'\r\nimport {  Input, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { forgotPassword } from '../../services/actions/user';\r\n\r\nexport function ForgotPasswordPage() {\r\n  const [email, setEmail] = React.useState<string>('')\r\n  const history = useHistory<{ from: string }>()\r\n\r\n  // TODO: hook's typing\r\n  const dispatch = useDispatch()\r\n  const isLogged = useSelector(store => store.user.isLogged)\r\n\r\n  const onChangeEmail = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n    dispatch(forgotPassword(email))\r\n    history.push({pathname: '/reset-password', state: {from: history.location.pathname}})\r\n  }\r\n\r\n  if (isLogged) {\r\n    history.push({pathname: '/'})\r\n  }\r\n\r\n  return (\r\n    <main className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <div className={style.title}>\r\n          <p className='text text_type_main-medium'> ?</p>\r\n        </div>\r\n        <form className={style.form_container} onSubmit={handleSubmit}>\r\n          <div className={style.inputs_container}>\r\n            <Input\r\n              type={'email'}\r\n              placeholder={' e-mail'}\r\n              onChange={onChangeEmail}\r\n              value={email}\r\n              error={false}\r\n              errorText={''}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            \r\n          </Button>\r\n        </form>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n           ? {' '}\r\n          <Link to=\"/login\" className={style.link}>\r\n            \r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </main>\r\n  )\r\n}","import React from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport style from '../index.module.css'\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { resetPassword } from '../../services/actions/user'\r\n\r\nexport function ResetPasswordPage() {\r\n  const [newPassword, setPassword] = React.useState<string>('')\r\n  const [code, setCode] = React.useState<string>('')\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const history = useHistory<{from: string}>()\r\n  const prevPage: string = history.location.state?.from\r\n\r\n  const isLogged = useSelector(store => store.user.isLogged)\r\n\r\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(e.target.value)\r\n  }\r\n\r\n  const onChangeCode = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCode(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n\r\n    dispatch(resetPassword(newPassword, code))\r\n    history.push({pathname: '/login'})\r\n  }\r\n\r\n  if (!prevPage) {\r\n    history.push({pathname: '/login'})\r\n  }\r\n\r\n  if (isLogged) {\r\n    history.push({pathname: '/'})\r\n  }\r\n\r\n  return (\r\n    <main className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <div className={style.title}>\r\n          <p className='text text_type_main-medium'> </p>\r\n        </div>\r\n        <form className={style.form_container} onSubmit={handleSubmit}>\r\n          <div className={style.inputs_container}>\r\n            <Input       \r\n              type='password'        \r\n              placeholder={'  '}\r\n              value={newPassword}\r\n              onChange={onChangePassword}\r\n            />\r\n            <Input       \r\n              placeholder={'   '}\r\n              value={code}\r\n              onChange={onChangeCode}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\"> \r\n            \r\n          </Button>\r\n        </form>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n           ?  {' '}\r\n          <Link to=\"/login\" className={style.link}>\r\n            \r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </main>\r\n  )\r\n}","import React from 'react' \r\nimport { ExtractRouteParams } from 'react-router'\r\nimport style from './nav-profile.module.css'\r\nimport { NavLink, useRouteMatch } from 'react-router-dom'\r\nimport { logout } from '../../services/actions/user'\r\nimport { useDispatch } from '../../services/types/hooks';\r\n\r\ntype TMatchProfilePage = ExtractRouteParams<'/profile'>;\r\n\r\nexport function NavProfile() {\r\n\r\n  // TODO: hook's typing\r\n  const { url } = useRouteMatch()\r\n  const isProfilePage = useRouteMatch<TMatchProfilePage>(\"/profile\")\r\n  const dispatch = useDispatch()\r\n\r\n  const logoutHandler = () => {\r\n    dispatch(logout())\r\n  }\r\n  \r\n  return (\r\n    <nav className={style.nav_container}>\r\n      <ul>\r\n        <li>\r\n          <NavLink \r\n            exact\r\n            to={url}\r\n            className={style.nav_link}\r\n            activeClassName={style.active_nav_link}\r\n          > \r\n            \r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink \r\n            to={`${url}/orders`} \r\n            className={style.nav_link}\r\n            activeClassName={style.active_nav_link}\r\n          >\r\n             \r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <button className={style.button} onClick={logoutHandler}>\r\n            \r\n          </button>\r\n        </li>\r\n      </ul>\r\n      <p className=\"text text_type_main-default text_color_inactive pt-20\">\r\n        {isProfilePage?.isExact \r\n          ? '        '\r\n          : '        '\r\n        }\r\n      </p>\r\n    </nav>\r\n  )\r\n}","import React, { ChangeEvent } from \"react\";\r\nimport style from './profile-info.module.css';\r\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { updateUser } from \"../../services/actions/user\";\r\n\r\nexport function ProfileInfo() {\r\n  const dispatch = useDispatch()\r\n  const { user } = useSelector(store => store.user)\r\n\r\n  const [name, setName] = React.useState<string>('')\r\n  const [email, setEmail] = React.useState<string>('') \r\n  const [password, setPassword] = React.useState<string>('')\r\n  const [isChange, setIsChange] = React.useState<boolean>(false)\r\n\r\n  \r\n  const onChangeName = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setIsChange(true)\r\n    setName(e.target.value)\r\n  }\r\n\r\n  const onChangePassword = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setIsChange(true)\r\n    setPassword(e.target.value)\r\n  }\r\n  const onChangeEmail = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setIsChange(true)\r\n    setEmail(e.target.value)\r\n  }\r\n\r\n  const resetUserInfo = () => {\r\n    user && setName(user.name)\r\n    user &&  setEmail(user.email)\r\n    user &&  setIsChange(false)\r\n  }\r\n\r\n  const updateUserInfo = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n    dispatch(updateUser(email, name))\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    user && setName(user.name)\r\n    user && setEmail(user.email)\r\n  }, [user]);\r\n\r\n  return (\r\n  <>\r\n    <form className={style.form_container} onSubmit={updateUserInfo}>\r\n      <div className={style.inputs_container}>\r\n        <Input\r\n          type={'text'}\r\n          placeholder={''}\r\n          onChange={onChangeName}\r\n          value={name}\r\n          error={false}\r\n          errorText={''}\r\n          icon={'EditIcon'}\r\n        />\r\n        <Input\r\n          type={'email'}\r\n          placeholder={'E-mail'}\r\n          onChange={onChangeEmail}\r\n          value={email}\r\n          error={false}\r\n          errorText={''}\r\n          icon={'EditIcon'}\r\n        />\r\n        <PasswordInput value={password} onChange={onChangePassword} name=''/>\r\n      </div>\r\n      <Button type=\"primary\" size=\"medium\" disabled={!isChange}>\r\n        \r\n      </Button>\r\n    </form>\r\n    <Button type=\"secondary\" size=\"medium\" disabled={!isChange} onClick={resetUserInfo}>\r\n      \r\n    </Button>        \r\n  </>\r\n  )\r\n}","import React from \"react\";\r\nimport style from './ingredient-icon.module.css'\r\n\r\nexport const IngredientIcon: React.FC<{imageURL: string, last?: boolean, count?: number}> = ({imageURL, last, count}) => {\r\n  \r\n  const iconStyle: React.CSSProperties = {\r\n    boxSizing: 'border-box',\r\n    width: \"100%\",  \r\n    height: \"56px\",\r\n    backgroundImage: `url(${imageURL})`,\r\n    backgroundPosition: 'center',\r\n    backgroundSize: \"cover\",\r\n    backgroundRepeat: 'no-repeat'\r\n  }\r\n  \r\n  return (\r\n  <div className={style.container}>\r\n    <div className={style.counter}>{count && `+${count}`}</div>\r\n    <div style={iconStyle} className={`${last && style.last}`}></div>     \r\n  </div>\r\n  )\r\n} ","const weekDays = [\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  ''\r\n]\r\n\r\nconst days = [\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  ''\r\n]\r\n\r\nexport const formatData = (date: string): string => {\r\n  const currentDate =  new Date();\r\n  const orderDate = new Date(date);\r\n\r\n  const daysFromOrder: number = Math.floor((currentDate.getTime() - orderDate.getTime())/1000/3600/24);\r\n  const time =  `${orderDate.getHours()}:${orderDate.getMinutes()}`;\r\n  const remains: number = daysFromOrder % 10;\r\n\r\n  if (daysFromOrder < 1) {\r\n    return (`  ${time}`)\r\n  }\r\n  else if (daysFromOrder < 2) {\r\n    return (`  ${time}`)\r\n  }\r\n  else if (daysFromOrder < 7) {\r\n    return (` ${weekDays[orderDate.getDay() - 1]}  ${time}`)\r\n  }\r\n  else if (daysFromOrder <= 20) {\r\n    return (`${daysFromOrder}    ${time}`)\r\n  }\r\n  else {\r\n    return (`${daysFromOrder} ${days[remains]}   ${time}`)\r\n  }\r\n}","import React, {FC} from \"react\";\r\nimport { useSelector } from \"../../services/types/hooks\";\r\nimport style from './order-feed-item.module.css';\r\nimport { TOrder } from \"../../utils/types\";\r\nimport { IngredientIcon } from \"../ingredient-icon/ingredient-icon\";\r\nimport { formatData } from '../../utils/format-data';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { Location } from 'history'\r\n\r\ntype TOrderFeedItem = {\r\n  order: TOrder;\r\n  id: string;\r\n  isUserOrder: boolean;\r\n};\r\n\r\nconst ordersStatus = {\r\n  created: '',\r\n  pending: '',\r\n  done: ''\r\n}\r\n\r\nexport const OrderFeedItem: FC<TOrderFeedItem> = ({order, id, isUserOrder}) => {\r\n  const location = useLocation<Location>();\r\n  const { ingredients } = useSelector(store => store.ingredients)\r\n  \r\n  const orderIngredients = ingredients && order?.ingredients.map((item) => ingredients?.filter(allIngredientItem => allIngredientItem._id === item)[0])\r\n\r\n\r\n  const totalPrice = React.useMemo(\r\n    () =>\r\n      orderIngredients ? \r\n      orderIngredients.reduce((sum, current) => sum + current.price, 0)\r\n      : 0,\r\n    [orderIngredients]\r\n  );\r\n\r\n  const showIngredients = orderIngredients?.slice(0, 4);\r\n  const lastIngredient = orderIngredients?.slice(4,5)[0];\r\n  const hiddenIngredientCount = orderIngredients.length > 5 ? orderIngredients.length - 5 : null;\r\n  return (\r\n    <Link\r\n      to={{ pathname: `${location.pathname}/${id}`, state: { background: location } }}\r\n      className={style.item_container}\r\n    >\r\n      <div className={style.info_container}>\r\n        <div>\r\n          <p className=\"text text_type_digits-default\">\r\n            #{order.number}\r\n          </p>\r\n        </div>\r\n        <div className={style.date_container}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {formatData(order.createdAt)}\r\n          </p>\r\n        </div>  \r\n      </div>\r\n      <div className={`${style.title_container} text text_type_main-medium`}>\r\n        {order.name}\r\n        {isUserOrder && <p className={`${style.order_status} ${(order.status === 'done') && style.done}`}>{ordersStatus[order.status]}</p>}\r\n      </div>\r\n      <div className={style.ingredients_container}>\r\n        <ul className={style.icons_container}>\r\n          {hiddenIngredientCount && <IngredientIcon last count={hiddenIngredientCount} imageURL={lastIngredient.image_mobile}/>}\r\n          {showIngredients.map((item, index) => \r\n            <IngredientIcon key={index} imageURL={item.image_mobile}/>\r\n          )}\r\n        </ul>\r\n        <div className={style.total_price}>\r\n          <p className=\"text text_type_digits-default\">{totalPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  )\r\n};","import { TOrders } from '../../utils/types';\r\n\r\nexport const WS_CONNECTION_START_ORDERS: 'WS_CONNECTION_START_ORDERS' = 'WS_CONNECTION_START_ORDERS';\r\nexport const WS_CONNECTION_SUCCESS_ORDERS: 'WS_CONNECTION_SUCCESS_ORDERS' = 'WS_CONNECTION_SUCCESS_ORDERS';\r\nexport const WS_CONNECTION_ERROR_ORDERS: 'WS_CONNECTION_ERROR_ORDERS' = 'WS_CONNECTION_ERROR_ORDERS';\r\nexport const WS_CONNECTION_CLOSED_ORDERS: 'WS_CONNECTION_CLOSED_ORDERS' = 'WS_CONNECTION_CLOSED_ORDERS';\r\nexport const WS_GET_ORDERS: 'WS_GET_ORDERS' = 'WS_GET_ORDERS';\r\n\r\nexport const WS_CONNECTION_START_ORDERS_USER: 'WS_CONNECTION_START_ORDERS_USER' = 'WS_CONNECTION_START_ORDERS_USER';\r\nexport const WS_CONNECTION_SUCCESS_ORDERS_USER: 'WS_CONNECTION_SUCCESS_ORDERS_USER' = 'WS_CONNECTION_SUCCESS_ORDERS_USER';\r\nexport const WS_CONNECTION_ERROR_ORDERS_USER: 'WS_CONNECTION_ERROR_ORDERS_USER' = 'WS_CONNECTION_ERROR_ORDERS_USER';\r\nexport const WS_CONNECTION_CLOSED_ORDERS_USER: 'WS_CONNECTION_CLOSED_ORDERS_USER' = 'WS_CONNECTION_CLOSED_ORDERS_USER';\r\nexport const WS_GET_ORDERS_USER: 'WS_GET_ORDERS_USER' = 'WS_GET_ORDERS_USER';\r\n\r\nexport interface IWsConnectionStartOrdersAction {\r\n  readonly type: typeof WS_CONNECTION_START_ORDERS;\r\n};\r\n\r\nexport interface IWsConnectionSuccessOrdersAction {\r\n  readonly type: typeof WS_CONNECTION_SUCCESS_ORDERS;\r\n};\r\n\r\nexport interface IWsConnectionErrorOrdersAction {\r\n  readonly type: typeof WS_CONNECTION_ERROR_ORDERS;\r\n};\r\n\r\nexport interface IWsConnectionClosedOrdersAction {\r\n  readonly type: typeof WS_CONNECTION_CLOSED_ORDERS;\r\n};\r\n\r\nexport interface IWsGetOrdersAction {\r\n  readonly type: typeof WS_GET_ORDERS;\r\n  readonly orders: TOrders;\r\n};\r\n\r\nexport interface IWsConnectionStartOrdersUserAction {\r\n  readonly type: typeof WS_CONNECTION_START_ORDERS_USER;\r\n};\r\n\r\nexport interface IWsConnectionSuccessOrdersUserAction {\r\n  readonly type: typeof WS_CONNECTION_SUCCESS_ORDERS_USER;\r\n};\r\n\r\nexport interface IWsConnectionErrorOrdersUserAction {\r\n  readonly type: typeof WS_CONNECTION_ERROR_ORDERS_USER;\r\n};\r\n\r\nexport interface IWsConnectionClosedOrdersUserAction {\r\n  readonly type: typeof WS_CONNECTION_CLOSED_ORDERS_USER;\r\n};\r\n\r\nexport interface IWsGetOrdersUserAction {\r\n  readonly type: typeof WS_GET_ORDERS_USER;\r\n  readonly orders: TOrders;\r\n};\r\n\r\nexport type TFeedOrdersActions = \r\n  | IWsConnectionStartOrdersAction\r\n  | IWsConnectionSuccessOrdersAction\r\n  | IWsConnectionErrorOrdersAction\r\n  | IWsConnectionClosedOrdersAction\r\n  | IWsGetOrdersAction\r\n  | IWsConnectionStartOrdersUserAction\r\n  | IWsConnectionSuccessOrdersUserAction\r\n  | IWsConnectionErrorOrdersUserAction\r\n  | IWsConnectionClosedOrdersUserAction\r\n  | IWsGetOrdersUserAction;\r\n\r\n\r\nexport const wsConnectionStartOrdersAction = (): IWsConnectionStartOrdersAction => ({\r\n  type: WS_CONNECTION_START_ORDERS\r\n});\r\n\r\nexport const wsConnectionSuccessOrdersAction = (): IWsConnectionSuccessOrdersAction => ({\r\n  type: WS_CONNECTION_SUCCESS_ORDERS\r\n});\r\n\r\nexport const wsConnectionErrorOrdersAction = (): IWsConnectionErrorOrdersAction => ({\r\n  type: WS_CONNECTION_ERROR_ORDERS\r\n});\r\n\r\nexport const wsConnectionClosedOrdersAction = (): IWsConnectionClosedOrdersAction => ({\r\n  type: WS_CONNECTION_CLOSED_ORDERS\r\n});\r\n\r\nexport const wsGetOrdersAction = (orders: TOrders): IWsGetOrdersAction => ({\r\n  type: WS_GET_ORDERS,\r\n  orders\r\n});\r\n\r\nexport const wsConnectionStartOrdersUserAction = (): IWsConnectionStartOrdersUserAction => ({\r\n  type: WS_CONNECTION_START_ORDERS_USER\r\n});\r\n\r\nexport const wsConnectionSuccessOrdersUserAction = (): IWsConnectionSuccessOrdersUserAction => ({\r\n  type: WS_CONNECTION_SUCCESS_ORDERS_USER\r\n});\r\n\r\nexport const wsConnectionErrorOrdersUserAction = (): IWsConnectionErrorOrdersUserAction => ({\r\n  type: WS_CONNECTION_ERROR_ORDERS_USER\r\n});\r\n\r\nexport const wsConnectionClosedOrdersUserAction = (): IWsConnectionClosedOrdersUserAction => ({\r\n  type: WS_CONNECTION_CLOSED_ORDERS_USER\r\n});\r\n\r\nexport const wsGetOrdersUserAction = (orders: TOrders): IWsGetOrdersUserAction => ({\r\n  type: WS_GET_ORDERS_USER,\r\n  orders\r\n});\r\n\r\nexport type TWsOrdersActions = {\r\n  wsInit: typeof WS_CONNECTION_START_ORDERS;\r\n  onOpen: typeof WS_CONNECTION_SUCCESS_ORDERS;\r\n  onClose: typeof WS_CONNECTION_CLOSED_ORDERS;\r\n  onError: typeof WS_CONNECTION_ERROR_ORDERS;\r\n  onOrders: typeof WS_GET_ORDERS;\r\n};\r\n  \r\nexport type TWsOrdersUserActions = {\r\n  wsInit: typeof WS_CONNECTION_START_ORDERS_USER;\r\n  onOpen: typeof WS_CONNECTION_SUCCESS_ORDERS_USER;\r\n  onClose: typeof WS_CONNECTION_CLOSED_ORDERS_USER;\r\n  onError: typeof WS_CONNECTION_ERROR_ORDERS_USER;\r\n  onOrders: typeof WS_GET_ORDERS_USER;\r\n};\r\n\r\nexport const wsOrdersActions: TWsOrdersActions = {\r\n  wsInit: WS_CONNECTION_START_ORDERS,\r\n  onOpen: WS_CONNECTION_SUCCESS_ORDERS,\r\n  onClose: WS_CONNECTION_CLOSED_ORDERS,\r\n  onError: WS_CONNECTION_ERROR_ORDERS,\r\n  onOrders: WS_GET_ORDERS,\r\n};\r\n  \r\nexport const wsOrdersUserActions: TWsOrdersUserActions = {\r\n  wsInit: WS_CONNECTION_START_ORDERS_USER,\r\n  onOpen: WS_CONNECTION_SUCCESS_ORDERS_USER,\r\n  onClose: WS_CONNECTION_CLOSED_ORDERS_USER,\r\n  onError: WS_CONNECTION_ERROR_ORDERS_USER,\r\n  onOrders: WS_GET_ORDERS_USER,\r\n};","import React from 'react'\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport style from './profile-orders.module.css';\r\nimport { OrderFeedItem } from '../order-feed-item/order-feed-item';\r\nimport { wsConnectionStartOrdersUserAction, wsConnectionClosedOrdersUserAction} from '../../services/actions/feed';\r\n\r\n\r\nexport function ProfileOrders() {\r\n  const dispatch = useDispatch()\r\n  const { userOrders } = useSelector((store) => store.feed)\r\n  \r\n  console.log(userOrders)\r\n  React.useEffect(\r\n    () => {\r\n      dispatch(wsConnectionStartOrdersUserAction());\r\n        return () => {\r\n        dispatch(wsConnectionClosedOrdersUserAction());\r\n      };\r\n    }, []\r\n  );\r\n\r\n  return (\r\n  <section>\r\n    <ul className={style.scrolled}>\r\n      {userOrders.map((item, index) => <OrderFeedItem isUserOrder id={item._id} key={index} order={item}/>)}\r\n    </ul>\r\n  </section>\r\n  )\r\n}","import React, {FC} from 'react'\r\nimport style from './profile-page.module.css'\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport { NavProfile } from '../../components/nav-profile/nav-profile'\r\nimport { ProfileInfo } from '../../components/profile-info/profile-info';\r\nimport { ProfileOrders } from '../../components/profile-orders/profile-orders'\r\n\r\nexport const ProfilePage: FC = () => {\r\n\r\n  const {path} = useRouteMatch()\r\n\r\n  return (\r\n    <main className={style.profile_wrapper}>\r\n      <div className={style.profile_container}>\r\n        <NavProfile />\r\n        <Switch>\r\n          <Route exact path={`${path}`}>\r\n            <ProfileInfo/>\r\n          </Route>\r\n          <Route path={`${path}/orders`}>\r\n            <ProfileOrders/>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </main>\r\n  )\r\n}","import React, { FC } from \"react\"\r\nimport style from '../index.module.css'\r\n\r\nexport const NotFoundPage: FC= () => {\r\n  return (\r\n    <main className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <div className={style.title}>\r\n          <p className='text text_type_main-medium'>...   </p>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  )\r\n}","import React from 'react'\r\nimport style from './ingredient-page.module.css'\r\nimport { useSelector } from '../../services/types/hooks';\r\nimport { useParams } from 'react-router-dom'\r\nimport { IngredientDetails } from '../../components/ingredient-details/ingredient-details'\r\nimport { TIngredient } from '../../utils/types'\r\n\r\nexport const IngredientPage = () => {\r\n  const params = useParams<{id: string}>()\r\n  const ingredients = useSelector(store => store.ingredients.ingredients)\r\n\r\n  const currentIngredient = ingredients.find((item: TIngredient) => params.id === item._id)\r\n  return (\r\n    <main className={style.wrapper}>\r\n      <h2 className='text text_type_main-large'> </h2>\r\n      {currentIngredient && <IngredientDetails />}\r\n    </main>\r\n  )\r\n}","import React from \"react\";\r\nimport { useSelector } from \"../../services/types/hooks\";\r\nimport style from './order-board.module.css';\r\n\r\nexport const OrderBoard = () => {\r\n  \r\n  const { total, totalToday, orders } = useSelector((store) => store.feed)\r\n\r\n  const doneOrders = orders.filter((item) => item.status === \"done\").slice(0, 10)\r\n  const executeOrders = orders.filter((item) => item.status === \"pending\").slice(0, 10)\r\n \r\n  return (\r\n    <div className={style.wrapper}>\r\n      <div className={style.status_container}>\r\n        <div className={style.title_container}>\r\n          <p className=\"text text_type_main-medium\">:</p>\r\n          <ul className={style.two_column}>\r\n            {doneOrders?.map((item, index) => <li key={index} className={style.ready}>{item.number}</li>)}\r\n          </ul>\r\n        </div>\r\n        <div className={style.title_container}>\r\n          <p className=\"text text_type_main-medium\"> :</p>\r\n          <ul className={style.two_column}>\r\n            {executeOrders?.map((item, index) => <li key={index} className={style.execute}>{item.number}</li>)}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <p className=\"text text_type_main-medium\">   :</p>\r\n        <p className={style.total}>{total}</p>\r\n      </div>\r\n      <div>\r\n        <p className=\"text text_type_main-medium\">  :</p>\r\n        <p className={style.total}>{totalToday}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport style from'./order-feed-page.module.css';\r\nimport { OrderFeedItem } from '../../components/order-feed-item/order-feed-item'\r\nimport { OrderBoard } from '../../components/order-board/order-board';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks';\r\nimport {\r\n    wsConnectionClosedOrdersAction,\r\n    wsConnectionStartOrdersAction,\r\n  } from '../../services/actions/feed';\r\n\r\nexport const OrderFeedPage: React.FC = () =>  {\r\n  const dispatch = useDispatch();\r\n  const { orders } = useSelector((store) => store.feed);\r\n\r\n  React.useEffect(\r\n      () => {\r\n          dispatch(wsConnectionStartOrdersAction());\r\n              return () => {\r\n              dispatch(wsConnectionClosedOrdersAction());\r\n          };\r\n      }, [dispatch],\r\n  );\r\n  \r\n  return (\r\n  <main className={style.wrapper}>\r\n    <div className={style.container}>\r\n    <div className={style.title_container}>\r\n      <p className={`text text_type_main-large ${style.title_text}`}> </p>\r\n    </div>\r\n    <div className={style.two_column}>\r\n      <ul className={style.scrolled}>\r\n        {orders.map((item, index) => <OrderFeedItem isUserOrder={false} id={item._id} key={index} order={item}/>)}\r\n      </ul>\r\n      <section className={style.board}>\r\n        <OrderBoard />\r\n      </section>\r\n    </div>\r\n    </div>\r\n  </main>\r\n  );\r\n};","import React from \"react\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useRouteMatch, useParams} from \"react-router\";\r\nimport { useSelector } from \"../../services/types/hooks\";\r\nimport { formatData } from \"../../utils/format-data\";\r\nimport { IngredientIcon } from \"../ingredient-icon/ingredient-icon\";\r\nimport style from './order.module.css';\r\n\r\nconst ordersStatus = {\r\n  created: '',\r\n  pending: '',\r\n  done: ''\r\n}\r\n\r\nexport const Order: React.FC = () => {\r\n  const { id } = useParams<{id: string}>();\r\n  const allIngredients = useSelector(store => store.ingredients.ingredients)\r\n  const { orders, userOrders } = useSelector((store) => store.feed)\r\n \r\n  const isUserOrder = useRouteMatch('/profile/orders')\r\n  \r\n  const order = orders && orders.find((item) => item._id === id)\r\n  const userOrder = isUserOrder && userOrders.find((item) => item._id === id)\r\n  const currentOrder = isUserOrder ? userOrder : order\r\n\r\n  const orderIngredientsAll = allIngredients && currentOrder && currentOrder?.ingredients.map((item) => allIngredients?.filter(allIngredientItem => allIngredientItem._id === item)[0])\r\n  const orderIngredients = allIngredients && allIngredients.filter((item) => currentOrder?.ingredients.includes(item._id))\r\n\r\n  const totalPrice = React.useMemo(\r\n    () =>\r\n    allIngredients && orderIngredientsAll ? \r\n    orderIngredientsAll.reduce((sum, current) => sum + current?.price, 0)\r\n      : 0,\r\n    [orderIngredientsAll, allIngredients]\r\n  );\r\n\r\n  return (\r\n    <div className={style.wrapper}>\r\n      <div className='text text_type_main-medium mb-15'>\r\n        {currentOrder && currentOrder.name}\r\n        {isUserOrder && <p className={`${style.order_status} ${(currentOrder?.status === 'done') && style.done}`}>{currentOrder && ordersStatus[currentOrder.status]}</p>}\r\n      </div>\r\n      <div className='text text_type_main-medium mb-3'>\r\n        :\r\n      </div>\r\n      {orderIngredients && orderIngredients.length > 0 && <ul className={style.scrolled}>\r\n        {orderIngredients.map((item, index) => \r\n        <li key={index} className={style.ingredient}>\r\n          <div className={style.icon}>\r\n            <IngredientIcon imageURL={item.image_mobile} />\r\n            <p className='text text_type_main-default ml-9'>{item.name}</p>\r\n          </div>\r\n          <div className={`${style.price} text text_type_digits-default`}>\r\n            <div className=\"mr-2\">\r\n              {orderIngredientsAll && orderIngredientsAll.reduce((total_count, orderIngredient) => item._id === orderIngredient._id ? total_count +=1 : total_count, 0)}\r\n              {' x '}\r\n              {item.price}\r\n            </div>\r\n            <CurrencyIcon type='primary'/>\r\n          </div>\r\n        </li>)}\r\n      </ul>}\r\n      <div className={style.total_price_container}>\r\n        <div className=\"text text_type_main-default text_color_inactive\">\r\n          {order && formatData(order.createdAt)}\r\n        </div>\r\n        <div className={style.total_price}>\r\n          {`${totalPrice} `}<CurrencyIcon  type='primary'/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport style from './order-page.module.css';\r\nimport { useRouteMatch, useParams } from 'react-router-dom';\r\nimport { Order } from '../../components/order/order';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks';\r\nimport {\r\n  wsConnectionClosedOrdersAction,\r\n  wsConnectionClosedOrdersUserAction,\r\n  wsConnectionStartOrdersAction,\r\n  wsConnectionStartOrdersUserAction\r\n  } from '../../services/actions/feed';\r\n\r\nexport const OrderPage: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  \r\n  const isUserOrders = useRouteMatch({ path: \"/profile/orders/\" });\r\n\r\n  const [orderNumber, setOrderNumber] = React.useState<number | null | undefined>(undefined)\r\n\r\n  const { id } = useParams<{id: string}>()\r\n\r\n  const allOrders = useSelector(store => store.feed.orders)\r\n  const userOrders = useSelector(store => store.feed.userOrders)\r\n\r\n  const isFeedOrder = useRouteMatch({path: '/order-feed'})\r\n  const feedOrderNumber = isFeedOrder && allOrders && allOrders.find(item => item._id === id)?.number\r\n\r\n  const isProfileOrders = useRouteMatch({path: '/profile/orders'})\r\n  const profileOrderNumber = isProfileOrders && userOrders && userOrders.find(item => item._id === id)?.number\r\n  \r\n  console.log(id, isProfileOrders, userOrders, profileOrderNumber )\r\n\r\n  React.useEffect(\r\n    () => {\r\n      dispatch(isUserOrders ? wsConnectionStartOrdersUserAction() : wsConnectionStartOrdersAction());\r\n      feedOrderNumber ? setOrderNumber(feedOrderNumber) : setOrderNumber(profileOrderNumber);\r\n        return () => {\r\n        dispatch(isUserOrders ? wsConnectionClosedOrdersUserAction() : wsConnectionClosedOrdersAction());\r\n      };\r\n    }, [profileOrderNumber, feedOrderNumber]\r\n  );\r\n    \r\n  return (\r\n    <main className={style.wrapper}>\r\n      <p className={style.title}># {orderNumber}</p>\r\n      <Order />\r\n    </main>\r\n  )\r\n}","import { FC } from 'react'\r\nimport { Route, Redirect, RouteProps  } from 'react-router-dom'\r\nimport { useSelector } from '../../services/types/hooks';\r\n\r\n\r\n// TODO:: props typing ??? \r\nexport const ProtectedRoute: FC<RouteProps> = ({ children, ...props}) => {\r\n  const isLogged = useSelector(store => store.user.isLogged)\r\n\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={({location}) => (\r\n        isLogged\r\n        ? (children)\r\n        : (<Redirect to={{ pathname: '/login', state: {from: location} }} />)\r\n      )}\r\n    />\r\n  )\r\n}","import * as React from 'react';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { Location } from \"history\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\r\nimport style from'./app.module.css';\r\nimport AppHeader from '../app-header/app-header';\r\nimport { BurgerConstructor } from '../burger-constructor/burger-constructor';\r\nimport { BurgerIngredients } from '../burger-ingredients/burger-ingredients';\r\nimport { IngredientDetails } from '../ingredient-details/ingredient-details';\r\nimport { OrderDetails } from '../order-details/order-details';\r\nimport { Modal } from '../modal/modal';\r\nimport { getIngredients, closeModalIngredient} from '../../services/actions/ingredients';\r\nimport { closeModalOrder } from '../../services/actions/order';\r\nimport { LoginPage, RegisterPage, ForgotPasswordPage, ResetPasswordPage, OrderPage, ProfilePage, NotFoundPage, IngredientPage, OrderFeedPage } from '../../pages';\r\nimport { ProtectedRoute } from '../protected-route/protected-route';\r\nimport { getUser } from '../../services/actions/user';\r\nimport { getCookie } from '../../utils/cookie_handlers';\r\nimport { Order } from '../order/order';\r\n\r\nconst App = () => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const location = useLocation<{ background: Location | undefined }>()\r\n  const history = useHistory<History>()\r\n\r\n  // background  is background page under modal window\r\n  const background = location?.state?.background\r\n\r\n  const { ingredients } = useSelector(store => store.ingredients)\r\n  const { orderNumber } = useSelector(store => store.order)\r\n\r\n  const closeIngredient = () => {\r\n    dispatch(closeModalIngredient())\r\n    history.goBack()\r\n  }\r\n\r\n  const closeOrder = () => {\r\n    dispatch(closeModalOrder())\r\n  }\r\n\r\n  // loading ingredients and login if user already logged\r\n  React.useEffect(() => {\r\n    dispatch(getIngredients())\r\n    \r\n    if (localStorage.getItem('refreshToken') && getCookie('token')) {\r\n      dispatch(getUser())\r\n    }\r\n  }, [dispatch]);\r\n  return (\r\n    <div className={style.app}>\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route path=\"/login\">\r\n          <LoginPage />\r\n        </Route>\r\n        <ProtectedRoute path='/profile/orders/:id' exact>\r\n          <OrderPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile'>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <Route path='/register'>\r\n          <RegisterPage />\r\n        </Route>\r\n        <Route path='/forgot-password'>\r\n          <ForgotPasswordPage />\r\n        </Route>\r\n        <Route path='/reset-password'>\r\n          <ResetPasswordPage />\r\n        </Route>\r\n        <Route path='/ingredients/:id'>\r\n          <IngredientPage/>\r\n        </Route>\r\n        <Route path='/order-feed/:id' exact>\r\n          <OrderPage />\r\n        </Route>\r\n        <Route path='/order-feed'>\r\n          <OrderFeedPage />\r\n        </Route>\r\n        <Route path=\"/\" exact>\r\n          {ingredients &&\r\n            <main className={style.main}>\r\n              <div className={style.container}>\r\n                <DndProvider backend={HTML5Backend}>\r\n                  <BurgerIngredients />\r\n                  <BurgerConstructor />\r\n                </DndProvider>\r\n              </div>\r\n            </main>\r\n          }\r\n        </Route>\r\n        <Route path='/*' exact>\r\n          <NotFoundPage/>\r\n        </Route>\r\n      </Switch>\r\n        {background &&\r\n          <Route path='/ingredients/:id'>\r\n            <Modal onClose={closeIngredient} title=\" \">\r\n              <IngredientDetails />\r\n            </Modal>\r\n          </Route>\r\n        }\r\n        {background && \r\n          <Route path='/order-feed/:id'>\r\n            <Modal onClose={closeIngredient} title=''>\r\n              <Order />\r\n            </Modal>\r\n          </Route>\r\n        }\r\n        {background && \r\n          <ProtectedRoute path='/profile/orders/:id'>\r\n            <Modal onClose={closeIngredient} title=''>\r\n              <Order />\r\n            </Modal>\r\n          </ProtectedRoute>\r\n        }\r\n        {orderNumber &&\r\n          <Modal onClose={closeOrder} title=''>\r\n            <OrderDetails orderNumber={orderNumber}/>\r\n          </Modal>\r\n        }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { TIngredient } from '../../utils/types';\r\nimport {\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  GET_INGREDIENTS_FAILED,\r\n  OPEN_INGREDIENT,\r\n  CLOSE_INGREDIENT,\r\n  TIngredientsActions\r\n}\r\nfrom '../actions/ingredients';\r\n\r\nexport type TIngredientsStateType = {\r\n  ingredients: TIngredient[];\r\n  ingredientsRequest: boolean;\r\n  ingredientsFailed: boolean;\r\n  currentIngredient: TIngredient | null;\r\n};\r\n\r\nexport const ingredientsInitialState: TIngredientsStateType = {\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  currentIngredient: null\r\n}\r\n\r\nexport const ingredientsReducer = (state: TIngredientsStateType = ingredientsInitialState, action: TIngredientsActions): TIngredientsStateType => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return ({\r\n        ...state,\r\n        ingredientsRequest: true,\r\n      })\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return ({\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredients: action.ingredients,\r\n        ingredientsFailed: false\r\n      })\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return ({\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: true,\r\n      })\r\n    }\r\n    case OPEN_INGREDIENT: {\r\n      return {\r\n          ...state,\r\n          currentIngredient: action.currentIngredient\r\n      };\r\n    }\r\n    case CLOSE_INGREDIENT: {\r\n      return {\r\n          ...state,\r\n          currentIngredient: null\r\n      };\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import {\r\n  POST_ORDER_REQUEST, \r\n  POST_ORDER_SUCCESS, \r\n  POST_ORDER_FAILED,\r\n  CLOSE_ORDER,\r\n  RESET_ORDER_NUMBER,\r\n  TOrderActions\r\n} from '../actions/order'\r\n\r\ntype TOrderState = {\r\n  orderNumber: number | null;\r\n  orderRequest: boolean;\r\n  orderFailed: boolean;\r\n};\r\n\r\nexport const orderInitialState = {\r\n  orderNumber: null,\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n}\r\n\r\nexport const orderReducer = (state: TOrderState = orderInitialState, action: TOrderActions): TOrderState => {\r\n  switch (action.type) {\r\n    case POST_ORDER_REQUEST: {\r\n      return ({\r\n        ...state,\r\n        orderRequest: true\r\n      })\r\n    }\r\n    case POST_ORDER_SUCCESS: {\r\n      return ({\r\n        ...state,\r\n        orderRequest: false,\r\n        orderNumber: action.orderNumber,\r\n        orderFailed: false\r\n      })\r\n    }\r\n    case POST_ORDER_FAILED: {\r\n      return ({\r\n        ...state,\r\n        orderRequest: false,\r\n        orderFailed: true\r\n      })\r\n    }\r\n    case CLOSE_ORDER: {\r\n      return {\r\n          ...state,\r\n          orderNumber: null\r\n      }\r\n    }\r\n    case RESET_ORDER_NUMBER: {\r\n      return {\r\n        ...state,\r\n        orderNumber: null\r\n      }\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import { TIngredient } from '../../utils/types';\r\nimport { RESET_TOTAL_PRICE,\r\n        SET_TOTAL_PRICE,\r\n        ADD_INGREDIENT,\r\n        DELETE_INGREDIENT,\r\n        MOVE_INGREDIENT,\r\n        RESET_INGREDIENTS\r\n      } from '../actions/constructor';\r\n\r\nimport { TConstructorActions } from '../actions/constructor'\r\n      \r\ntype TConstructorStateType = {\r\n  totalPrice: number;\r\n  ingredientsConstructor: Array<TIngredient>\r\n};\r\n\r\nexport const constructorInitialState: TConstructorStateType = {\r\n  totalPrice: 0,\r\n  ingredientsConstructor: []\r\n}\r\n\r\nexport function constructorReducer(state: TConstructorStateType = constructorInitialState, action: TConstructorActions): TConstructorStateType {\r\n\r\n  switch (action.type) {\r\n    case SET_TOTAL_PRICE: {\r\n      return {\r\n        ...state,\r\n        totalPrice: action.totalPrice\r\n      }\r\n    }\r\n    case RESET_TOTAL_PRICE: {\r\n      return {\r\n        ...state,\r\n        totalPrice: 0\r\n      }\r\n    }\r\n    case ADD_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        ingredientsConstructor: state.ingredientsConstructor\r\n        ? (action.item.type === 'bun' ? [...state.ingredientsConstructor, action.item, action.item] : [...state.ingredientsConstructor, action.item])\r\n        : (action.item.type === 'bun' ? [action.item, action.item] : [action.item])\r\n      }\r\n    }\r\n    case DELETE_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        ingredientsConstructor: [...state.ingredientsConstructor].filter(item => item.uid !== action.uid)\r\n      }\r\n    }\r\n    case MOVE_INGREDIENT: {\r\n      const bunIngredient = state.ingredientsConstructor.filter(item => item.type === 'bun')\r\n      let otherIngredients = state.ingredientsConstructor.filter(item => item.type !== 'bun')\r\n      const movedElement = otherIngredients[action.sourceIndex]\r\n      otherIngredients.splice(action.sourceIndex, 1)\r\n      otherIngredients.splice(action.targetIndex, 0, movedElement)\r\n      return {\r\n        ...state,\r\n        ingredientsConstructor: [...bunIngredient, ...otherIngredients]\r\n      }\r\n    }\r\n    case RESET_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        ingredientsConstructor: []\r\n      }\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import { TUser } from '../../utils/types';\r\nimport {\r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n  FORGOT_PASSWORD_FAILED,\r\n  RESET_PASSWORD_REQUEST,\r\n  RESET_PASSWORD_SUCCESS,\r\n  RESET_PASSWORD_FAILED,\r\n  REGISTRATION_REQUEST,\r\n  REGISTRATION_SUCCESS,\r\n  REGISTRATION_FAILED,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILED,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAILED,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  GET_USER_FAILED,\r\n  UPDATE_USER_REQUEST,\r\n  UPDATE_USER_SUCCESS,\r\n  UPDATE_USER_FAILED,\r\n  REFRESH_TOKEN_FAILED,\r\n  REFRESH_TOKEN_REQUEST,\r\n  REFRESH_TOKEN_SUCCESS,\r\n  TUserActions\r\n} from '../actions/user';\r\n\r\ntype TUserStateTypes = {\r\n  user: TUser | null;\r\n  registrationRequest: boolean;\r\n  registrationFailed: boolean;\r\n  isLogged: boolean;\r\n  forgotPasswordRequest: boolean;\r\n  forgotPasswordFailed: boolean;\r\n  refreshTokenRequest: boolean;\r\n  refreshTokenFailed: boolean;\r\n  resetPasswordRequest: boolean;\r\n  resetPasswordFailed: boolean;\r\n  loginRequest: boolean;\r\n  loginFailed: boolean;\r\n  logoutRequest: boolean;\r\n  logoutFailed: boolean;\r\n  getUserRequest: boolean;\r\n  getUserFailed: boolean;\r\n  updateUserRequest: boolean;\r\n  updateUserFailed: boolean;\r\n};\r\n\r\nexport const userInitialState: TUserStateTypes = {\r\n  user: null,\r\n  registrationRequest: false,\r\n  registrationFailed: false,\r\n  isLogged: false,\r\n  forgotPasswordRequest: false,\r\n  forgotPasswordFailed: false,\r\n  resetPasswordRequest: false,\r\n  resetPasswordFailed: false,\r\n  refreshTokenFailed: false,\r\n  refreshTokenRequest: false,\r\n  loginRequest: false,\r\n  loginFailed: false,\r\n  logoutRequest: false,\r\n  logoutFailed: false,\r\n  getUserRequest: false,\r\n  getUserFailed: false,\r\n  updateUserRequest: false,\r\n  updateUserFailed: false\r\n};\r\n\r\nexport const userReducer = (state: TUserStateTypes = userInitialState, action: TUserActions): TUserStateTypes => {\r\n  switch (action.type) {\r\n    case REGISTRATION_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registrationRequest: true,\r\n        registrationFailed: false,\r\n      }\r\n    }\r\n    case REGISTRATION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        registrationRequest: false,\r\n        registrationFailed: false,\r\n        user: action.user,\r\n        isLogged: true,\r\n      }\r\n    }\r\n    case REGISTRATION_FAILED: {\r\n      return {\r\n        ...state,\r\n        registrationRequest: false,\r\n        registrationFailed: true,     \r\n      }\r\n    }\r\n    case FORGOT_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordRequest: true,\r\n        forgotPasswordFailed: false,\r\n      }\r\n    }\r\n    case FORGOT_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordFailed: false,\r\n        forgotPasswordRequest: false\r\n      }\r\n    }\r\n    case FORGOT_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordFailed: true,\r\n        forgotPasswordRequest: false\r\n      }\r\n    }\r\n    case RESET_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: true,\r\n        resetPasswordFailed: false\r\n      }\r\n    }\r\n    case RESET_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: false,\r\n        resetPasswordFailed: false\r\n      }\r\n    }\r\n    case RESET_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: false,\r\n        resetPasswordFailed: true\r\n      }\r\n    }\r\n    case LOGIN_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loginRequest: true,\r\n        loginFailed: false,\r\n      }\r\n    }\r\n    case LOGIN_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: false,\r\n        user: action.user,\r\n        isLogged: true\r\n      }\r\n    }\r\n    case LOGIN_FAILED: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: true\r\n      }\r\n    }\r\n    case LOGOUT_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: true,\r\n        logoutFailed: false\r\n      }\r\n    }\r\n    case LOGOUT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutFailed: false,\r\n        isLogged: false,\r\n        user: null\r\n      }\r\n    }\r\n    case LOGOUT_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutFailed: true,\r\n        logoutRequest: false\r\n      }\r\n    }\r\n    case GET_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: true,\r\n        getUserFailed: false,\r\n        isLogged: false\r\n      }\r\n    }\r\n    case GET_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserFailed: false,\r\n        user: action.user,\r\n        isLogged: true\r\n      }\r\n    }\r\n    case GET_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        getUserFailed: true,\r\n        getUserRequest: false,\r\n        user: null,\r\n        isLogged: false\r\n      }\r\n    }\r\n    case REFRESH_TOKEN_REQUEST: {\r\n      return {\r\n        ...state,\r\n        refreshTokenRequest: true,\r\n        refreshTokenFailed: false\r\n      }\r\n    }\r\n    case REFRESH_TOKEN_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        refreshTokenRequest: false,\r\n        refreshTokenFailed: false\r\n      }\r\n    }\r\n    case REFRESH_TOKEN_FAILED: {\r\n      return {\r\n        ...state,\r\n        refreshTokenFailed: true,\r\n        refreshTokenRequest: false\r\n      }\r\n    }\r\n    case UPDATE_USER_REQUEST: {\r\n      return {\r\n        ...state, \r\n        updateUserRequest: true,\r\n        updateUserFailed: false\r\n      }\r\n    }\r\n    case UPDATE_USER_SUCCESS: {\r\n      return {\r\n        ...state, \r\n        updateUserRequest: false,\r\n        updateUserFailed: false,\r\n        user: action.user\r\n      }\r\n    }\r\n    case UPDATE_USER_FAILED: {\r\n      return {\r\n        ...state, \r\n        updateUserRequest: false,\r\n        updateUserFailed: true\r\n      }\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import { TOrder } from '../../utils/types';\r\nimport {\r\n  TFeedOrdersActions,\r\n  WS_CONNECTION_SUCCESS_ORDERS,\r\n  WS_CONNECTION_CLOSED_ORDERS,\r\n  WS_CONNECTION_ERROR_ORDERS,\r\n  WS_GET_ORDERS,\r\n  WS_CONNECTION_SUCCESS_ORDERS_USER,\r\n  WS_CONNECTION_CLOSED_ORDERS_USER,\r\n  WS_CONNECTION_ERROR_ORDERS_USER,\r\n  WS_GET_ORDERS_USER\r\n} from '../actions/feed';\r\n\r\ntype TFeedOrdersState = {\r\n  wsConnected: boolean;\r\n  orders: TOrder[];\r\n  total: number;\r\n  totalToday: number;\r\n  userOrders: TOrder[];\r\n  };\r\n  \r\nexport const feedOrdersInitialState: TFeedOrdersState = {\r\n  wsConnected: false,\r\n  orders: [],\r\n  total: 0,\r\n  totalToday: 0,\r\n  userOrders: [],\r\n};\r\n\r\nexport const feedOrdersReducer = (state = feedOrdersInitialState, action: TFeedOrdersActions): TFeedOrdersState => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS_ORDERS: {\r\n      return {\r\n        ...state,\r\n        wsConnected: true,\r\n      };\r\n    }\r\n    case WS_CONNECTION_CLOSED_ORDERS: {\r\n      return {\r\n        ...state,\r\n        wsConnected: false,\r\n      };\r\n    }\r\n    case WS_CONNECTION_ERROR_ORDERS: {\r\n      return {\r\n        ...state,\r\n        wsConnected: false,\r\n      };\r\n    }\r\n    case WS_GET_ORDERS: {\r\n      return {\r\n        ...state,\r\n        orders: action.orders.orders,\r\n        total: action.orders.total,\r\n        totalToday: action.orders.totalToday,\r\n      };\r\n    }\r\n    case WS_CONNECTION_SUCCESS_ORDERS_USER: {\r\n      return {\r\n        ...state,\r\n        wsConnected: true,\r\n      };\r\n    }\r\n    case WS_CONNECTION_CLOSED_ORDERS_USER: {\r\n      return {\r\n        ...state,\r\n        wsConnected: false,\r\n      };\r\n    }\r\n    case WS_CONNECTION_ERROR_ORDERS_USER: {\r\n      return {\r\n        ...state,\r\n        wsConnected: false,\r\n      };\r\n    }\r\n    case WS_GET_ORDERS_USER: {\r\n      return {\r\n        ...state,\r\n        userOrders: action.orders.orders\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import { combineReducers } from 'redux';\r\nimport { ingredientsReducer } from './ingredients-reducer';\r\nimport { orderReducer } from './order-reducer';\r\nimport { constructorReducer } from './constructor-reducer'\r\nimport { userReducer } from './user-reducer';\r\nimport { feedOrdersReducer } from './feed-reducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n  ingredients: ingredientsReducer,\r\n  order: orderReducer,\r\n  constructor: constructorReducer,\r\n  user: userReducer,\r\n  feed: feedOrdersReducer,\r\n});","import { Middleware, MiddlewareAPI } from 'redux';\r\nimport { getCookie } from '../../utils/cookie_handlers';\r\nimport {\r\n  TWsOrdersActions,\r\n  TWsOrdersUserActions,\r\n  WS_CONNECTION_START_ORDERS,\r\n  WS_CONNECTION_START_ORDERS_USER\r\n  } from '../actions/feed';\r\nimport { AppDispatch, RootState } from '../types';\r\n\r\nexport const socketMiddleware = (wsUrl: string, wsActions: TWsOrdersActions | TWsOrdersUserActions): Middleware => \r\n  (store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n  \r\n  let socket: WebSocket | null = null;\r\n\r\n  return (next) => (action) => {\r\n    const { dispatch, getState } = store;\r\n    const { isLogged } = getState().user;\r\n    const token = isLogged ? `?token=${getCookie('token')?.replace('Bearer ', '')}` : '';\r\n    const { type } = action;\r\n    const { wsInit, onOpen, onClose, onError, onOrders } = wsActions;\r\n\r\n    if (type === wsInit && type === WS_CONNECTION_START_ORDERS_USER) {\r\n      socket = new WebSocket(`${wsUrl}${token}`);\r\n    }\r\n\r\n    if (type === wsInit && type === WS_CONNECTION_START_ORDERS) {\r\n      socket = new WebSocket(`${wsUrl}/all`);\r\n    }\r\n\r\n    if (socket) {\r\n      socket.onopen = (event) => {\r\n        dispatch({ type: onOpen, orders: event });\r\n      };\r\n\r\n      socket.onerror = (event) => {\r\n        dispatch({ type: onError, orders: event });\r\n      };\r\n\r\n      socket.onmessage = (event) => {\r\n        const { data } = event;\r\n        const message = JSON.parse(data);\r\n        dispatch({ type: onOrders, orders: message });\r\n      };\r\n\r\n      socket.onclose = (event) => {\r\n        dispatch({ type: onClose, orders: event });\r\n      };\r\n    }\r\n    next(action);\r\n  };\r\n};\r\n\r\nexport default socketMiddleware;","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from './reducers';\r\nimport socketMiddleware from './middlewares/wsSocketMiddleware';\r\nimport { wsOrdersUserActions, wsOrdersActions } from './actions/feed';\r\n\r\nconst WS_URL = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nconst composeEnhancers =\r\n  (typeof window === 'object' && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)\r\n    ? (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware(WS_URL, wsOrdersActions), socketMiddleware(WS_URL, wsOrdersUserActions)))\r\n\r\nexport const store = createStore(rootReducer, enhancer);","import React from 'react';\r\nimport {Provider} from 'react-redux'\r\nimport ReactDOM from 'react-dom';\r\nimport {BrowserRouter as Router} from 'react-router-dom'\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {store} from './services/store'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>, document.getElementById('root') as HTMLElement);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_container\":\"ingredient-details_image_container__1IOUP\",\"name_container\":\"ingredient-details_name_container__3pxCD\",\"name\":\"ingredient-details_name__cJV7K\",\"property_container\":\"ingredient-details_property_container__2Kdop\",\"property_item\":\"ingredient-details_property_item__2o7L2\",\"property_value\":\"ingredient-details_property_value__1tDqk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-board_wrapper__1tay-\",\"status_container\":\"order-board_status_container__3-cOE\",\"two_column\":\"order-board_two_column__1KRvH\",\"title_container\":\"order-board_title_container__384F5\",\"execute\":\"order-board_execute__diCq0 text text_type_digits-default\",\"ready\":\"order-board_ready__2y_Sg order-board_execute__diCq0 text text_type_digits-default\",\"total\":\"order-board_total__2s13U text text_type_digits-large\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-card_container__1UPcV\",\"price_container\":\"ingredient-card_price_container__1hc9L\",\"price_value\":\"ingredient-card_price_value__2oSU8\",\"icon\":\"ingredient-card_icon__2_N_W\",\"image_container\":\"ingredient-card_image_container__3XATY\",\"counter\":\"ingredient-card_counter__yH9Yw\",\"name_text\":\"ingredient-card_name_text__uSNPR\",\"link\":\"ingredient-card_link__2zi2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item_container\":\"order-feed-item_item_container__1zGFP\",\"info_container\":\"order-feed-item_info_container__1IRpn\",\"date_container\":\"order-feed-item_date_container__OFFnK\",\"title_container\":\"order-feed-item_title_container__3gm7P\",\"ingredients_container\":\"order-feed-item_ingredients_container__-b6v8\",\"total_price\":\"order-feed-item_total_price__3zstg\",\"icons_container\":\"order-feed-item_icons_container__tXmZJ\",\"order_status\":\"order-feed-item_order_status__GvZAM text text_type_main-default\",\"done\":\"order-feed-item_done__6qA-5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order_wrapper__6gRiK\",\"order_status\":\"order_order_status__mWznA text text_type_main-default\",\"done\":\"order_done__1b-8M\",\"ingredient\":\"order_ingredient__RcJ9p\",\"scrolled\":\"order_scrolled__1xFtg\",\"icon\":\"order_icon__2ksxP\",\"price\":\"order_price__SeUDK\",\"total_price_container\":\"order_total_price_container__1mHWf\",\"total_price\":\"order_total_price__365R- text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header_container\":\"app-header_header_container__C-eMj\",\"header\":\"app-header_header__3k9Qi\",\"logo\":\"app-header_logo__3T_bp\",\"container\":\"app-header_container__2_Gdn\",\"link\":\"app-header_link__17mVA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-feed-page_wrapper__2hTOO\",\"container\":\"order-feed-page_container__21lre\",\"two_column\":\"order-feed-page_two_column__1Xn6S\",\"title_container\":\"order-feed-page_title_container__3Vk4D\",\"title\":\"order-feed-page_title__1vtdo\",\"scrolled\":\"order-feed-page_scrolled__2CK0_\",\"orders_container\":\"order-feed-page_orders_container__10SwW\",\"board\":\"order-feed-page_board__10rkN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_id\":\"order-details_order_id__1aUFz\",\"order_id_container\":\"order-details_order_id_container__f3mtK\",\"done_icon\":\"order-details_done_icon__30bSW\",\"popup_text\":\"order-details_popup_text__1b-Y9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_container\":\"nav-profile_nav_container__n_kyC\",\"nav_link\":\"nav-profile_nav_link__1NvFm text_type_main-medium\",\"active_nav_link\":\"nav-profile_active_nav_link__2f-zg text_type_main-medium\",\"button\":\"nav-profile_button__1SiAJ text_type_main-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__1bWcZ\",\"title_container\":\"burger-ingredients_title_container__1tuwa\",\"title_text\":\"burger-ingredients_title_text__AsyRo\",\"tab\":\"burger-ingredients_tab__molQ9\",\"scrolled\":\"burger-ingredients_scrolled__2ToTi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"menu-button_btn__A3jrT\",\"text\":\"menu-button_text__3N36C\",\"logo\":\"menu-button_logo__2XNhV\",\"active\":\"menu-button_active__2aDDH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"pages_wrapper__3YxwS\",\"container\":\"pages_container__3b0EC\",\"title\":\"pages_title__10qZT\",\"link\":\"pages_link__2_lsX\",\"form_container\":\"pages_form_container__1WULU\",\"inputs_container\":\"pages_inputs_container__3UGNg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__AASrl\",\"main\":\"app_main__1Ibvq\",\"message\":\"app_message__3dbIa\",\"container\":\"app_container__2ezQz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup_container\":\"modal_popup_container__yte0D\",\"title_container\":\"modal_title_container__2d83u\",\"icon_container\":\"modal_icon_container__3mGJh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-icon_container__EtPOE\",\"last\":\"ingredient-icon_last__3-s_v\",\"counter\":\"ingredient-icon_counter__gr31u text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"two_column\":\"ingredients-tab_two_column__38hIc\",\"tab_name\":\"ingredients-tab_tab_name__Qsw11\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile_wrapper\":\"profile-page_profile_wrapper__2Y0b4\",\"profile_container\":\"profile-page_profile_container__2K5Eu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_container\":\"profile-info_form_container__1TWTP\",\"inputs_container\":\"profile-info_inputs_container__12LQ_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-page_wrapper__1QxPh\",\"title\":\"order-page_title__eJOCI text text_type_digits-default\"};"],"sourceRoot":""}