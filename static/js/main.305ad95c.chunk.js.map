{"version":3,"sources":["components/constructor-ingredient/constructor-ingredient.module.css","components/modal-overlay/modal-overlay.module.css","components/profile-orders/profile-orders.module.css","pages/ingredient-page/ingredient-page.module.css","components/burger-constructor/burger-constructor.module.css","components/menu-button/menu-button.tsx","services/types/hooks.ts","components/app-header/app-header.tsx","components/constructor-ingredient/constructor-ingredient.tsx","utils/cookie_handlers.ts","utils/fetch_api.ts","services/actions/order.ts","services/actions/constructor.ts","components/burger-constructor/burger-constructor.tsx","services/actions/ingredients.ts","components/ingredient-card/ingredient-card.tsx","components/ingredients-tab/ingredients-tab.tsx","components/burger-ingredients/burger-ingredients.tsx","components/ingredient-details/ingredient-details.tsx","images/done.svg","components/order-details/order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","services/actions/user.ts","pages/login-page/login-page.tsx","pages/register-page/register-page.tsx","pages/forgot-password-page/forgot-password-page.tsx","pages/reset-password-page/reset-password-page.tsx","components/nav-profile/nav-profile.tsx","components/profile-info/profile-info.tsx","components/ingredient-icon/ingredient-icon.tsx","utils/format-data.ts","components/order-feed-item/order-feed-item.tsx","services/actions/feed.ts","components/profile-orders/profile-orders.tsx","pages/profile-page/profile-page.tsx","pages/not-found-page/not-found-page.tsx","pages/ingredient-page/ingredient-page.tsx","components/order-board/order-board.tsx","pages/order-feed-page/order-feed-page.tsx","components/order/order.tsx","pages/order-page/order-page.tsx","components/protected-route/protected-route.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/ingredients-reducer.ts","services/reducers/order-reducer.ts","services/reducers/constructor-reducer.ts","services/reducers/user-reducer.ts","services/reducers/feed-reducer.ts","services/reducers/index.ts","services/middlewares/wsSocketMiddleware.ts","services/store.ts","index.tsx","components/ingredient-details/ingredient-details.module.css","components/order-board/order-board.module.css","components/ingredient-card/ingredient-card.module.css","components/order-feed-item/order-feed-item.module.css","components/order/order.module.css","components/app-header/app-header.module.css","pages/order-feed-page/order-feed-page.module.css","components/order-details/order-details.module.css","components/nav-profile/nav-profile.module.css","components/burger-ingredients/burger-ingredients.module.css","components/menu-button/menu-button.module.css","pages/index.module.css","components/app/app.module.css","components/modal/modal.module.css","components/ingredient-icon/ingredient-icon.module.css","components/ingredients-tab/ingredients-tab.module.css","pages/profile-page/profile-page.module.css","components/profile-info/profile-info.module.css","pages/order-page/order-page.module.css"],"names":["module","exports","MenuButton","className","children","active","text","style","btn","logo","defaultProps","useSelector","useSelectorOrigin","useDispatch","useDispatchOrigin","AppHeader","isMainPage","useRouteMatch","isExact","isFeedPage","isProfilePage","profile","store","user","name","header_container","header","container","to","link","type","ConstructorIngredient","item","onDelete","onMove","index","ref","React","useRef","useDrag","dragRef","useDrop","accept","hover","hoverItem","sourceIndex","targetIndex","dropTarget","onCloseHandler","useCallback","uid","item_container","draggable","isLocked","price","thumbnail","image","handleClose","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","options","newOptions","path","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKeys","Object","keys","forEach","optionKey","optionValue","URL_API","INGREDIENT_API","ORDER_API","REGISTRATION_USER_API","FORGOT_PASSWORD_API","RESET_PASSWORD_API","LOGIN_API","LOGOUT_API","GET_USER_API","REFRESH_TOKEN_API","UPDATE_USER_API","checkResponse","response","ok","json","Promise","reject","status","POST_ORDER_REQUEST","POST_ORDER_SUCCESS","POST_ORDER_FAILED","RESET_ORDER_NUMBER","CLOSE_ORDER","postOrder","ingredients","dispatch","fetch","method","headers","Authorization","body","JSON","stringify","then","postOrderRequest","orderNumber","order","number","catch","e","console","error","SET_TOTAL_PRICE","RESET_TOTAL_PRICE","ADD_INGREDIENT","DELETE_INGREDIENT","MOVE_INGREDIENT","RESET_INGREDIENTS","deleteIngredient","resetIngredients","BurgerConstructor","history","useHistory","isLogged","constructor","ingredientsConstructor","orderRequest","orderFailed","totalPrice","useMemo","reduce","sum","bunIngredient","filter","otherIngredients","useEffect","handleDeleteIngredient","makeOrder","map","_id","push","pathname","handleMoveIngredient","moveIngredient","handleDrop","ingredient","uuid","drop","containerStyle","length","emptyContainer","mainContainerStyle","main","mainEmpty","itemContainerStyle","itemContainerEmpty","otherIngredientsElements","wrapper","scrolled","total_container","price_value","currency_container","size","onClick","disabled","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","OPEN_INGREDIENT","CLOSE_INGREDIENT","getIngredients","data","IngredientCard","location","useLocation","openIngredientsDetail","ingredientID","currentIngredient","handleOpenDetail","state","background","count","image_container","src","alt","counter","price_container","icon","name_container","name_text","IngredientsTab","forwardRef","title","tab_name","two_column","displayName","BurgerIngredients","useState","current","setCurrent","refBun","refMain","refSauces","bunIngredients","sauceIngredients","mainIngredients","scrollToTab","scrollIntoView","behavior","focusCurrentTab","offsetHeight","Number","currentTarget","scrollTop","title_container","title_text","tab","onScroll","IngredientDetails","params","useParams","find","id","image_large","property_container","property_item","property_value","calories","proteins","fat","carbohydrates","_path","_path2","_path3","_path4","_defs","_excluded","_extends","assign","bind","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgDone","_ref","svgRef","titleId","props","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","fillOpacity","cx","cy","r","gradientUnits","gradientTransform","stopColor","stopOpacity","offset","ForwardRef","OrderDetails","order_id_container","order_id","popup_text","done_icon","ModalOverlay","onClose","modalOverlay","Modal","allOrders","feed","orders","userOrders","feedOrderNumber","profileOrderNumber","closeModal","keyCode","addEventListener","removeEventListener","ReactDOM","createPortal","popup_container","icon_container","getElementById","REGISTRATION_REQUEST","REGISTRATION_SUCCESS","REGISTRATION_FAILED","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILED","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","UPDATE_USER_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","REFRESH_TOKEN_REQUEST","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILED","registrationUser","email","password","registrationUserRequest","resp","success","accessToken","localStorage","setItem","refreshToken","forgotPassword","forgotPasswordRequest","resetPassword","newPassword","code","token","resetPasswordRequest","login","loginRequest","logout","getItem","removeItem","updateToken","getUser","String","updateUser","updateUserRequest","LoginPage","setEmail","setPassword","from","loginFailed","onChangePassword","onChangeEmail","handleSubmit","preventDefault","form_container","onSubmit","inputs_container","placeholder","onChange","errorText","RegisterPage","setName","onChangeName","ForgotPasswordPage","ResetPasswordPage","setCode","prevPage","onChangeCode","NavProfile","url","logoutHandler","nav_container","exact","nav_link","activeClassName","active_nav_link","button","ProfileInfo","isChange","setIsChange","resetUserInfo","updateUserInfo","IngredientIcon","imageURL","last","iconStyle","boxSizing","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","weekDays","days","formatData","date","currentDate","orderDate","daysFromOrder","Math","floor","getTime","time","getHours","getMinutes","remains","getDay","ordersStatus","created","pending","done","OrderFeedItem","isUserOrder","orderIngredients","allIngredientItem","showIngredients","slice","lastIngredient","hiddenIngredientCount","info_container","date_container","createdAt","order_status","ingredients_container","icons_container","image_mobile","total_price","WS_CONNECTION_START_ORDERS","WS_CONNECTION_SUCCESS_ORDERS","WS_CONNECTION_ERROR_ORDERS","WS_CONNECTION_CLOSED_ORDERS","WS_GET_ORDERS","WS_CONNECTION_START_ORDERS_USER","WS_CONNECTION_SUCCESS_ORDERS_USER","WS_CONNECTION_ERROR_ORDERS_USER","WS_CONNECTION_CLOSED_ORDERS_USER","WS_GET_ORDERS_USER","wsConnectionStartOrdersAction","wsConnectionClosedOrdersAction","wsConnectionStartOrdersUserAction","wsConnectionClosedOrdersUserAction","wsOrdersActions","wsInit","onOpen","onError","onOrders","wsOrdersUserActions","ProfileOrders","ProfilePage","profile_wrapper","profile_container","NotFoundPage","IngredientPage","OrderBoard","total","totalToday","doneOrders","executeOrders","status_container","ready","execute","OrderFeedPage","board","Order","allIngredients","userOrder","currentOrder","orderIngredientsAll","includes","total_count","orderIngredient","total_price_container","OrderPage","isUserOrders","setOrderNumber","ProtectedRoute","render","App","closeIngredient","goBack","closeOrder","app","DndProvider","backend","HTML5Backend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredientsInitialState","ingredientsRequest","ingredientsFailed","orderInitialState","constructorInitialState","userInitialState","registrationRequest","registrationFailed","forgotPasswordFailed","resetPasswordFailed","refreshTokenFailed","refreshTokenRequest","logoutRequest","logoutFailed","getUserRequest","getUserFailed","updateUserFailed","feedOrdersInitialState","wsConnected","rootReducer","combineReducers","action","movedElement","splice","socketMiddleware","wsUrl","wsActions","socket","next","getState","WebSocket","onopen","event","onerror","onmessage","message","parse","onclose","WS_URL","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode","basename"],"mappings":"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","file":"static/js/main.305ad95c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item_container\":\"constructor-ingredient_item_container__2RkGa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modal-overlay_modalOverlay__tfXD-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrolled\":\"profile-orders_scrolled__1cyRh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ingredient-page_wrapper__Qb9Z5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"burger-constructor_wrapper__3y1z5\",\"container\":\"burger-constructor_container__332QY\",\"emptyContainer\":\"burger-constructor_emptyContainer__1RZAd burger-constructor_container__332QY\",\"item_container\":\"burger-constructor_item_container__xWVYn\",\"itemContainerEmpty\":\"burger-constructor_itemContainerEmpty__vgJJq burger-constructor_item_container__xWVYn\",\"main\":\"burger-constructor_main__O9C0W\",\"mainEmpty\":\"burger-constructor_mainEmpty__1lcEk burger-constructor_main__O9C0W\",\"total_container\":\"burger-constructor_total_container__1wJWi\",\"scrolled\":\"burger-constructor_scrolled__geWDi\",\"price_value\":\"burger-constructor_price_value__3lQck\",\"currency_container\":\"burger-constructor_currency_container__UuipD\"};","import React from 'react';\nimport style from './menu-button.module.css';\n\ntype TMenuButtonProps = {\n  className?: string;\n  children: React.ReactElement;\n  active: boolean | undefined;\n  text: string;\n};\n\nconst MenuButton: React.FunctionComponent<TMenuButtonProps> = ({ className, children, active, text }) => (\n  <div className={`${style.btn} ${className}`}>\n    <div className={style.logo}>{children}</div>\n    <p className={`text text_type_main-small ${style.text} ${active ? style.active : ''}`}>{text}</p>\n  </div>\n);\n\nMenuButton.defaultProps = {\n  className: '',\n};\n\nexport default MenuButton;\n","import { useSelector as useSelectorOrigin, useDispatch as useDispatchOrigin, TypedUseSelectorHook } from 'react-redux';\n\nimport { RootState, AppDispatch, AppThunk } from './index';\n\n// typed useSelector hook\nexport const useSelector: TypedUseSelectorHook<RootState> = useSelectorOrigin;\n\n// typed useDispatch hook\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const useDispatch = () => useDispatchOrigin<AppDispatch | AppThunk>();\n","import React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from './app-header.module.css';\nimport MenuButton from '../menu-button/menu-button';\nimport { useSelector } from '../../services/types/hooks';\n\nfunction AppHeader(): JSX.Element {\n  const isMainPage = useRouteMatch('/')?.isExact;\n  const isFeedPage = useRouteMatch('/order-feed')?.isExact;\n  const isProfilePage = useRouteMatch('/profile')?.isExact;\n\n  const userName = useSelector((store) => store.user?.user?.name);\n  const profile = userName || 'Личный кабинет';\n\n  return (\n    <header className={style.header_container}>\n      <nav className={style.header}>\n        <div className={style.container}>\n          <Link to=\"/\" className={style.link}>\n            <MenuButton className=\"mr-2\" text=\"Конструктор\" active={isMainPage}>\n              <BurgerIcon type={isMainPage ? 'primary' : 'secondary'} />\n            </MenuButton>\n          </Link>\n          <Link to=\"/order-feed\" className={style.link}>\n            <MenuButton text=\"Лента заказов\" active={isFeedPage}>\n              <ListIcon type={isFeedPage ? 'primary' : 'secondary'} />\n            </MenuButton>\n          </Link>\n        </div>\n        <Link to=\"/profile\" className={style.link}>\n          <MenuButton text={profile} active={isProfilePage}>\n            <ProfileIcon type={isProfilePage ? 'primary' : 'secondary'} />\n          </MenuButton>\n        </Link>\n      </nav>\n      <Link to=\"/\" className={style.logo}>\n        <Logo />\n      </Link>\n    </header>\n  );\n}\n\nexport default AppHeader;\n","import React, { FC } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from './constructor-ingredient.module.css';\nimport { TIngredient } from '../../utils/types';\n\ntype TConstructorIngredient = {\n  item: TIngredient;\n  onDelete: (uid: string | undefined) => void;\n  onMove: (targetIndex: number, sourceIndex: number) => void;\n  index: number;\n};\n\nconst ConstructorIngredient: FC<TConstructorIngredient> = ({ item, onDelete, onMove, index }) => {\n  // ref\n  const ref = React.useRef(null);\n\n  // on drag current element\n  const [, dragRef] = useDrag({\n    type: 'ingredient',\n    item: { index },\n  });\n\n  // on drop\n  const [, dropTarget] = useDrop({\n    accept: 'ingredient',\n    hover: (hoverItem: { index: number }) => {\n      // index - is target index (current hover) of element in source array\n      // item.index - is source index (current draggable) of element in source array\n      const sourceIndex = hoverItem.index;\n      const targetIndex = index;\n\n      if (targetIndex === sourceIndex) return;\n\n      onMove(targetIndex, sourceIndex);\n\n      // after moving reassign target index for current element\n      // eslint-disable-next-line no-param-reassign\n      hoverItem.index = targetIndex;\n    },\n  });\n\n  dragRef(dropTarget(ref));\n\n  const onCloseHandler = React.useCallback(() => {\n    onDelete(item.uid);\n  }, [onDelete, item.uid]);\n\n  return (\n    <div className={style.item_container} draggable ref={ref}>\n      <DragIcon type=\"primary\" />\n      <ConstructorElement\n        key={item.uid}\n        text={item.name}\n        isLocked={false}\n        price={item.price}\n        thumbnail={item.image}\n        handleClose={onCloseHandler}\n      />\n    </div>\n  );\n};\n\nexport default ConstructorIngredient;\n","export function getCookie(name: string): string | undefined {\n  const matches = document.cookie.match(\n    new RegExp(\n      // eslint-disable-next-line no-useless-escape\n      `(?:^|; )${name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1')}=([^;]*)`,\n    ),\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function setCookie(name: string, value: string, options: any = {}): void {\n  const newOptions = {\n    path: '/',\n    ...options,\n  };\n\n  if (options.expires instanceof Date) {\n    newOptions.expires = options.expires.toUTCString();\n  }\n\n  let updatedCookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n\n  const optionKeys = Object.keys(newOptions);\n  optionKeys.forEach((optionKey) => {\n    updatedCookie += `;${optionKey}`;\n    const optionValue = newOptions[optionKey];\n    if (optionValue !== true) {\n      updatedCookie += `=${optionValue}`;\n    }\n  });\n  document.cookie = updatedCookie;\n}\n\nexport function deleteCookie(name: string): void {\n  setCookie(name, '', {\n    'max-age': -1,\n  });\n}\n","import { getCookie } from './cookie_handlers';\n\nconst URL_API = 'https://norma.nomoreparties.space/api/';\nconst INGREDIENT_API = `${URL_API}ingredients`;\nconst ORDER_API = `${URL_API}orders`;\nconst REGISTRATION_USER_API = `${URL_API}auth/register`;\nconst FORGOT_PASSWORD_API = `${URL_API}password-reset`;\nconst RESET_PASSWORD_API = `${URL_API}password-reset/reset`;\nconst LOGIN_API = `${URL_API}auth/login`;\nconst LOGOUT_API = `${URL_API}auth/logout`;\nconst GET_USER_API = `${URL_API}auth/user`;\nconst REFRESH_TOKEN_API = `${URL_API}auth/token`;\nconst UPDATE_USER_API = `${URL_API}auth/user`;\n\nconst checkResponse = (response: Response) => {\n  if (response.ok) {\n    return response.json();\n  }\n  return Promise.reject(response.status);\n};\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const getIngredientsRequest = () => fetch(INGREDIENT_API).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const postOrderRequest = (ingredients: { ingredients: string[] }) =>\n  fetch(ORDER_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `${getCookie('token')}`,\n    },\n    body: JSON.stringify({ ingredients }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const registrationUserRequest = (email: string, password: string, name: string) =>\n  fetch(REGISTRATION_USER_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      password,\n      name,\n    }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const forgotPasswordRequest = (email: string) =>\n  fetch(FORGOT_PASSWORD_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n    }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const resetPasswordRequest = (password: string, code: string) =>\n  fetch(RESET_PASSWORD_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      password,\n      token: code,\n    }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const loginRequest = (email: string, password: string) =>\n  fetch(LOGIN_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const logoutRequest = () =>\n  fetch(LOGOUT_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const refreshTokenRequest = () =>\n  fetch(REFRESH_TOKEN_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const getUserRequest = () =>\n  fetch(GET_USER_API, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: String(getCookie('token')),\n    },\n  }).then(checkResponse);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const updateUserRequest = (email: string, name: string) =>\n  fetch(UPDATE_USER_API, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: String(getCookie('token')),\n    },\n    body: JSON.stringify({ email, name }),\n  }).then(checkResponse);\n","import { postOrderRequest } from '../../utils/fetch_api';\n/* eslint import/no-cycle: 0 */\nimport { AppDispatch, AppThunk } from '../types';\n\nexport const POST_ORDER_REQUEST = 'POST_ORDER_REQUEST' as const;\nexport const POST_ORDER_SUCCESS = 'POST_ORDER_SUCCESS' as const;\nexport const POST_ORDER_FAILED = 'POST_ORDER_FAILED' as const;\nexport const RESET_ORDER_NUMBER = 'RESET_ORDER_NUMBER' as const;\nexport const CLOSE_ORDER = 'CLOSE_ORDER' as const;\n\nexport interface IPostOrderRequest {\n  readonly type: typeof POST_ORDER_REQUEST;\n}\n\nexport interface IPostOrderSuccess {\n  readonly type: typeof POST_ORDER_SUCCESS;\n  readonly orderNumber: number | null;\n}\n\nexport interface IPostOrderFailed {\n  readonly type: typeof POST_ORDER_FAILED;\n}\n\nexport interface IResetOrderNumber {\n  readonly type: typeof RESET_ORDER_NUMBER;\n}\n\nexport interface ICloseOrder {\n  readonly type: typeof CLOSE_ORDER;\n}\n\nexport type TOrderActions = IPostOrderRequest | IPostOrderSuccess | IPostOrderFailed | IResetOrderNumber | ICloseOrder;\n\nexport const postOrder: AppThunk = (ingredients: { ingredients: string[] }) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: POST_ORDER_REQUEST,\n  });\n\n  postOrderRequest(ingredients)\n    .then((response) => {\n      dispatch({\n        type: POST_ORDER_SUCCESS,\n        orderNumber: response.order.number,\n      });\n    })\n    .catch((e) => {\n      console.error(e);\n      dispatch({\n        type: POST_ORDER_FAILED,\n      });\n    });\n};\n\nexport const closeModalOrder = (): ICloseOrder => ({\n  type: CLOSE_ORDER,\n});\n","import { TIngredient } from '../../utils/types';\n\nexport const SET_TOTAL_PRICE = 'SET_TOTAL_PRICE' as const;\nexport const RESET_TOTAL_PRICE = 'RESET_TOTAL_PRICE' as const;\nexport const ADD_INGREDIENT = 'ADD_INGREDIENT' as const;\nexport const DELETE_INGREDIENT = 'DELETE_INGREDIENT' as const;\nexport const MOVE_INGREDIENT = 'MOVE_INGREDIENT' as const;\nexport const RESET_INGREDIENTS = 'RESET_INGREDIENTS' as const;\n\nexport interface ISetTotalPrice {\n  readonly type: typeof SET_TOTAL_PRICE;\n  readonly totalPrice: number;\n}\n\nexport interface IResetTotalPrice {\n  readonly type: typeof RESET_TOTAL_PRICE;\n}\n\nexport interface IAddIngredient {\n  readonly type: typeof ADD_INGREDIENT;\n  readonly item: TIngredient;\n}\n\nexport interface IDeleteIngredient {\n  readonly type: typeof DELETE_INGREDIENT;\n  readonly uid: string | undefined;\n}\n\nexport interface IMoveIngredient {\n  readonly type: typeof MOVE_INGREDIENT;\n  readonly sourceIndex: number;\n  readonly targetIndex: number;\n}\n\nexport interface IResetIngredients {\n  readonly type: typeof RESET_INGREDIENTS;\n}\n\nexport type TConstructorActions =\n  | ISetTotalPrice\n  | IResetTotalPrice\n  | IAddIngredient\n  | IDeleteIngredient\n  | IMoveIngredient\n  | IResetIngredients;\n\n/* eslint arrow-body-style: 0 */\nexport const resetTotalPrice = (): IResetTotalPrice => {\n  return {\n    type: RESET_TOTAL_PRICE,\n  };\n};\n\nexport const setTotalPrice = (totalPrice: number): ISetTotalPrice => {\n  return {\n    type: SET_TOTAL_PRICE,\n    totalPrice,\n  };\n};\n\nexport const addIngredient = (item: TIngredient, uid: string | undefined): IAddIngredient => {\n  return {\n    type: ADD_INGREDIENT,\n    item: { ...item, uid },\n  };\n};\n\nexport const deleteIngredient = (uid: string | undefined): IDeleteIngredient => {\n  return {\n    type: DELETE_INGREDIENT,\n    uid,\n  };\n};\n\nexport const moveIngredient = (sourceIndex: number, targetIndex: number): IMoveIngredient => {\n  return {\n    type: MOVE_INGREDIENT,\n    sourceIndex,\n    targetIndex,\n  };\n};\n\nexport const resetIngredients = (): IResetIngredients => {\n  return {\n    type: RESET_INGREDIENTS,\n  };\n};\n","import React, { FC } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { History } from 'history';\nimport { useDrop } from 'react-dnd';\nimport { v4 as uuid } from 'uuid';\nimport { CurrencyIcon, Button, ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from './burger-constructor.module.css';\nimport ConstructorIngredient from '../constructor-ingredient/constructor-ingredient';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { postOrder } from '../../services/actions/order';\nimport {\n  setTotalPrice,\n  addIngredient,\n  deleteIngredient,\n  resetIngredients,\n  moveIngredient,\n} from '../../services/actions/constructor';\nimport { TIngredient } from '../../utils/types';\n\nfunction calculateTotalPrice(order: TIngredient[] | undefined) {\n  if (!order) {\n    return 0;\n  }\n  return order.reduce((sum: number, item: TIngredient) => sum + item.price, 0);\n}\n\nconst BurgerConstructor: FC = () => {\n  const history: History = useHistory();\n\n  const isLogged = useSelector((store) => store.user.isLogged);\n  const ingredients = useSelector((store) => store.constructor.ingredientsConstructor);\n  const { orderRequest, orderFailed } = useSelector((store) => store.order);\n\n  const dispatch = useDispatch();\n\n  const totalPrice = React.useMemo(() => calculateTotalPrice(ingredients), [ingredients]);\n\n  const bunIngredient = ingredients?.filter((item: TIngredient) => item.type === 'bun')[0];\n  const otherIngredients = ingredients?.filter((item: TIngredient) => item.type !== 'bun');\n\n  React.useEffect(() => {\n    if (ingredients) {\n      setTotalPrice(totalPrice);\n    }\n    if (orderFailed) {\n      dispatch(resetIngredients());\n    }\n  }, [dispatch, ingredients, orderFailed, totalPrice]);\n\n  const handleDeleteIngredient = React.useCallback(\n    (uid: string | undefined) => {\n      dispatch(deleteIngredient(uid));\n    },\n    [dispatch],\n  );\n\n  const makeOrder = React.useCallback(() => {\n    if (ingredients && isLogged) {\n      const order: string[] = ingredients?.map((item: TIngredient) => item._id);\n      dispatch(postOrder(order));\n      dispatch(resetIngredients());\n    } else {\n      history.push({ pathname: '/login' });\n    }\n  }, [dispatch, ingredients, isLogged, history]);\n\n  const handleMoveIngredient = React.useCallback(\n    (sourceIndex, targetIndex) => {\n      dispatch(moveIngredient(sourceIndex, targetIndex));\n    },\n    [dispatch],\n  );\n\n  const handleDrop = (ingredient: TIngredient) => {\n    if (ingredient.type === 'bun' && bunIngredient) {\n      dispatch(deleteIngredient(bunIngredient.uid));\n    }\n    dispatch(addIngredient(ingredient, uuid()));\n  };\n\n  const [, dropTarget] = useDrop({\n    accept: 'ingredients',\n    drop: (ingredient: TIngredient) => {\n      handleDrop(ingredient);\n    },\n  });\n\n  const containerStyle = `${ingredients && style.container}\n                          ${(!ingredients || ingredients?.length < 1) && style.emptyContainer}`;\n  const mainContainerStyle = `${otherIngredients && style.main}\n                              ${!otherIngredients && style.main}\n                              ${bunIngredient && otherIngredients?.length < 1 && style.mainEmpty}`;\n  const itemContainerStyle = `${!ingredients && style.item_container}\n                              ${otherIngredients?.length > 0 && !bunIngredient && style.itemContainerEmpty}`;\n\n  const otherIngredientsElements = React.useMemo(\n    () =>\n      otherIngredients?.map((item, index) => (\n        <ConstructorIngredient\n          index={index}\n          item={item}\n          key={item.uid}\n          onMove={handleMoveIngredient}\n          // eslint-disable-next-line react-perf/jsx-no-new-function-as-prop\n          onDelete={() => {\n            handleDeleteIngredient(item.uid);\n          }}\n        />\n      )),\n    [otherIngredients, handleMoveIngredient, handleDeleteIngredient],\n  );\n\n  return (\n    <section className={style.wrapper}>\n      <div className={containerStyle} ref={dropTarget} data-test=\"constructor\">\n        <div className={`${itemContainerStyle} pl-8`}>\n          {otherIngredients?.length > 0 && !bunIngredient && (\n            <div>\n              <p className=\"text text_type_main-medium\">Выберите булочку</p>\n            </div>\n          )}\n          {bunIngredient && (\n            <ConstructorElement\n              key={bunIngredient.uid}\n              text={`${bunIngredient.name} \\n(верх)`}\n              type=\"top\"\n              isLocked\n              price={bunIngredient.price}\n              thumbnail={bunIngredient.image}\n            />\n          )}\n        </div>\n        <div className={mainContainerStyle}>\n          {(!otherIngredients || otherIngredients?.length < 1) && (\n            <div>\n              <p className=\"text text_type_main-medium\">Перетащите ингридиенты сюда</p>\n            </div>\n          )}\n          {otherIngredients && otherIngredients?.length > 0 && (\n            <div className={style.scrolled}>{otherIngredientsElements}</div>\n          )}\n        </div>\n        <div className={`${itemContainerStyle} pl-8`}>\n          {otherIngredients?.length > 0 && !bunIngredient && (\n            <div>\n              <p className=\"text text_type_main-medium\">Выберите булочку</p>\n            </div>\n          )}\n          {bunIngredient && (\n            <ConstructorElement\n              key={bunIngredient.uid}\n              text={`${bunIngredient.name} \\n(низ)`}\n              type=\"bottom\"\n              isLocked\n              price={bunIngredient.price}\n              thumbnail={bunIngredient.image}\n            />\n          )}\n        </div>\n      </div>\n      <div className={style.total_container}>\n        <div className={style.price_value}>\n          <p className=\"text text_type_digits-medium\" data-test=\"total-price\">\n            {totalPrice}\n          </p>\n        </div>\n        <div className={style.currency_container}>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <Button\n          type=\"primary\"\n          size=\"large\"\n          onClick={makeOrder}\n          disabled={orderRequest || !bunIngredient || !otherIngredients || otherIngredients?.length < 1}\n        >\n          {orderRequest ? 'Заказ готовится' : 'Оформить заказ'}\n        </Button>\n      </div>\n    </section>\n  );\n};\n\nexport default BurgerConstructor;\n","import { getIngredientsRequest } from '../../utils/fetch_api';\nimport { TIngredient } from '../../utils/types';\n// eslint-disable-next-line import/no-cycle\nimport { AppDispatch, AppThunk } from '../types';\n\nexport const GET_INGREDIENTS_REQUEST = 'GET_INGREDIENTS_REQUEST' as const;\nexport const GET_INGREDIENTS_SUCCESS = 'GET_INGREDIENTS_SUCCESS' as const;\nexport const GET_INGREDIENTS_FAILED = 'GET_INGREDIENTS_FAILED' as const;\nexport const OPEN_INGREDIENT = 'OPEN_INGREDIENT' as const;\nexport const CLOSE_INGREDIENT = 'CLOSE_INGREDIENT' as const;\n\nexport interface TGetIngredientsRequest {\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\n}\n\nexport interface TGetIngredientsSuccess {\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\n  readonly ingredients: TIngredient[];\n}\n\nexport interface TGetIngredientsFailed {\n  readonly type: typeof GET_INGREDIENTS_FAILED;\n}\n\nexport interface TOpenIngredient {\n  readonly type: typeof OPEN_INGREDIENT;\n  readonly currentIngredient: TIngredient;\n}\n\nexport interface TCloseIngredient {\n  readonly type: typeof CLOSE_INGREDIENT;\n}\n\nexport type TIngredientsActions =\n  | TGetIngredientsRequest\n  | TGetIngredientsSuccess\n  | TGetIngredientsFailed\n  | TOpenIngredient\n  | TCloseIngredient;\n\nexport const getIngredients: AppThunk = () => (dispatch: AppDispatch) => {\n  dispatch({\n    type: GET_INGREDIENTS_REQUEST,\n  });\n  getIngredientsRequest()\n    .then((response) => {\n      dispatch({\n        type: GET_INGREDIENTS_SUCCESS,\n        ingredients: response.data,\n      });\n    })\n    .catch((e) => {\n      console.error(e);\n      dispatch({\n        type: GET_INGREDIENTS_FAILED,\n      });\n    });\n};\n\n/* eslint arrow-body-style: 0 */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const openModalIngredient = (currentIngredientID: string) => ({\n  type: OPEN_INGREDIENT,\n  currentIngredient: currentIngredientID,\n});\n\nexport const closeModalIngredient = (): TCloseIngredient => ({\n  type: CLOSE_INGREDIENT,\n});\n","import React from 'react';\nimport { useDrag } from 'react-dnd';\nimport { useLocation, Link } from 'react-router-dom';\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { TIngredient } from '../../utils/types';\nimport style from './ingredient-card.module.css';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { openModalIngredient } from '../../services/actions/ingredients';\n\nconst IngredientCard: React.FC<{ ingredient: TIngredient }> = ({ ingredient }) => {\n  const order: TIngredient[] | null = useSelector((store) => store.constructor.ingredientsConstructor);\n\n  const dispatch = useDispatch();\n\n  const location = useLocation<Location>();\n\n  const [, dragRef] = useDrag({\n    type: 'ingredients',\n    item: ingredient,\n  });\n\n  const openIngredientsDetail = React.useCallback(\n    (ingredientID: string) => {\n      dispatch(openModalIngredient(ingredientID));\n    },\n    [dispatch],\n  );\n\n  const handleOpenDetail = React.useCallback(() => openIngredientsDetail, [openIngredientsDetail]);\n\n  const path = React.useMemo(() => ({ pathname: `/ingredients/${ingredient._id}`, state: { background: location } }), [\n    ingredient._id,\n    location,\n  ]);\n\n  const count = order?.filter((item: TIngredient) => item._id === ingredient._id).length;\n\n  return (\n    <Link to={path} onClick={handleOpenDetail} className={style.link}>\n      <div className={style.container} ref={dragRef} data-test={ingredient._id}>\n        <div className={style.image_container}>\n          <img src={ingredient.image} alt={ingredient.name} />\n          <div className={style.counter}>{count > 0 && <Counter count={count} size=\"default\" />}</div>\n        </div>\n        <div className={style.price_container}>\n          <div className={style.price_value}>\n            <p className=\"text text_type_digits-default\">{ingredient.price}</p>\n          </div>\n          <div className={style.icon}>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n        </div>\n        <div className={style.name_container}>\n          <p className={`text text_type_main-small ${style.name_text}`}>{ingredient.name}</p>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default IngredientCard;\n","import React from 'react';\n\nimport IngredientCard from '../ingredient-card/ingredient-card';\nimport style from './ingredients-tab.module.css';\nimport { TIngredient } from '../../utils/types';\n\ntype TIngredientTab = {\n  ingredients: Array<TIngredient>;\n  title: string;\n};\n\nconst IngredientsTab = React.forwardRef<HTMLDivElement, TIngredientTab>(({ ingredients, title }, ref) => (\n  <div ref={ref}>\n    <div className={style.tab_name}>\n      <p className=\"text text_type_main-medium\">{title}</p>\n    </div>\n    <div className={style.two_column}>\n      {ingredients.map((item: TIngredient) => (\n        <IngredientCard key={item._id} ingredient={item} />\n      ))}\n    </div>\n  </div>\n));\n\nIngredientsTab.displayName = 'IngredientsTab';\n\nexport default IngredientsTab;\n","import React, { SyntheticEvent } from 'react';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from './burger-ingredients.module.css';\nimport IngredientsTab from '../ingredients-tab/ingredients-tab';\nimport { useSelector } from '../../services/types/hooks';\nimport { TIngredient } from '../../utils/types';\n\nconst BurgerIngredients: React.FunctionComponent = () => {\n  const ingredients: TIngredient[] = useSelector((store) => store?.ingredients.ingredients);\n\n  // current tab\n  const [current, setCurrent] = React.useState<string>('bun');\n\n  // ref's\n  const refBun = React.useRef<HTMLDivElement | null>(null);\n  const refMain = React.useRef<HTMLDivElement | null>(null);\n  const refSauces = React.useRef<HTMLDivElement | null>(null);\n\n  // array's of ingredient filtered by type\n  const bunIngredients: TIngredient[] = ingredients.filter((item: TIngredient) => item.type === 'bun');\n  const sauceIngredients: TIngredient[] = ingredients.filter((item: TIngredient) => item.type === 'sauce');\n  const mainIngredients: TIngredient[] = ingredients.filter((item: TIngredient) => item.type === 'main');\n\n  const scrollToTab = React.useCallback((value: string): void => {\n    setCurrent(value);\n    switch (value) {\n      case 'bun': {\n        refBun?.current?.scrollIntoView({ behavior: 'smooth' });\n        break;\n      }\n      case 'main': {\n        refMain?.current?.scrollIntoView({ behavior: 'smooth' });\n        break;\n      }\n      case 'sauce': {\n        refSauces?.current?.scrollIntoView({ behavior: 'smooth' });\n        break;\n      }\n      default: {\n        break;\n      }\n    }\n  }, []);\n\n  const focusCurrentTab = React.useCallback((e: SyntheticEvent) => {\n    if (\n      refBun &&\n      refBun?.current?.offsetHeight &&\n      Number(e?.currentTarget?.scrollTop) - refBun.current.offsetHeight < 0\n    ) {\n      setCurrent('bun');\n    } else if (\n      refSauces?.current?.offsetHeight &&\n      refBun?.current?.offsetHeight &&\n      Number(e?.currentTarget?.scrollTop) - refSauces.current.offsetHeight - refBun.current.offsetHeight < 0\n    ) {\n      setCurrent('sauce');\n    } else {\n      setCurrent('main');\n    }\n  }, []);\n\n  return (\n    <section className={style.container}>\n      <div className={style.title_container}>\n        <p className={`text text_type_main-large ${style.title_text}`}>Соберите бургер</p>\n      </div>\n      <div className={style.tab} data-test=\"tabs\">\n        <Tab value=\"bun\" active={current === 'bun'} onClick={scrollToTab}>\n          Булки\n        </Tab>\n        <Tab value=\"sauce\" active={current === 'sauce'} onClick={scrollToTab}>\n          Соусы\n        </Tab>\n        <Tab value=\"main\" active={current === 'main'} onClick={scrollToTab}>\n          Начинки\n        </Tab>\n      </div>\n      <div className={style.scrolled} onScroll={focusCurrentTab}>\n        <IngredientsTab title=\"Булки\" ingredients={bunIngredients} ref={refBun} />\n        <IngredientsTab title=\"Соусы\" ingredients={sauceIngredients} ref={refSauces} />\n        <IngredientsTab title=\"Начинки\" ingredients={mainIngredients} ref={refMain} />\n      </div>\n    </section>\n  );\n};\n\nexport default BurgerIngredients;\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport style from './ingredient-details.module.css';\nimport { useSelector } from '../../services/types/hooks';\nimport { TIngredient } from '../../utils/types';\n\nexport default function IngredientDetails(): JSX.Element | null {\n  const params = useParams<{ id: string }>();\n\n  const ingredients: TIngredient[] = useSelector((store) => store.ingredients.ingredients);\n\n  const currentIngredient: TIngredient | undefined = ingredients?.find((item: TIngredient) => item._id === params.id);\n\n  React.useEffect(() => {}, [ingredients]);\n\n  if (ingredients.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className={style.image_container}>\n        <img src={currentIngredient?.image_large} alt={currentIngredient?.name} />\n      </div>\n      <div className={style.name_container}>\n        <p className=\"text text_type_main-medium\">{currentIngredient?.name}</p>\n      </div>\n      <div className={style.property_container}>\n        <div className={style.property_item}>\n          <p className=\"text text_type_main-default text_color_inactive\">Калории, ккал</p>\n          <p className={`text text_type_digits-default ${style.property_value}`}>{currentIngredient?.calories}</p>\n        </div>\n        <div className={style.property_item}>\n          <p className=\"text text_type_main-default text_color_inactive\">Белки, г</p>\n          <p className={`text text_type_digits-default ${style.property_value}`}>{currentIngredient?.proteins}</p>\n        </div>\n        <div className={style.property_item}>\n          <p className=\"text text_type_main-default text_color_inactive\">Жиры, г</p>\n          <p className={`text text_type_digits-default ${style.property_value}`}>{currentIngredient?.fat}</p>\n        </div>\n        <div className={style.property_item}>\n          <p className=\"text text_type_main-default text_color_inactive\">Углеводы, г</p>\n          <p className={`text text_type_digits-default ${style.property_value}`}>{currentIngredient?.carbohydrates}</p>\n        </div>\n      </div>\n    </>\n  );\n}\n","var _path, _path2, _path3, _path4, _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDone(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 107,\n    height: 102,\n    viewBox: \"0 0 107 102\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M8.36637 37.3873C2.54454 45.5044 2.54455 56.4957 8.36637 64.6127L28.3336 92.4518C34.1554 100.569 44.4748 103.965 53.8947 100.865L86.2023 90.2313C95.6223 87.1309 102 78.2387 102 68.2055V33.7945C102 23.7612 95.6222 14.8691 86.2023 11.7687L53.8947 1.13508C44.4748 -1.96536 34.1554 1.43114 28.3336 9.54819L8.36637 37.3873Z\",\n    fill: \"url(#paint0_radial_311_23)\",\n    fillOpacity: 0.25\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M103.944 39.453C108.019 46.5983 108.019 55.4017 103.944 62.547L88.5996 89.453C84.5247 96.5983 76.994 101 68.8442 101H38.1558C30.006 101 22.4753 96.5983 18.4004 89.453L3.05617 62.547C-1.01872 55.4017 -1.01872 46.5983 3.05617 39.453L18.4004 12.547C22.4753 5.40169 30.006 1 38.1558 1L68.8442 1C76.994 1 84.5247 5.40169 88.5996 12.547L103.944 39.453Z\",\n    fill: \"url(#paint1_radial_311_23)\",\n    fillOpacity: 0.25\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M43.9249 20.9109C49.3362 17.0297 56.6638 17.0297 62.0751 20.9109L80.6345 34.2224C86.0459 38.1036 88.3102 44.9832 86.2433 51.2632L79.1542 72.8016C77.0873 79.0815 71.1592 83.3333 64.4703 83.3333H41.5296C34.8408 83.3333 28.9127 79.0815 26.8458 72.8016L19.7567 51.2632C17.6898 44.9832 19.9541 38.1036 25.3655 34.2224L43.9249 20.9109Z\",\n    fill: \"url(#paint2_radial_311_23)\",\n    fillOpacity: 0.25\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M73.3122 37.5959C74.1999 38.4172 74.2327 39.7806 73.3852 40.641L50.0519 64.3333C49.6272 64.7646 49.0371 65.0059 48.422 64.9999C47.8069 64.9939 47.222 64.741 46.8063 64.3016L34.5841 51.3785C33.7548 50.5016 33.8159 49.1392 34.7206 48.3354C35.6253 47.5316 37.031 47.5908 37.8604 48.4677L48.4773 59.6934L70.1703 37.6667C71.0177 36.8062 72.4244 36.7745 73.3122 37.5959Z\",\n    fill: \"#F2F2F3\"\n  })), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint0_radial_311_23\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53 51) rotate(-46.1458) scale(70.7248 53.2019)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\"\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint1_radial_311_23\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53.5 51) rotate(-43.0632) scale(73.2274 55.0025)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\"\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint2_radial_311_23\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53 50.6667) rotate(136.146) scale(47.1499 35.4679)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\",\n    stopOpacity: 0.5\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDone);\nexport default __webpack_public_path__ + \"static/media/done.6d4020a5.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport style from './order-details.module.css';\nimport { ReactComponent as DoneIcon } from '../../images/done.svg';\n\nconst OrderDetails: React.FC<{ orderNumber: number }> = ({ orderNumber }) => (\n  <>\n    <div className={style.order_id_container}>\n      <p className={`text text_type_digits-large ${style.order_id}`}>{orderNumber}</p>\n    </div>\n    <div className={style.popup_text}>\n      <p className=\"text text_type_main-medium\">идентификатор заказа</p>\n    </div>\n    <div className={style.done_icon}>\n      <DoneIcon />\n    </div>\n    <div className={style.popup_text}>\n      <p className=\"text text_type_main-default\">Ваш заказ начали готовить</p>\n    </div>\n    <div className={`mb-30 ${style.popup_text}`}>\n      <p className=\"text text_type_main-default text_color_inactive\">Дождитесь готовности на орбитальной станции</p>\n    </div>\n  </>\n);\n\nexport default OrderDetails;\n","import React from 'react';\nimport style from './modal-overlay.module.css';\n\nconst ModalOverlay: React.FC<{ onClose: () => void }> = ({ onClose }) => (\n  <button type=\"button\" className={style.modalOverlay} onClick={onClose} />\n);\n\nexport default ModalOverlay;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { useParams, useRouteMatch } from 'react-router-dom';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './modal.module.css';\nimport ModalOverlay from '../modal-overlay/modal-overlay';\nimport { useSelector } from '../../services/types/hooks';\n\ntype TModalTypes = {\n  onClose: () => void;\n  title: string | undefined;\n};\n\nconst Modal: React.FC<TModalTypes> = ({ onClose, title, children }) => {\n  const { id } = useParams<{ id: string }>();\n\n  const allOrders = useSelector((store) => store.feed.orders);\n  const userOrders = useSelector((store) => store.feed.userOrders);\n\n  const isFeedOrder = useRouteMatch({ path: '/order-feed' });\n  const feedOrderNumber = isFeedOrder && allOrders.find((item) => item._id === id)?.number;\n\n  const isProfileOrders = useRouteMatch({ path: '/profile/orders' });\n  const profileOrderNumber = isProfileOrders && userOrders.find((item) => item._id === id)?.number;\n\n  const orderNumber = feedOrderNumber || profileOrderNumber;\n\n  React.useEffect(() => {\n    const closeModal = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' || e.keyCode === 27) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', closeModal);\n    return () => {\n      document.removeEventListener('keydown', closeModal);\n    };\n  }, [onClose]);\n\n  return ReactDOM.createPortal(\n    <>\n      <div className={style.popup_container} data-test=\"modal\">\n        <div className={style.title_container}>\n          {title && <p className=\"text text_type_main-large\">{title}</p>}\n          {orderNumber && <p className=\"text text_type_digits-default\">#{orderNumber}</p>}\n          <div className={style.icon_container} data-test=\"close-modal\">\n            <CloseIcon type=\"primary\" onClick={onClose} />\n          </div>\n        </div>\n        {children}\n      </div>\n      <ModalOverlay onClose={onClose} />\n    </>,\n    document.getElementById('modal') as HTMLElement,\n  );\n};\n\nexport default Modal;\n","import {\n  registrationUserRequest,\n  forgotPasswordRequest,\n  resetPasswordRequest,\n  loginRequest,\n  logoutRequest,\n  getUserRequest,\n  refreshTokenRequest,\n  updateUserRequest,\n} from '../../utils/fetch_api';\n\n/* eslint import/no-cycle: 0 */\nimport { AppDispatch, AppThunk } from '../types';\nimport { setCookie, deleteCookie } from '../../utils/cookie_handlers';\nimport { TUser } from '../../utils/types';\n\n// регистрация нового пользователя\nexport const REGISTRATION_REQUEST = 'REGISTRATION_REQUEST' as const;\nexport const REGISTRATION_SUCCESS = 'REGISTRATION_SUCCESS' as const;\nexport const REGISTRATION_FAILED = 'REGISTRATION_FAILED' as const;\n\n// вход\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST' as const;\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS' as const;\nexport const LOGIN_FAILED = 'LOGIN_FAILED' as const;\n\n// выход\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST' as const;\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS' as const;\nexport const LOGOUT_FAILED = 'LOGOUT_FAILED' as const;\n\n// отправка емейла для восстановления пароля\nexport const FORGOT_PASSWORD_REQUEST = 'FORGOT_PASSWORD_REQUEST' as const;\nexport const FORGOT_PASSWORD_SUCCESS = 'FORGOT_PASSWORD_SUCCESS' as const;\nexport const FORGOT_PASSWORD_FAILED = 'FORGOT_PASSWORD_FAILED' as const;\n\n// сброс и восстановление пароля\nexport const RESET_PASSWORD_REQUEST = 'RESET_PASSWORD_REQUEST' as const;\nexport const RESET_PASSWORD_SUCCESS = 'RESET_PASSWORD_SUCCESS' as const;\nexport const RESET_PASSWORD_FAILED = 'RESET_PASSWORD_FAILED' as const;\n\n// обновление данных о пользователе\nexport const UPDATE_USER_REQUEST = 'UPDATE_USER_REQUEST' as const;\nexport const UPDATE_USER_SUCCESS = 'UPDATE_USER_SUCCESS' as const;\nexport const UPDATE_USER_FAILED = 'UPDATE_USER_FAILED' as const;\n\n// получение данных о юзере\nexport const GET_USER_REQUEST = 'GET_USER_REQUEST' as const;\nexport const GET_USER_SUCCESS = 'GET_USER_SUCCESS' as const;\nexport const GET_USER_FAILED = 'GET_USER_FAILED' as const;\n\n// обновление токена\nexport const REFRESH_TOKEN_REQUEST = 'REFRESH_TOKEN_REQUEST' as const;\nexport const REFRESH_TOKEN_SUCCESS = 'REFRESH_TOKEN_SUCCESS' as const;\nexport const REFRESH_TOKEN_FAILED = 'REFRESH_TOKEN_FAILED' as const;\n\nexport interface IRegistrationRequest {\n  readonly type: typeof REGISTRATION_REQUEST;\n}\n\nexport interface IRegistrationSuccess {\n  readonly type: typeof REGISTRATION_SUCCESS;\n  readonly user: TUser;\n}\n\nexport interface IRegistrationFailed {\n  readonly type: typeof REGISTRATION_FAILED;\n}\n\nexport interface ILoginRequest {\n  readonly type: typeof LOGIN_REQUEST;\n}\n\nexport interface ILoginSuccess {\n  readonly type: typeof LOGIN_SUCCESS;\n  readonly user: TUser;\n}\n\nexport interface ILoginFailed {\n  readonly type: typeof LOGIN_FAILED;\n}\n\nexport interface IForgotPasswordRequest {\n  readonly type: typeof FORGOT_PASSWORD_REQUEST;\n}\n\nexport interface IForgotPasswordSuccess {\n  readonly type: typeof FORGOT_PASSWORD_SUCCESS;\n}\n\nexport interface IForgotPasswordFailed {\n  readonly type: typeof FORGOT_PASSWORD_FAILED;\n}\n\nexport interface IResetPasswordRequest {\n  readonly type: typeof RESET_PASSWORD_REQUEST;\n}\n\nexport interface IResetPasswordSuccess {\n  readonly type: typeof RESET_PASSWORD_SUCCESS;\n}\n\nexport interface IResetPasswordFailed {\n  readonly type: typeof RESET_PASSWORD_FAILED;\n}\n\nexport interface ILogoutRequest {\n  readonly type: typeof LOGOUT_REQUEST;\n}\n\nexport interface ILogoutSuccess {\n  readonly type: typeof LOGOUT_SUCCESS;\n}\n\nexport interface ILogoutFailed {\n  readonly type: typeof LOGOUT_FAILED;\n}\n\nexport interface IRefreshTokenRequest {\n  readonly type: typeof REFRESH_TOKEN_REQUEST;\n}\n\nexport interface IRefreshTokenSuccess {\n  readonly type: typeof REFRESH_TOKEN_SUCCESS;\n}\n\nexport interface IRefreshTokenFailed {\n  readonly type: typeof REFRESH_TOKEN_FAILED;\n}\n\nexport interface IUpdateUserRequest {\n  readonly type: typeof UPDATE_USER_REQUEST;\n}\n\nexport interface IUpdateUserSuccess {\n  readonly type: typeof UPDATE_USER_SUCCESS;\n  readonly user: TUser;\n}\n\nexport interface IUpdateUserFailed {\n  readonly type: typeof UPDATE_USER_FAILED;\n}\n\nexport interface IGetUserRequest {\n  readonly type: typeof GET_USER_REQUEST;\n}\n\nexport interface IGetUserSuccess {\n  readonly type: typeof GET_USER_SUCCESS;\n  readonly user: TUser;\n}\n\nexport interface IGetUserFailed {\n  readonly type: typeof GET_USER_FAILED;\n}\n\nexport type TUserActions =\n  | IRegistrationRequest\n  | IRegistrationSuccess\n  | IRegistrationFailed\n  | ILoginRequest\n  | ILoginSuccess\n  | ILoginFailed\n  | IForgotPasswordRequest\n  | IForgotPasswordSuccess\n  | IForgotPasswordFailed\n  | IResetPasswordRequest\n  | IResetPasswordSuccess\n  | IResetPasswordFailed\n  | ILogoutRequest\n  | ILogoutSuccess\n  | ILogoutFailed\n  | IRefreshTokenRequest\n  | IRefreshTokenSuccess\n  | IRefreshTokenFailed\n  | IUpdateUserRequest\n  | IUpdateUserSuccess\n  | IUpdateUserFailed\n  | IGetUserRequest\n  | IGetUserSuccess\n  | IGetUserFailed;\n\nexport const registrationUser: AppThunk = (email: string, password: string, name: string) => (\n  dispatch: AppDispatch,\n) => {\n  dispatch({ type: REGISTRATION_REQUEST });\n\n  registrationUserRequest(email, password, name)\n    .then((resp) => {\n      if (resp.success) {\n        setCookie('token', resp.accessToken);\n        localStorage.setItem('refreshToken', resp.refreshToken);\n        dispatch({\n          type: REGISTRATION_SUCCESS,\n          user: resp.user,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      dispatch({\n        type: REGISTRATION_FAILED,\n      });\n    });\n};\n\nexport const forgotPassword: AppThunk = (email: string) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: FORGOT_PASSWORD_REQUEST,\n  });\n\n  forgotPasswordRequest(email)\n    .then((resp) => {\n      if (resp.success) {\n        dispatch({\n          type: FORGOT_PASSWORD_SUCCESS,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      dispatch({\n        type: FORGOT_PASSWORD_FAILED,\n      });\n    });\n};\n\nexport const resetPassword: AppThunk = (newPassword: string, code: string) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: RESET_PASSWORD_REQUEST,\n  });\n\n  resetPasswordRequest(newPassword, code)\n    .then((resp) => {\n      if (resp.success) {\n        dispatch({\n          type: RESET_PASSWORD_SUCCESS,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      dispatch({\n        type: RESET_PASSWORD_FAILED,\n      });\n    });\n};\n\nexport const login: AppThunk = (email: string, password: string) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: LOGIN_REQUEST,\n  });\n\n  loginRequest(email, password)\n    .then((resp) => {\n      if (resp.success) {\n        setCookie('token', resp.accessToken);\n        localStorage.setItem('refreshToken', resp.refreshToken);\n\n        dispatch({\n          type: LOGIN_SUCCESS,\n          user: resp.user,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n\n      dispatch({\n        type: LOGIN_FAILED,\n      });\n    });\n};\n\nexport const logout: AppThunk = () => (dispatch: AppDispatch) => {\n  dispatch({\n    type: LOGOUT_REQUEST,\n  });\n\n  logoutRequest()\n    .then((resp) => {\n      if (resp.success) {\n        localStorage.removeItem('refreshToken');\n        deleteCookie('token');\n        dispatch({\n          type: LOGOUT_SUCCESS,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n\n      dispatch({\n        type: LOGOUT_FAILED,\n      });\n    });\n};\n\nexport const updateToken: AppThunk = () => (dispatch: AppThunk) => {\n  dispatch({\n    type: REFRESH_TOKEN_REQUEST,\n  });\n  refreshTokenRequest()\n    .then((resp) => {\n      if (resp.success) {\n        setCookie('token', resp.accessToken);\n        localStorage.setItem('refreshToken', resp.refreshToken);\n        dispatch({\n          type: REFRESH_TOKEN_SUCCESS,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      dispatch({\n        type: REFRESH_TOKEN_FAILED,\n      });\n    });\n};\n\nexport const getUser: AppThunk = () => (dispatch: AppDispatch) => {\n  dispatch({\n    type: GET_USER_REQUEST,\n  });\n\n  getUserRequest()\n    .then((resp) => {\n      if (resp.success) {\n        dispatch({\n          type: GET_USER_SUCCESS,\n          user: resp.user,\n        });\n        dispatch({\n          type: LOGIN_SUCCESS,\n          user: resp.user,\n        });\n      }\n    })\n    .catch(() => {\n      if (localStorage.getItem('refreshToken')) {\n        updateToken();\n      } else {\n        dispatch({\n          type: GET_USER_FAILED,\n        });\n      }\n    });\n};\n\nexport const updateUser: AppThunk = (email: string, name: string) => (dispatch: AppDispatch): void => {\n  dispatch({\n    type: UPDATE_USER_REQUEST,\n  });\n  updateUserRequest(email, name)\n    .then((resp) => {\n      if (resp.success) {\n        dispatch({\n          type: UPDATE_USER_SUCCESS,\n          user: resp.user,\n        });\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      if (localStorage.getItem('refreshToken')) {\n        updateToken();\n        updateUser(email, name);\n      } else {\n        dispatch({\n          type: UPDATE_USER_FAILED,\n        });\n      }\n    });\n};\n","import React from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from '../index.module.css';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { login } from '../../services/actions/user';\n\nexport default function LoginPage(): JSX.Element {\n  const [email, setEmail] = React.useState<string>('');\n  const [password, setPassword] = React.useState<string>('');\n\n  const history = useHistory();\n  const from = useLocation<{ from: { pathname: string } }>().state?.from?.pathname;\n\n  const dispatch = useDispatch();\n  const isLogged = useSelector((store) => store.user.isLogged);\n  const loginFailed = useSelector((store) => store.user.loginFailed);\n\n  const onChangePassword = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  }, []);\n\n  const onChangeEmail = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(e.target.value);\n  }, []);\n\n  React.useEffect(() => {\n    if (isLogged) {\n      history.push({ pathname: from || '/' });\n    }\n  }, [history, isLogged, from]);\n\n  const handleSubmit = React.useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n\n      dispatch(login(email, password));\n    },\n    [dispatch, email, password],\n  );\n\n  return (\n    <main className={style.wrapper}>\n      <div className={style.container}>\n        <div className={style.title}>\n          <p className=\"text text_type_main-medium\">Вход</p>\n        </div>\n        <form className={style.form_container} onSubmit={handleSubmit}>\n          <div className={style.inputs_container}>\n            <Input\n              type=\"email\"\n              placeholder=\"E-mail\"\n              onChange={onChangeEmail}\n              value={email}\n              error={loginFailed}\n              errorText=\"Ошибка\"\n            />\n            <PasswordInput value={password} onChange={onChangePassword} name=\"\" />\n          </div>\n          <Button type=\"primary\" size=\"medium\">\n            Войти\n          </Button>\n        </form>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Вы - новый пользователь?{' '}\n          <Link to=\"/register\" className={style.link}>\n            Зарегистрироваться\n          </Link>\n        </p>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Забыли пароль?{' '}\n          <Link to=\"/forgot-password\" className={style.link}>\n            Восстановить пароль\n          </Link>\n        </p>\n      </div>\n    </main>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from '../index.module.css';\nimport { registrationUser } from '../../services/actions/user';\nimport { useDispatch } from '../../services/types/hooks';\n\nexport default function RegisterPage(): JSX.Element {\n  const [name, setName] = React.useState<string>('');\n  const [email, setEmail] = React.useState<string>('');\n  const [password, setPassword] = React.useState<string>('');\n\n  const dispatch = useDispatch();\n\n  const onChangeName = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n  }, []);\n\n  const onChangePassword = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  }, []);\n\n  const onChangeEmail = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(e.target.value);\n  }, []);\n\n  const handleSubmit = React.useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n\n      dispatch(registrationUser(email, password, name));\n    },\n    [dispatch, email, password, name],\n  );\n\n  return (\n    <main className={style.wrapper}>\n      <div className={style.container}>\n        <div className={style.title}>\n          <p className=\"text text_type_main-medium\">Регистрация</p>\n        </div>\n        <form className={style.form_container} onSubmit={handleSubmit}>\n          <div className={style.inputs_container}>\n            <Input placeholder=\"Имя\" onChange={onChangeName} value={name} />\n            <Input\n              type=\"email\"\n              placeholder=\"E-mail\"\n              onChange={onChangeEmail}\n              value={email}\n              error={false}\n              errorText=\"Ошибка\"\n            />\n            <PasswordInput value={password} onChange={onChangePassword} name=\"\" />\n          </div>\n          <Button type=\"primary\" size=\"medium\">\n            Зарегистрироваться\n          </Button>\n        </form>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Уже зарегистрированы?{' '}\n          <Link to=\"/login\" className={style.link}>\n            Войти\n          </Link>\n        </p>\n      </div>\n    </main>\n  );\n}\n","import React, { ChangeEvent } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport style from '../index.module.css';\nimport { forgotPassword } from '../../services/actions/user';\n\nexport default function ForgotPasswordPage(): JSX.Element {\n  const [email, setEmail] = React.useState<string>('');\n  const history = useHistory<{ from: string }>();\n\n  const dispatch = useDispatch();\n  const isLogged = useSelector((store) => store.user.isLogged);\n\n  const onChangeEmail = React.useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setEmail(e.target.value);\n  }, []);\n\n  const handleSubmit = React.useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      dispatch(forgotPassword(email));\n      history.push({ pathname: '/reset-password', state: { from: history.location.pathname } });\n    },\n    [dispatch, history, email],\n  );\n\n  if (isLogged) {\n    history.push({ pathname: '/' });\n  }\n\n  return (\n    <main className={style.wrapper}>\n      <div className={style.container}>\n        <div className={style.title}>\n          <p className=\"text text_type_main-medium\">Забыли пароль?</p>\n        </div>\n        <form className={style.form_container} onSubmit={handleSubmit}>\n          <div className={style.inputs_container}>\n            <Input\n              type=\"email\"\n              placeholder=\"Укажите e-mail\"\n              onChange={onChangeEmail}\n              value={email}\n              error={false}\n              errorText=\"Ошибка\"\n            />\n          </div>\n          <Button type=\"primary\" size=\"medium\">\n            Восстановить\n          </Button>\n        </form>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Вспомнили пароль?{' '}\n          <Link to=\"/login\" className={style.link}>\n            Войти\n          </Link>\n        </p>\n      </div>\n    </main>\n  );\n}\n","import React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from '../index.module.css';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { resetPassword } from '../../services/actions/user';\n\nexport default function ResetPasswordPage(): JSX.Element {\n  const [newPassword, setPassword] = React.useState<string>('');\n  const [code, setCode] = React.useState<string>('');\n\n  const dispatch = useDispatch();\n\n  const history = useHistory<{ from: string }>();\n  const prevPage: string = history.location.state?.from;\n\n  const isLogged = useSelector((store) => store.user.isLogged);\n\n  const onChangePassword = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  }, []);\n\n  const onChangeCode = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setCode(e.target.value);\n  }, []);\n\n  const handleSubmit = React.useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n\n      dispatch(resetPassword(newPassword, code));\n      history.push({ pathname: '/login' });\n    },\n    [dispatch, newPassword, code, history],\n  );\n\n  if (!prevPage) {\n    history.push({ pathname: '/login' });\n  }\n\n  if (isLogged) {\n    history.push({ pathname: '/' });\n  }\n\n  return (\n    <main className={style.wrapper}>\n      <div className={style.container}>\n        <div className={style.title}>\n          <p className=\"text text_type_main-medium\">Восстановление пароля</p>\n        </div>\n        <form className={style.form_container} onSubmit={handleSubmit}>\n          <div className={style.inputs_container}>\n            <Input type=\"password\" placeholder=\"Введите новый пароль\" value={newPassword} onChange={onChangePassword} />\n            <Input placeholder=\"Введите код из письма\" value={code} onChange={onChangeCode} />\n          </div>\n          <Button type=\"primary\" size=\"medium\">\n            Сохранить\n          </Button>\n        </form>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Вспомнили пароль?{' '}\n          <Link to=\"/login\" className={style.link}>\n            Войти\n          </Link>\n        </p>\n      </div>\n    </main>\n  );\n}\n","import React from 'react';\nimport { ExtractRouteParams } from 'react-router';\nimport { NavLink, useRouteMatch } from 'react-router-dom';\n\nimport style from './nav-profile.module.css';\nimport { logout } from '../../services/actions/user';\nimport { useDispatch } from '../../services/types/hooks';\n\ntype TMatchProfilePage = ExtractRouteParams<'/profile'>;\n\nexport default function NavProfile(): JSX.Element {\n  const { url } = useRouteMatch();\n  const isProfilePage = useRouteMatch<TMatchProfilePage>('/profile');\n  const dispatch = useDispatch();\n\n  const logoutHandler = React.useCallback(() => {\n    dispatch(logout());\n  }, [dispatch]);\n\n  return (\n    <nav className={style.nav_container}>\n      <ul>\n        <li>\n          <NavLink exact to={url} className={style.nav_link} activeClassName={style.active_nav_link}>\n            Профиль\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to={`${url}/orders`} className={style.nav_link} activeClassName={style.active_nav_link}>\n            История заказов\n          </NavLink>\n        </li>\n        <li>\n          <button type=\"button\" className={style.button} onClick={logoutHandler}>\n            Выход\n          </button>\n        </li>\n      </ul>\n      <p className=\"text text_type_main-default text_color_inactive pt-20\">\n        {isProfilePage?.isExact\n          ? 'В этом разделе вы можете изменить свои персональные данные'\n          : 'В этом разделе вы можете просмотреть свою историю заказов'}\n      </p>\n    </nav>\n  );\n}\n","import React, { ChangeEvent } from 'react';\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport style from './profile-info.module.css';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { updateUser } from '../../services/actions/user';\n\nexport default function ProfileInfo(): JSX.Element {\n  const dispatch = useDispatch();\n  const { user } = useSelector((store) => store.user);\n\n  const [name, setName] = React.useState<string>('');\n  const [email, setEmail] = React.useState<string>('');\n  const [password, setPassword] = React.useState<string>('');\n  const [isChange, setIsChange] = React.useState<boolean>(false);\n\n  const onChangeName = React.useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsChange(true);\n    setName(e.target.value);\n  }, []);\n\n  const onChangePassword = React.useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsChange(true);\n    setPassword(e.target.value);\n  }, []);\n\n  const onChangeEmail = React.useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsChange(true);\n    setEmail(e.target.value);\n  }, []);\n\n  const resetUserInfo = React.useCallback(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email);\n      setIsChange(false);\n    }\n  }, [user]);\n\n  const updateUserInfo = React.useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      dispatch(updateUser(email, name));\n    },\n    [dispatch, email, name],\n  );\n\n  React.useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email);\n    }\n  }, [user]);\n\n  return (\n    <>\n      <form className={style.form_container} onSubmit={updateUserInfo}>\n        <div className={style.inputs_container}>\n          <Input\n            type=\"text\"\n            placeholder=\"Имя\"\n            onChange={onChangeName}\n            value={name}\n            error={false}\n            errorText=\"Ошибка\"\n            icon=\"EditIcon\"\n          />\n          <Input\n            type=\"email\"\n            placeholder=\"E-mail\"\n            onChange={onChangeEmail}\n            value={email}\n            error={false}\n            errorText=\"Ошибка\"\n            icon=\"EditIcon\"\n          />\n          <PasswordInput value={password} onChange={onChangePassword} name=\"\" />\n        </div>\n        <Button type=\"primary\" size=\"medium\" disabled={!isChange}>\n          Сохранить\n        </Button>\n      </form>\n      <Button type=\"secondary\" size=\"medium\" disabled={!isChange} onClick={resetUserInfo}>\n        Отмена\n      </Button>\n    </>\n  );\n}\n","import React from 'react';\n\nimport style from './ingredient-icon.module.css';\n\nconst IngredientIcon: React.FC<{ imageURL: string; last?: boolean; count?: number }> = ({ imageURL, last, count }) => {\n  const iconStyle: React.CSSProperties = React.useMemo(\n    () => ({\n      boxSizing: 'border-box',\n      width: '100%',\n      height: '56px',\n      backgroundImage: `url(${imageURL})`,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundRepeat: 'no-repeat',\n    }),\n    [imageURL],\n  );\n\n  return (\n    <div className={style.container}>\n      <div className={style.counter}>{count && `+${count}`}</div>\n      <div style={iconStyle} className={`${last && style.last}`} />\n    </div>\n  );\n};\n\nIngredientIcon.defaultProps = {\n  last: undefined,\n  count: undefined,\n};\n\nexport default IngredientIcon;\n","const weekDays = ['понедельник', 'вторник', 'среду', 'четверг', 'пятницу', 'субботу', 'воскресенье'];\n\nconst days = ['дней', 'день', 'дня', 'дня', 'дня', 'дней', 'дней', 'дней', 'дней', 'дней'];\n\nconst formatData = (date: string): string => {\n  const currentDate = new Date();\n  const orderDate = new Date(date);\n\n  const daysFromOrder: number = Math.floor((currentDate.getTime() - orderDate.getTime()) / 1000 / 3600 / 24);\n  const time = `${orderDate.getHours()}:${orderDate.getMinutes()}`;\n  const remains: number = daysFromOrder % 10;\n\n  if (daysFromOrder < 1) {\n    return `сегодня в ${time}`;\n  }\n  if (daysFromOrder < 2) {\n    return `вчера в ${time}`;\n  }\n  if (daysFromOrder < 7) {\n    return `в ${weekDays[orderDate.getDay() - 1]} в ${time}`;\n  }\n  if (daysFromOrder <= 20) {\n    return `${daysFromOrder} дней назад в ${time}`;\n  }\n  return `${daysFromOrder} ${days[remains]} назад в ${time}`;\n};\n\nexport default formatData;\n","import React from 'react';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Location } from 'history';\nimport { v4 as uuid } from 'uuid';\n\nimport { useSelector } from '../../services/types/hooks';\nimport style from './order-feed-item.module.css';\nimport { TOrder } from '../../utils/types';\nimport IngredientIcon from '../ingredient-icon/ingredient-icon';\nimport formatData from '../../utils/format-data';\n\ntype TOrderFeedItem = {\n  order: TOrder;\n  id: string;\n  isUserOrder: boolean;\n};\n\nconst ordersStatus = {\n  created: 'Создан',\n  pending: 'Готовится',\n  done: 'Выполнен',\n};\n\nconst OrderFeedItem: React.FC<TOrderFeedItem> = ({ order, id, isUserOrder }) => {\n  const location = useLocation<Location>();\n  const { ingredients } = useSelector((store) => store.ingredients);\n\n  const orderIngredients =\n    ingredients &&\n    order?.ingredients.map((item) => ingredients?.filter((allIngredientItem) => allIngredientItem._id === item)[0]);\n\n  const totalPrice = React.useMemo(\n    () => (orderIngredients ? orderIngredients.reduce((sum, current) => sum + (current?.price || 0), 0) : 0),\n    [orderIngredients],\n  );\n\n  const showIngredients = orderIngredients?.slice(0, 4);\n  const lastIngredient = orderIngredients?.slice(4, 5)[0];\n  const hiddenIngredientCount = orderIngredients.length > 5 ? orderIngredients.length - 5 : null;\n\n  const path = React.useMemo(() => ({ pathname: `${location.pathname}/${id}`, state: { background: location } }), [\n    location,\n    id,\n  ]);\n\n  return (\n    <Link to={path} className={style.item_container}>\n      <div className={style.info_container}>\n        <div>\n          <p className=\"text text_type_digits-default\">#{order.number}</p>\n        </div>\n        <div className={style.date_container}>\n          <p className=\"text text_type_main-default text_color_inactive\">{formatData(order.createdAt)}</p>\n        </div>\n      </div>\n      <div className={`${style.title_container} text text_type_main-medium`}>\n        {order.name}\n        {isUserOrder && (\n          <p className={`${style.order_status} ${order.status === 'done' && style.done}`}>\n            {ordersStatus[order.status]}\n          </p>\n        )}\n      </div>\n      <div className={style.ingredients_container}>\n        <ul className={style.icons_container}>\n          {hiddenIngredientCount && (\n            <IngredientIcon last count={hiddenIngredientCount} imageURL={lastIngredient.image_mobile} />\n          )}\n          {showIngredients.map((item) => (\n            <IngredientIcon key={uuid()} imageURL={item?.image_mobile} />\n          ))}\n        </ul>\n        <div className={style.total_price}>\n          <p className=\"text text_type_digits-default\">{totalPrice || 0}</p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default OrderFeedItem;\n","import { TOrders } from '../../utils/types';\n\nexport const WS_CONNECTION_START_ORDERS = 'WS_CONNECTION_START_ORDERS' as const;\nexport const WS_CONNECTION_SUCCESS_ORDERS = 'WS_CONNECTION_SUCCESS_ORDERS' as const;\nexport const WS_CONNECTION_ERROR_ORDERS = 'WS_CONNECTION_ERROR_ORDERS' as const;\nexport const WS_CONNECTION_CLOSED_ORDERS = 'WS_CONNECTION_CLOSED_ORDERS' as const;\nexport const WS_GET_ORDERS = 'WS_GET_ORDERS' as const;\n\nexport const WS_CONNECTION_START_ORDERS_USER = 'WS_CONNECTION_START_ORDERS_USER' as const;\nexport const WS_CONNECTION_SUCCESS_ORDERS_USER = 'WS_CONNECTION_SUCCESS_ORDERS_USER' as const;\nexport const WS_CONNECTION_ERROR_ORDERS_USER = 'WS_CONNECTION_ERROR_ORDERS_USER' as const;\nexport const WS_CONNECTION_CLOSED_ORDERS_USER = 'WS_CONNECTION_CLOSED_ORDERS_USER' as const;\nexport const WS_GET_ORDERS_USER = 'WS_GET_ORDERS_USER' as const;\n\nexport interface IWsConnectionStartOrdersAction {\n  readonly type: typeof WS_CONNECTION_START_ORDERS;\n}\n\nexport interface IWsConnectionSuccessOrdersAction {\n  readonly type: typeof WS_CONNECTION_SUCCESS_ORDERS;\n}\n\nexport interface IWsConnectionErrorOrdersAction {\n  readonly type: typeof WS_CONNECTION_ERROR_ORDERS;\n}\n\nexport interface IWsConnectionClosedOrdersAction {\n  readonly type: typeof WS_CONNECTION_CLOSED_ORDERS;\n}\n\nexport interface IWsGetOrdersAction {\n  readonly type: typeof WS_GET_ORDERS;\n  readonly orders: TOrders;\n}\n\nexport interface IWsConnectionStartOrdersUserAction {\n  readonly type: typeof WS_CONNECTION_START_ORDERS_USER;\n}\n\nexport interface IWsConnectionSuccessOrdersUserAction {\n  readonly type: typeof WS_CONNECTION_SUCCESS_ORDERS_USER;\n}\n\nexport interface IWsConnectionErrorOrdersUserAction {\n  readonly type: typeof WS_CONNECTION_ERROR_ORDERS_USER;\n}\n\nexport interface IWsConnectionClosedOrdersUserAction {\n  readonly type: typeof WS_CONNECTION_CLOSED_ORDERS_USER;\n}\n\nexport interface IWsGetOrdersUserAction {\n  readonly type: typeof WS_GET_ORDERS_USER;\n  readonly orders: TOrders;\n}\n\nexport type TFeedOrdersActions =\n  | IWsConnectionStartOrdersAction\n  | IWsConnectionSuccessOrdersAction\n  | IWsConnectionErrorOrdersAction\n  | IWsConnectionClosedOrdersAction\n  | IWsGetOrdersAction\n  | IWsConnectionStartOrdersUserAction\n  | IWsConnectionSuccessOrdersUserAction\n  | IWsConnectionErrorOrdersUserAction\n  | IWsConnectionClosedOrdersUserAction\n  | IWsGetOrdersUserAction;\n\nexport const wsConnectionStartOrdersAction = (): IWsConnectionStartOrdersAction => ({\n  type: WS_CONNECTION_START_ORDERS,\n});\n\nexport const wsConnectionSuccessOrdersAction = (): IWsConnectionSuccessOrdersAction => ({\n  type: WS_CONNECTION_SUCCESS_ORDERS,\n});\n\nexport const wsConnectionErrorOrdersAction = (): IWsConnectionErrorOrdersAction => ({\n  type: WS_CONNECTION_ERROR_ORDERS,\n});\n\nexport const wsConnectionClosedOrdersAction = (): IWsConnectionClosedOrdersAction => ({\n  type: WS_CONNECTION_CLOSED_ORDERS,\n});\n\nexport const wsGetOrdersAction = (orders: TOrders): IWsGetOrdersAction => ({\n  type: WS_GET_ORDERS,\n  orders,\n});\n\nexport const wsConnectionStartOrdersUserAction = (): IWsConnectionStartOrdersUserAction => ({\n  type: WS_CONNECTION_START_ORDERS_USER,\n});\n\nexport const wsConnectionSuccessOrdersUserAction = (): IWsConnectionSuccessOrdersUserAction => ({\n  type: WS_CONNECTION_SUCCESS_ORDERS_USER,\n});\n\nexport const wsConnectionErrorOrdersUserAction = (): IWsConnectionErrorOrdersUserAction => ({\n  type: WS_CONNECTION_ERROR_ORDERS_USER,\n});\n\nexport const wsConnectionClosedOrdersUserAction = (): IWsConnectionClosedOrdersUserAction => ({\n  type: WS_CONNECTION_CLOSED_ORDERS_USER,\n});\n\nexport const wsGetOrdersUserAction = (orders: TOrders): IWsGetOrdersUserAction => ({\n  type: WS_GET_ORDERS_USER,\n  orders,\n});\n\nexport type TWsOrdersActions = {\n  wsInit: typeof WS_CONNECTION_START_ORDERS;\n  onOpen: typeof WS_CONNECTION_SUCCESS_ORDERS;\n  onClose: typeof WS_CONNECTION_CLOSED_ORDERS;\n  onError: typeof WS_CONNECTION_ERROR_ORDERS;\n  onOrders: typeof WS_GET_ORDERS;\n};\n\nexport type TWsOrdersUserActions = {\n  wsInit: typeof WS_CONNECTION_START_ORDERS_USER;\n  onOpen: typeof WS_CONNECTION_SUCCESS_ORDERS_USER;\n  onClose: typeof WS_CONNECTION_CLOSED_ORDERS_USER;\n  onError: typeof WS_CONNECTION_ERROR_ORDERS_USER;\n  onOrders: typeof WS_GET_ORDERS_USER;\n};\n\nexport const wsOrdersActions: TWsOrdersActions = {\n  wsInit: WS_CONNECTION_START_ORDERS,\n  onOpen: WS_CONNECTION_SUCCESS_ORDERS,\n  onClose: WS_CONNECTION_CLOSED_ORDERS,\n  onError: WS_CONNECTION_ERROR_ORDERS,\n  onOrders: WS_GET_ORDERS,\n};\n\nexport const wsOrdersUserActions: TWsOrdersUserActions = {\n  wsInit: WS_CONNECTION_START_ORDERS_USER,\n  onOpen: WS_CONNECTION_SUCCESS_ORDERS_USER,\n  onClose: WS_CONNECTION_CLOSED_ORDERS_USER,\n  onError: WS_CONNECTION_ERROR_ORDERS_USER,\n  onOrders: WS_GET_ORDERS_USER,\n};\n","import React from 'react';\nimport { v4 as uuid } from 'uuid';\n\nimport style from './profile-orders.module.css';\nimport OrderFeedItem from '../order-feed-item/order-feed-item';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { wsConnectionStartOrdersUserAction, wsConnectionClosedOrdersUserAction } from '../../services/actions/feed';\n\nexport default function ProfileOrders(): JSX.Element {\n  const dispatch = useDispatch();\n  const { userOrders } = useSelector((store) => store.feed);\n\n  React.useEffect(() => {\n    dispatch(wsConnectionStartOrdersUserAction());\n    return () => {\n      dispatch(wsConnectionClosedOrdersUserAction());\n    };\n  }, [dispatch]);\n\n  const orders = React.useMemo(\n    () => userOrders?.map((item) => <OrderFeedItem isUserOrder id={item._id} key={uuid()} order={item} />),\n    [userOrders],\n  );\n\n  return (\n    <section>\n      <ul className={style.scrolled}>{orders}</ul>\n    </section>\n  );\n}\n","import React from 'react';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\n\nimport style from './profile-page.module.css';\nimport NavProfile from '../../components/nav-profile/nav-profile';\nimport ProfileInfo from '../../components/profile-info/profile-info';\nimport ProfileOrders from '../../components/profile-orders/profile-orders';\n\nconst ProfilePage: React.FC = () => {\n  const { path } = useRouteMatch();\n\n  return (\n    <main className={style.profile_wrapper}>\n      <div className={style.profile_container}>\n        <NavProfile />\n        <Switch>\n          <Route exact path={`${path}`}>\n            <ProfileInfo />\n          </Route>\n          <Route path={`${path}/orders`}>\n            <ProfileOrders />\n          </Route>\n        </Switch>\n      </div>\n    </main>\n  );\n};\n\nexport default ProfilePage;\n","import React from 'react';\n\nimport style from '../index.module.css';\n\nconst NotFoundPage: React.FC = () => (\n  <main className={style.wrapper}>\n    <div className={style.container}>\n      <div className={style.title}>\n        <p className=\"text text_type_main-medium\">Упс... Страница не найдена</p>\n      </div>\n    </div>\n  </main>\n);\n\nexport default NotFoundPage;\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport style from './ingredient-page.module.css';\nimport { useSelector } from '../../services/types/hooks';\nimport IngredientDetails from '../../components/ingredient-details/ingredient-details';\nimport { TIngredient } from '../../utils/types';\n\nexport default function IngredientPage(): JSX.Element {\n  const params = useParams<{ id: string }>();\n  const ingredients = useSelector((store) => store.ingredients.ingredients);\n\n  const currentIngredient = ingredients.find((item: TIngredient) => params.id === item._id);\n  return (\n    <main className={style.wrapper}>\n      <h2 className=\"text text_type_main-large\">Детали ингредиента</h2>\n      {currentIngredient && <IngredientDetails />}\n    </main>\n  );\n}\n","import React from 'react';\nimport { v4 as uuid } from 'uuid';\n\nimport { useSelector } from '../../services/types/hooks';\nimport style from './order-board.module.css';\n\nexport default function OrderBoard(): JSX.Element {\n  const { total, totalToday, orders } = useSelector((store) => store.feed);\n\n  const doneOrders = orders.filter((item) => item.status === 'done').slice(0, 10);\n  const executeOrders = orders.filter((item) => item.status === 'pending').slice(0, 10);\n\n  return (\n    <div className={style.wrapper}>\n      <div className={style.status_container}>\n        <div className={style.title_container}>\n          <p className=\"text text_type_main-medium\">Готовы:</p>\n          <ul className={style.two_column}>\n            {doneOrders?.map((item) => (\n              <li key={uuid()} className={style.ready}>\n                {item.number}\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className={style.title_container}>\n          <p className=\"text text_type_main-medium\">В работе:</p>\n          <ul className={style.two_column}>\n            {executeOrders?.map((item) => (\n              <li key={uuid()} className={style.execute}>\n                {item.number}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <div>\n        <p className=\"text text_type_main-medium\">Выполнено за все время:</p>\n        <p className={style.total}>{total}</p>\n      </div>\n      <div>\n        <p className=\"text text_type_main-medium\">Выполнено за сегодня:</p>\n        <p className={style.total}>{totalToday}</p>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { v4 as uuid } from 'uuid';\n\nimport style from './order-feed-page.module.css';\nimport OrderFeedItem from '../../components/order-feed-item/order-feed-item';\nimport OrderBoard from '../../components/order-board/order-board';\nimport { useDispatch, useSelector } from '../../services/types/hooks';\nimport { wsConnectionClosedOrdersAction, wsConnectionStartOrdersAction } from '../../services/actions/feed';\n\nconst OrderFeedPage: React.FC = () => {\n  const dispatch = useDispatch();\n  const { orders } = useSelector((store) => store.feed);\n\n  React.useEffect(() => {\n    dispatch(wsConnectionStartOrdersAction());\n    return () => {\n      dispatch(wsConnectionClosedOrdersAction());\n    };\n  }, [dispatch]);\n\n  return (\n    <main className={style.wrapper}>\n      <div className={style.container}>\n        <div className={style.title_container}>\n          <p className={`text text_type_main-large ${style.title_text}`}>Лента заказов</p>\n        </div>\n        <div className={style.two_column}>\n          <ul className={style.scrolled}>\n            {orders.map((item) => (\n              <OrderFeedItem isUserOrder={false} id={item._id} key={uuid()} order={item} />\n            ))}\n          </ul>\n          <section className={style.board}>\n            <OrderBoard />\n          </section>\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default OrderFeedPage;\n","import React from 'react';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useRouteMatch, useParams } from 'react-router-dom';\nimport { v4 as uuid } from 'uuid';\n\nimport { useSelector } from '../../services/types/hooks';\nimport formatData from '../../utils/format-data';\nimport IngredientIcon from '../ingredient-icon/ingredient-icon';\nimport style from './order.module.css';\n\nconst ordersStatus = {\n  created: 'Создан',\n  pending: 'Готовится',\n  done: 'Выполнен',\n};\n\nconst Order: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const allIngredients = useSelector((store) => store.ingredients.ingredients);\n  const { orders, userOrders } = useSelector((store) => store.feed);\n\n  const isUserOrder = useRouteMatch('/profile/orders');\n\n  const order = orders && orders.find((item) => item._id === id);\n  const userOrder = isUserOrder && userOrders.find((item) => item._id === id);\n  const currentOrder = isUserOrder ? userOrder : order;\n\n  const orderIngredientsAll =\n    allIngredients &&\n    currentOrder &&\n    currentOrder?.ingredients.map(\n      (item) => allIngredients?.filter((allIngredientItem) => allIngredientItem._id === item)[0],\n    );\n  const orderIngredients =\n    allIngredients && allIngredients.filter((item) => currentOrder?.ingredients.includes(item._id));\n\n  const totalPrice = React.useMemo(\n    () =>\n      allIngredients && orderIngredientsAll\n        ? orderIngredientsAll.reduce((sum, current) => sum + (current?.price || 0), 0)\n        : 0,\n    [orderIngredientsAll, allIngredients],\n  );\n\n  return (\n    <div className={style.wrapper}>\n      <div className=\"text text_type_main-medium mb-15\">\n        {currentOrder && currentOrder.name}\n        {isUserOrder && (\n          <p className={`${style.order_status} ${currentOrder?.status === 'done' && style.done}`}>\n            {currentOrder && ordersStatus[currentOrder.status]}\n          </p>\n        )}\n      </div>\n      <div className=\"text text_type_main-medium mb-3\">Состав:</div>\n      {orderIngredients && orderIngredients.length > 0 && (\n        <ul className={style.scrolled}>\n          {orderIngredients.map((item) => (\n            <li key={uuid()} className={style.ingredient}>\n              <div className={style.icon}>\n                <IngredientIcon imageURL={item.image_mobile} />\n                <p className=\"text text_type_main-default ml-9\">{item.name}</p>\n              </div>\n              <div className={`${style.price} text text_type_digits-default`}>\n                <div className=\"mr-2\">\n                  {\n                    // eslint-disable-next-line no-return-assign\n                    orderIngredientsAll &&\n                      orderIngredientsAll.reduce(\n                        (total_count, orderIngredient) =>\n                          item._id === orderIngredient._id ? total_count + 1 : total_count,\n                        0,\n                      )\n                  }\n                  {' x '}\n                  {item.price}\n                </div>\n                <CurrencyIcon type=\"primary\" />\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n      <div className={style.total_price_container}>\n        <div className=\"text text_type_main-default text_color_inactive\">{order && formatData(order.createdAt)}</div>\n        <div className={style.total_price}>\n          {`${totalPrice} `}\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Order;\n","import React from 'react';\nimport { useRouteMatch, useParams } from 'react-router-dom';\n\nimport style from './order-page.module.css';\nimport Order from '../../components/order/order';\nimport { useDispatch, useSelector } from '../../services/types/hooks';\nimport {\n  wsConnectionClosedOrdersAction,\n  wsConnectionClosedOrdersUserAction,\n  wsConnectionStartOrdersAction,\n  wsConnectionStartOrdersUserAction,\n} from '../../services/actions/feed';\n\nconst OrderPage: React.FC = () => {\n  const dispatch = useDispatch();\n\n  const isUserOrders = useRouteMatch({ path: '/profile/orders/' });\n\n  const [orderNumber, setOrderNumber] = React.useState<number | null | undefined>(undefined);\n\n  const { id } = useParams<{ id: string }>();\n\n  const allOrders = useSelector((store) => store.feed.orders);\n  const userOrders = useSelector((store) => store.feed.userOrders);\n\n  const isFeedOrder = useRouteMatch({ path: '/order-feed' });\n  const feedOrderNumber = isFeedOrder && allOrders && allOrders.find((item) => item._id === id)?.number;\n\n  const isProfileOrders = useRouteMatch({ path: '/profile/orders' });\n  const profileOrderNumber = isProfileOrders && userOrders && userOrders.find((item) => item._id === id)?.number;\n\n  React.useEffect(() => {\n    dispatch(isUserOrders ? wsConnectionStartOrdersUserAction() : wsConnectionStartOrdersAction());\n    if (feedOrderNumber) {\n      setOrderNumber(feedOrderNumber);\n    } else {\n      setOrderNumber(profileOrderNumber);\n    }\n    return () => {\n      dispatch(isUserOrders ? wsConnectionClosedOrdersUserAction() : wsConnectionClosedOrdersAction());\n    };\n  }, [profileOrderNumber, feedOrderNumber, dispatch, isUserOrders]);\n\n  return (\n    <main className={style.wrapper}>\n      <p className={style.title}># {orderNumber}</p>\n      <Order />\n    </main>\n  );\n};\n\nexport default OrderPage;\n","import React from 'react';\nimport { Route, Redirect, RouteProps } from 'react-router-dom';\nimport { useSelector } from '../../services/types/hooks';\n\nconst ProtectedRoute: React.FC<RouteProps> = ({ children, ...props }) => {\n  const isLogged = useSelector((store) => store.user.isLogged);\n\n  const render = React.useCallback(\n    ({ location }) =>\n      isLogged ? (\n        children\n      ) : (\n        // eslint-disable-next-line react-perf/jsx-no-new-object-as-prop\n        <Redirect to={{ pathname: '/login', state: { from: location } }} />\n      ),\n    [children, isLogged],\n  );\n\n  return (\n    <Route\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...props}\n      render={render}\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import * as React from 'react';\nimport { Location } from 'history';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\n\nimport style from './app.module.css';\nimport AppHeader from '../app-header/app-header';\nimport BurgerConstructor from '../burger-constructor/burger-constructor';\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport OrderDetails from '../order-details/order-details';\nimport Modal from '../modal/modal';\nimport { getIngredients, closeModalIngredient } from '../../services/actions/ingredients';\nimport { closeModalOrder } from '../../services/actions/order';\nimport {\n  LoginPage,\n  RegisterPage,\n  ForgotPasswordPage,\n  ResetPasswordPage,\n  OrderPage,\n  ProfilePage,\n  NotFoundPage,\n  IngredientPage,\n  OrderFeedPage,\n} from '../../pages';\nimport ProtectedRoute from '../protected-route/protected-route';\nimport { getUser } from '../../services/actions/user';\nimport { getCookie } from '../../utils/cookie_handlers';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport Order from '../order/order';\n\nfunction App(): JSX.Element {\n  const dispatch = useDispatch();\n\n  const location = useLocation<{ background: Location | undefined }>();\n  const history = useHistory<History>();\n\n  // background — is background page under modal window\n  const background = location?.state?.background;\n\n  const { ingredients } = useSelector((store) => store.ingredients);\n  const { orderNumber } = useSelector((store) => store.order);\n\n  const closeIngredient = React.useCallback(() => {\n    dispatch(closeModalIngredient());\n    history.goBack();\n  }, [history, dispatch]);\n\n  const closeOrder = React.useCallback(() => {\n    dispatch(closeModalOrder());\n  }, [dispatch]);\n\n  // loading ingredients and login if user already logged\n  React.useEffect(() => {\n    dispatch(getIngredients());\n\n    if (localStorage.getItem('refreshToken') && getCookie('token')) {\n      dispatch(getUser());\n    }\n  }, [dispatch]);\n  return (\n    <div className={style.app}>\n      <AppHeader />\n      <Switch location={background || location}>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <ProtectedRoute path=\"/profile/orders/:id\" exact>\n          <OrderPage />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile\">\n          <ProfilePage />\n        </ProtectedRoute>\n        <Route path=\"/register\">\n          <RegisterPage />\n        </Route>\n        <Route path=\"/forgot-password\">\n          <ForgotPasswordPage />\n        </Route>\n        <Route path=\"/reset-password\">\n          <ResetPasswordPage />\n        </Route>\n        <Route path=\"/ingredients/:id\">\n          <IngredientPage />\n        </Route>\n        <Route path=\"/order-feed/:id\" exact>\n          <OrderPage />\n        </Route>\n        <Route path=\"/order-feed\">\n          <OrderFeedPage />\n        </Route>\n        <Route path=\"/\" exact>\n          {ingredients && (\n            <main className={style.main}>\n              <div className={style.container}>\n                <DndProvider backend={HTML5Backend}>\n                  <BurgerIngredients />\n                  <BurgerConstructor />\n                </DndProvider>\n              </div>\n            </main>\n          )}\n        </Route>\n        <Route path=\"/*\" exact>\n          <NotFoundPage />\n        </Route>\n      </Switch>\n      {background && (\n        <Route path=\"/ingredients/:id\">\n          <Modal onClose={closeIngredient} title=\"Детали ингредиента\">\n            <IngredientDetails />\n          </Modal>\n        </Route>\n      )}\n      {background && (\n        <Route path=\"/order-feed/:id\">\n          <Modal onClose={closeIngredient} title=\"\">\n            <Order />\n          </Modal>\n        </Route>\n      )}\n      {background && (\n        <ProtectedRoute path=\"/profile/orders/:id\">\n          <Modal onClose={closeIngredient} title=\"\">\n            <Order />\n          </Modal>\n        </ProtectedRoute>\n      )}\n      {orderNumber && (\n        <Modal onClose={closeOrder} title=\"\">\n          <OrderDetails orderNumber={orderNumber} />\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { TIngredient } from '../../utils/types';\n\n// eslint-disable-next-line import/no-cycle\nimport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_FAILED,\n  OPEN_INGREDIENT,\n  CLOSE_INGREDIENT,\n  TIngredientsActions,\n} from '../actions/ingredients';\n\nexport type TIngredientsStateType = {\n  ingredients: TIngredient[];\n  ingredientsRequest: boolean;\n  ingredientsFailed: boolean;\n  currentIngredient: TIngredient | null;\n};\n\nexport const ingredientsInitialState: TIngredientsStateType = {\n  ingredients: [],\n  ingredientsRequest: false,\n  ingredientsFailed: false,\n  currentIngredient: null,\n};\n\nexport const ingredientsReducer = (\n  // eslint-disable-next-line @typescript-eslint/default-param-last\n  state: TIngredientsStateType = ingredientsInitialState,\n  action: TIngredientsActions,\n): TIngredientsStateType => {\n  switch (action.type) {\n    case GET_INGREDIENTS_REQUEST: {\n      return {\n        ...state,\n        ingredientsRequest: true,\n      };\n    }\n    case GET_INGREDIENTS_SUCCESS: {\n      return {\n        ...state,\n        ingredientsRequest: false,\n        ingredients: action.ingredients,\n        ingredientsFailed: false,\n      };\n    }\n    case GET_INGREDIENTS_FAILED: {\n      return {\n        ...state,\n        ingredientsRequest: false,\n        ingredientsFailed: true,\n      };\n    }\n    case OPEN_INGREDIENT: {\n      return {\n        ...state,\n        currentIngredient: action.currentIngredient,\n      };\n    }\n    case CLOSE_INGREDIENT: {\n      return {\n        ...state,\n        currentIngredient: null,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","// eslint-disable-next-line import/no-cycle\nimport {\n  POST_ORDER_REQUEST,\n  POST_ORDER_SUCCESS,\n  POST_ORDER_FAILED,\n  CLOSE_ORDER,\n  RESET_ORDER_NUMBER,\n  TOrderActions,\n} from '../actions/order';\n\ntype TOrderState = {\n  orderNumber: number | null;\n  orderRequest: boolean;\n  orderFailed: boolean;\n};\n\nexport const orderInitialState = {\n  orderNumber: null,\n  orderRequest: false,\n  orderFailed: false,\n};\n\n// eslint-disable-next-line @typescript-eslint/default-param-last\nexport const orderReducer = (state: TOrderState = orderInitialState, action: TOrderActions): TOrderState => {\n  switch (action.type) {\n    case POST_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n      };\n    }\n    case POST_ORDER_SUCCESS: {\n      return {\n        ...state,\n        orderRequest: false,\n        orderNumber: action.orderNumber,\n        orderFailed: false,\n      };\n    }\n    case POST_ORDER_FAILED: {\n      return {\n        ...state,\n        orderRequest: false,\n        orderFailed: true,\n      };\n    }\n    case CLOSE_ORDER: {\n      return {\n        ...state,\n        orderNumber: null,\n      };\n    }\n    case RESET_ORDER_NUMBER: {\n      return {\n        ...state,\n        orderNumber: null,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { TIngredient } from '../../utils/types';\nimport {\n  RESET_TOTAL_PRICE,\n  SET_TOTAL_PRICE,\n  ADD_INGREDIENT,\n  DELETE_INGREDIENT,\n  MOVE_INGREDIENT,\n  RESET_INGREDIENTS,\n  TConstructorActions,\n} from '../actions/constructor';\n\ntype TConstructorStateType = {\n  totalPrice: number;\n  ingredientsConstructor: Array<TIngredient>;\n};\n\nexport const constructorInitialState: TConstructorStateType = {\n  totalPrice: 0,\n  ingredientsConstructor: [],\n};\n\nexport function constructorReducer(\n  // eslint-disable-next-line @typescript-eslint/default-param-last\n  state: TConstructorStateType = constructorInitialState,\n  action: TConstructorActions,\n): TConstructorStateType {\n  switch (action.type) {\n    case SET_TOTAL_PRICE: {\n      return {\n        ...state,\n        totalPrice: action.totalPrice,\n      };\n    }\n    case RESET_TOTAL_PRICE: {\n      return {\n        ...state,\n        totalPrice: 0,\n      };\n    }\n    case ADD_INGREDIENT: {\n      let ingredientsConstructor = [];\n\n      if (action.item.type === 'bun') {\n        ingredientsConstructor = state.ingredientsConstructor\n          ? [...state.ingredientsConstructor, action.item, action.item]\n          : [action.item, action.item];\n      } else {\n        ingredientsConstructor = state.ingredientsConstructor\n          ? [...state.ingredientsConstructor, action.item]\n          : [action.item];\n      }\n\n      return {\n        ...state,\n        ingredientsConstructor,\n      };\n    }\n    case DELETE_INGREDIENT: {\n      return {\n        ...state,\n        ingredientsConstructor: [...state.ingredientsConstructor].filter((item) => item.uid !== action.uid),\n      };\n    }\n    case MOVE_INGREDIENT: {\n      const bunIngredient = state.ingredientsConstructor.filter((item) => item.type === 'bun');\n      const otherIngredients = state.ingredientsConstructor.filter((item) => item.type !== 'bun');\n      const movedElement = otherIngredients[action.sourceIndex];\n      otherIngredients.splice(action.sourceIndex, 1);\n      otherIngredients.splice(action.targetIndex, 0, movedElement);\n      return {\n        ...state,\n        ingredientsConstructor: [...bunIngredient, ...otherIngredients],\n      };\n    }\n    case RESET_INGREDIENTS: {\n      return {\n        ...state,\n        ingredientsConstructor: [],\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { TUser } from '../../utils/types';\n// eslint-disable-next-line import/no-cycle\nimport {\n  FORGOT_PASSWORD_REQUEST,\n  FORGOT_PASSWORD_SUCCESS,\n  FORGOT_PASSWORD_FAILED,\n  RESET_PASSWORD_REQUEST,\n  RESET_PASSWORD_SUCCESS,\n  RESET_PASSWORD_FAILED,\n  REGISTRATION_REQUEST,\n  REGISTRATION_SUCCESS,\n  REGISTRATION_FAILED,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGIN_FAILED,\n  LOGOUT_REQUEST,\n  LOGOUT_SUCCESS,\n  LOGOUT_FAILED,\n  GET_USER_REQUEST,\n  GET_USER_SUCCESS,\n  GET_USER_FAILED,\n  UPDATE_USER_REQUEST,\n  UPDATE_USER_SUCCESS,\n  UPDATE_USER_FAILED,\n  REFRESH_TOKEN_FAILED,\n  REFRESH_TOKEN_REQUEST,\n  REFRESH_TOKEN_SUCCESS,\n  TUserActions,\n} from '../actions/user';\n\ntype TUserStateTypes = {\n  user: TUser | null;\n  registrationRequest: boolean;\n  registrationFailed: boolean;\n  isLogged: boolean;\n  forgotPasswordRequest: boolean;\n  forgotPasswordFailed: boolean;\n  refreshTokenRequest: boolean;\n  refreshTokenFailed: boolean;\n  resetPasswordRequest: boolean;\n  resetPasswordFailed: boolean;\n  loginRequest: boolean;\n  loginFailed: boolean;\n  logoutRequest: boolean;\n  logoutFailed: boolean;\n  getUserRequest: boolean;\n  getUserFailed: boolean;\n  updateUserRequest: boolean;\n  updateUserFailed: boolean;\n};\n\nexport const userInitialState: TUserStateTypes = {\n  user: null,\n  registrationRequest: false,\n  registrationFailed: false,\n  isLogged: false,\n  forgotPasswordRequest: false,\n  forgotPasswordFailed: false,\n  resetPasswordRequest: false,\n  resetPasswordFailed: false,\n  refreshTokenFailed: false,\n  refreshTokenRequest: false,\n  loginRequest: false,\n  loginFailed: false,\n  logoutRequest: false,\n  logoutFailed: false,\n  getUserRequest: false,\n  getUserFailed: false,\n  updateUserRequest: false,\n  updateUserFailed: false,\n};\n\n// eslint-disable-next-line @typescript-eslint/default-param-last\nexport const userReducer = (state: TUserStateTypes = userInitialState, action: TUserActions): TUserStateTypes => {\n  switch (action.type) {\n    case REGISTRATION_REQUEST: {\n      return {\n        ...state,\n        registrationRequest: true,\n        registrationFailed: false,\n      };\n    }\n    case REGISTRATION_SUCCESS: {\n      return {\n        ...state,\n        registrationRequest: false,\n        registrationFailed: false,\n        user: action.user,\n        isLogged: true,\n      };\n    }\n    case REGISTRATION_FAILED: {\n      return {\n        ...state,\n        registrationRequest: false,\n        registrationFailed: true,\n      };\n    }\n    case FORGOT_PASSWORD_REQUEST: {\n      return {\n        ...state,\n        forgotPasswordRequest: true,\n        forgotPasswordFailed: false,\n      };\n    }\n    case FORGOT_PASSWORD_SUCCESS: {\n      return {\n        ...state,\n        forgotPasswordFailed: false,\n        forgotPasswordRequest: false,\n      };\n    }\n    case FORGOT_PASSWORD_FAILED: {\n      return {\n        ...state,\n        forgotPasswordFailed: true,\n        forgotPasswordRequest: false,\n      };\n    }\n    case RESET_PASSWORD_REQUEST: {\n      return {\n        ...state,\n        resetPasswordRequest: true,\n        resetPasswordFailed: false,\n      };\n    }\n    case RESET_PASSWORD_SUCCESS: {\n      return {\n        ...state,\n        resetPasswordRequest: false,\n        resetPasswordFailed: false,\n      };\n    }\n    case RESET_PASSWORD_FAILED: {\n      return {\n        ...state,\n        resetPasswordRequest: false,\n        resetPasswordFailed: true,\n      };\n    }\n    case LOGIN_REQUEST: {\n      return {\n        ...state,\n        loginRequest: true,\n        loginFailed: false,\n      };\n    }\n    case LOGIN_SUCCESS: {\n      return {\n        ...state,\n        loginRequest: false,\n        loginFailed: false,\n        user: action.user,\n        isLogged: true,\n      };\n    }\n    case LOGIN_FAILED: {\n      return {\n        ...state,\n        loginRequest: false,\n        loginFailed: true,\n      };\n    }\n    case LOGOUT_REQUEST: {\n      return {\n        ...state,\n        logoutRequest: true,\n        logoutFailed: false,\n      };\n    }\n    case LOGOUT_SUCCESS: {\n      return {\n        ...state,\n        logoutRequest: false,\n        logoutFailed: false,\n        isLogged: false,\n        user: null,\n      };\n    }\n    case LOGOUT_FAILED: {\n      return {\n        ...state,\n        logoutFailed: true,\n        logoutRequest: false,\n      };\n    }\n    case GET_USER_REQUEST: {\n      return {\n        ...state,\n        getUserRequest: true,\n        getUserFailed: false,\n        isLogged: false,\n      };\n    }\n    case GET_USER_SUCCESS: {\n      return {\n        ...state,\n        getUserRequest: false,\n        getUserFailed: false,\n        user: action.user,\n        isLogged: true,\n      };\n    }\n    case GET_USER_FAILED: {\n      return {\n        ...state,\n        getUserFailed: true,\n        getUserRequest: false,\n        user: null,\n        isLogged: false,\n      };\n    }\n    case REFRESH_TOKEN_REQUEST: {\n      return {\n        ...state,\n        refreshTokenRequest: true,\n        refreshTokenFailed: false,\n      };\n    }\n    case REFRESH_TOKEN_SUCCESS: {\n      return {\n        ...state,\n        refreshTokenRequest: false,\n        refreshTokenFailed: false,\n      };\n    }\n    case REFRESH_TOKEN_FAILED: {\n      return {\n        ...state,\n        refreshTokenFailed: true,\n        refreshTokenRequest: false,\n      };\n    }\n    case UPDATE_USER_REQUEST: {\n      return {\n        ...state,\n        updateUserRequest: true,\n        updateUserFailed: false,\n      };\n    }\n    case UPDATE_USER_SUCCESS: {\n      return {\n        ...state,\n        updateUserRequest: false,\n        updateUserFailed: false,\n        user: action.user,\n      };\n    }\n    case UPDATE_USER_FAILED: {\n      return {\n        ...state,\n        updateUserRequest: false,\n        updateUserFailed: true,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { TOrder } from '../../utils/types';\nimport {\n  TFeedOrdersActions,\n  WS_CONNECTION_SUCCESS_ORDERS,\n  WS_CONNECTION_CLOSED_ORDERS,\n  WS_CONNECTION_ERROR_ORDERS,\n  WS_GET_ORDERS,\n  WS_CONNECTION_SUCCESS_ORDERS_USER,\n  WS_CONNECTION_CLOSED_ORDERS_USER,\n  WS_CONNECTION_ERROR_ORDERS_USER,\n  WS_GET_ORDERS_USER,\n} from '../actions/feed';\n\ntype TFeedOrdersState = {\n  wsConnected: boolean;\n  orders: TOrder[];\n  total: number;\n  totalToday: number;\n  userOrders: TOrder[];\n};\n\nexport const feedOrdersInitialState: TFeedOrdersState = {\n  wsConnected: false,\n  orders: [],\n  total: 0,\n  totalToday: 0,\n  userOrders: [],\n};\n\n// eslint-disable-next-line @typescript-eslint/default-param-last\nexport const feedOrdersReducer = (state = feedOrdersInitialState, action: TFeedOrdersActions): TFeedOrdersState => {\n  switch (action.type) {\n    case WS_CONNECTION_SUCCESS_ORDERS: {\n      return {\n        ...state,\n        wsConnected: true,\n      };\n    }\n    case WS_CONNECTION_CLOSED_ORDERS: {\n      return {\n        ...state,\n        wsConnected: false,\n      };\n    }\n    case WS_CONNECTION_ERROR_ORDERS: {\n      return {\n        ...state,\n        wsConnected: false,\n      };\n    }\n    case WS_GET_ORDERS: {\n      return {\n        ...state,\n        orders: action.orders.orders,\n        total: action.orders.total,\n        totalToday: action.orders.totalToday,\n      };\n    }\n    case WS_CONNECTION_SUCCESS_ORDERS_USER: {\n      return {\n        ...state,\n        wsConnected: true,\n      };\n    }\n    case WS_CONNECTION_CLOSED_ORDERS_USER: {\n      return {\n        ...state,\n        wsConnected: false,\n      };\n    }\n    case WS_CONNECTION_ERROR_ORDERS_USER: {\n      return {\n        ...state,\n        wsConnected: false,\n      };\n    }\n    case WS_GET_ORDERS_USER: {\n      return {\n        ...state,\n        userOrders: action.orders.orders,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","/* eslint import/no-cycle: 0 */\nimport { combineReducers } from 'redux';\nimport { ingredientsReducer } from './ingredients-reducer';\nimport { orderReducer } from './order-reducer';\nimport { constructorReducer } from './constructor-reducer';\nimport { userReducer } from './user-reducer';\nimport { feedOrdersReducer } from './feed-reducer';\n\nconst rootReducer = combineReducers({\n  ingredients: ingredientsReducer,\n  order: orderReducer,\n  constructor: constructorReducer,\n  user: userReducer,\n  feed: feedOrdersReducer,\n});\n\nexport default rootReducer;\n","import { Middleware, MiddlewareAPI } from 'redux';\nimport { getCookie } from '../../utils/cookie_handlers';\nimport {\n  TWsOrdersActions,\n  TWsOrdersUserActions,\n  WS_CONNECTION_START_ORDERS,\n  WS_CONNECTION_START_ORDERS_USER,\n} from '../actions/feed';\n/* eslint-disable-next-line import/no-cycle */\nimport { AppDispatch, RootState } from '../types';\n\nconst socketMiddleware = (wsUrl: string, wsActions: TWsOrdersActions | TWsOrdersUserActions): Middleware => (\n  store: MiddlewareAPI<AppDispatch, RootState>,\n) => {\n  let socket: WebSocket | null = null;\n\n  return (next) => (action) => {\n    const { dispatch, getState } = store;\n    const { isLogged } = getState().user;\n    const token = isLogged ? `?token=${getCookie('token')?.replace('Bearer ', '')}` : '';\n    const { type } = action;\n    const { wsInit, onOpen, onClose, onError, onOrders } = wsActions;\n\n    if (type === wsInit && type === WS_CONNECTION_START_ORDERS_USER) {\n      socket = new WebSocket(`${wsUrl}${token}`);\n    }\n\n    if (type === wsInit && type === WS_CONNECTION_START_ORDERS) {\n      socket = new WebSocket(`${wsUrl}/all`);\n    }\n\n    if (socket) {\n      socket.onopen = (event) => {\n        dispatch({ type: onOpen, orders: event });\n      };\n\n      socket.onerror = (event) => {\n        dispatch({ type: onError, orders: event });\n      };\n\n      socket.onmessage = (event) => {\n        const { data } = event;\n        const message = JSON.parse(data);\n        dispatch({ type: onOrders, orders: message });\n      };\n\n      socket.onclose = (event) => {\n        dispatch({ type: onClose, orders: event });\n      };\n    }\n    next(action);\n  };\n};\n\nexport default socketMiddleware;\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\n/* eslint import/no-cycle: 0 */\nimport rootReducer from './reducers';\nimport socketMiddleware from './middlewares/wsSocketMiddleware';\nimport { wsOrdersUserActions, wsOrdersActions } from './actions/feed';\n\nconst WS_URL = 'wss://norma.nomoreparties.space/orders';\n\ninterface ObjectWithKeys {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any;\n}\n\nconst composeEnhancers =\n  typeof window === 'object' && (window as ObjectWithKeys).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? (window as ObjectWithKeys).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose;\n\nconst enhancer = composeEnhancers(\n  applyMiddleware(thunk, socketMiddleware(WS_URL, wsOrdersActions), socketMiddleware(WS_URL, wsOrdersUserActions)),\n);\n\nconst store = createStore(rootReducer, enhancer);\n\nexport default store;\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.css';\nimport App from './components/app/app';\nimport reportWebVitals from './reportWebVitals';\nimport store from './services/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router basename=\"/react-burger\">\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root') as HTMLElement,\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_container\":\"ingredient-details_image_container__2bo4e\",\"name_container\":\"ingredient-details_name_container__2xWtJ\",\"name\":\"ingredient-details_name__3OKTo\",\"property_container\":\"ingredient-details_property_container__Vldgx\",\"property_item\":\"ingredient-details_property_item__ncKyc\",\"property_value\":\"ingredient-details_property_value__V1173\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-board_wrapper__t6YXE\",\"status_container\":\"order-board_status_container__2ahjZ\",\"two_column\":\"order-board_two_column__1h5_I\",\"title_container\":\"order-board_title_container__27k2J\",\"execute\":\"order-board_execute__2hbRB text text_type_digits-default\",\"ready\":\"order-board_ready__8nXoG order-board_execute__2hbRB text text_type_digits-default\",\"total\":\"order-board_total__oxBD_ text text_type_digits-large\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-card_container__2HSwd\",\"price_container\":\"ingredient-card_price_container__3hqm6\",\"price_value\":\"ingredient-card_price_value__1dvwl\",\"icon\":\"ingredient-card_icon__3fDVh\",\"image_container\":\"ingredient-card_image_container__3Z_kY\",\"counter\":\"ingredient-card_counter__2lnq5\",\"name_text\":\"ingredient-card_name_text___ZqN6\",\"link\":\"ingredient-card_link__2SBZJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item_container\":\"order-feed-item_item_container__16J5C\",\"info_container\":\"order-feed-item_info_container__S8at9\",\"date_container\":\"order-feed-item_date_container__2CCbB\",\"title_container\":\"order-feed-item_title_container__1Kka5\",\"ingredients_container\":\"order-feed-item_ingredients_container__29CFV\",\"total_price\":\"order-feed-item_total_price__3uDpd\",\"icons_container\":\"order-feed-item_icons_container__3Zdyw\",\"order_status\":\"order-feed-item_order_status__2kpL6 text text_type_main-default\",\"done\":\"order-feed-item_done__3KOiR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order_wrapper__vDJV4\",\"order_status\":\"order_order_status__1cOS9 text text_type_main-default\",\"done\":\"order_done__1EPcy\",\"ingredient\":\"order_ingredient__32_cY\",\"scrolled\":\"order_scrolled__2rSVW\",\"icon\":\"order_icon__1d17d\",\"price\":\"order_price__ojCD8\",\"total_price_container\":\"order_total_price_container__1h_ZM\",\"total_price\":\"order_total_price__3gB3d text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header_container\":\"app-header_header_container__1lOLa\",\"header\":\"app-header_header__1iHLW\",\"logo\":\"app-header_logo__zVEfY\",\"container\":\"app-header_container__2ER_-\",\"link\":\"app-header_link__2y8TU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-feed-page_wrapper__eHQlQ\",\"container\":\"order-feed-page_container__OUray\",\"two_column\":\"order-feed-page_two_column__3OeXp\",\"title_container\":\"order-feed-page_title_container__SWNgd\",\"title\":\"order-feed-page_title__1B55T\",\"scrolled\":\"order-feed-page_scrolled__3sARU\",\"orders_container\":\"order-feed-page_orders_container__3SBAo\",\"board\":\"order-feed-page_board__1Vgf5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_id\":\"order-details_order_id__2YBV4\",\"order_id_container\":\"order-details_order_id_container__3g3Jl\",\"done_icon\":\"order-details_done_icon__2HQIM\",\"popup_text\":\"order-details_popup_text__34YGV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_container\":\"nav-profile_nav_container__FMBBm\",\"nav_link\":\"nav-profile_nav_link__175NN text_type_main-medium\",\"active_nav_link\":\"nav-profile_active_nav_link__iJNGw text_type_main-medium\",\"button\":\"nav-profile_button__1nFIW text_type_main-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__EME_h\",\"title_container\":\"burger-ingredients_title_container__1Dd6p\",\"title_text\":\"burger-ingredients_title_text__3aGuY\",\"tab\":\"burger-ingredients_tab__1Ru1Z\",\"scrolled\":\"burger-ingredients_scrolled__oZ7HP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"menu-button_btn__48caU\",\"text\":\"menu-button_text__2ORtL\",\"logo\":\"menu-button_logo__1F7QZ\",\"active\":\"menu-button_active__DthtH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"pages_wrapper__33-ww\",\"container\":\"pages_container__Mrsnu\",\"title\":\"pages_title__2T2zm\",\"link\":\"pages_link__33XmP\",\"form_container\":\"pages_form_container__1Qac3\",\"inputs_container\":\"pages_inputs_container__1Hkrr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__M9MMq\",\"main\":\"app_main__3yfFw\",\"message\":\"app_message__1nOHE\",\"container\":\"app_container__2GidD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup_container\":\"modal_popup_container__o_tUB\",\"title_container\":\"modal_title_container__39qLd\",\"icon_container\":\"modal_icon_container__2t019\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-icon_container__3ofvm\",\"last\":\"ingredient-icon_last__V0EUl\",\"counter\":\"ingredient-icon_counter__1fhFh text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"two_column\":\"ingredients-tab_two_column__2oXJQ\",\"tab_name\":\"ingredients-tab_tab_name__3YVy_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile_wrapper\":\"profile-page_profile_wrapper__2uP5d\",\"profile_container\":\"profile-page_profile_container__2GFTK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_container\":\"profile-info_form_container__3R6Fp\",\"inputs_container\":\"profile-info_inputs_container__qT6xk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-page_wrapper__37rD5\",\"title\":\"order-page_title__Cv_zr text text_type_digits-default\"};"],"sourceRoot":""}